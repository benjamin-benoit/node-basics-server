{
  "{\"sourceRoot\":\"/Users/test/Workspace/basics/server\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/test/Workspace/basics/server\",\"filename\":\"/Users/test/Workspace/basics/server/server.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/test/Workspace/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/test/Workspace/basics/server",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/test/Workspace/basics/server",
      "filename": "/Users/test/Workspace/basics/server/server.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/test/Workspace/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/test/Workspace/basics/server/server.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/test/Workspace/basics/server/server.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/test/Workspace/basics/server",
        "sourceFileName": "server.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _routes = _interopRequireDefault(require(\"./routes\"));\n\nvar _models = require(\"./models\");\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nrequire(\"./middlewares/passport\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst start = async () => {\n  try {\n    const host = process.env.HOST;\n    const port = parseInt(process.argv[2] || process.env.PORT);\n    const app = (0, _express.default)();\n    await _models.db.authenticate();\n\n    if (process.env.NODE_ENV) {\n      await _models.db.sync({\n        force: false\n      });\n    }\n\n    app.use((0, _cors.default)());\n    app.use(_passport.default.initialize());\n    app.use(_bodyParser.default.urlencoded({\n      extended: true\n    }));\n    app.use(_bodyParser.default.json());\n    app.get(\"/\", (request, response) => {\n      response.send(\"Please feel free to use our api with /api\");\n    });\n    app.use(\"/api\", _routes.default);\n    app.listen(port, () => {\n      console.log(`Server is running in ${host} at ${port}`);\n    });\n  } catch (ex) {\n    console.log(ex.message);\n  }\n}; // Let's Rock! :)\n\n\nstart();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJzdGFydCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiSE9TVCIsInBvcnQiLCJwYXJzZUludCIsImFyZ3YiLCJQT1JUIiwiYXBwIiwiZGF0YWJhc2UiLCJhdXRoZW50aWNhdGUiLCJOT0RFX0VOViIsInN5bmMiLCJmb3JjZSIsInVzZSIsInBhc3Nwb3J0IiwiaW5pdGlhbGl6ZSIsImJvZHlQYXJzZXIiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJqc29uIiwiZ2V0IiwicmVxdWVzdCIsInJlc3BvbnNlIiwic2VuZCIsImFwaSIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciLCJleCIsIm1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7Ozs7QUFFQSxNQUFNQSxLQUFLLEdBQUcsWUFBWTtBQUN4QixNQUFJO0FBQ0YsVUFBTUMsSUFBSSxHQUFHQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsSUFBekI7QUFDQSxVQUFNQyxJQUFJLEdBQUdDLFFBQVEsQ0FBQ0osT0FBTyxDQUFDSyxJQUFSLENBQWEsQ0FBYixLQUFtQkwsT0FBTyxDQUFDQyxHQUFSLENBQVlLLElBQWhDLENBQXJCO0FBQ0EsVUFBTUMsR0FBRyxHQUFHLHVCQUFaO0FBRUEsVUFBTUMsV0FBU0MsWUFBVCxFQUFOOztBQUVBLFFBQUlULE9BQU8sQ0FBQ0MsR0FBUixDQUFZUyxRQUFoQixFQUEwQjtBQUN4QixZQUFNRixXQUFTRyxJQUFULENBQWM7QUFBRUMsUUFBQUEsS0FBSyxFQUFFO0FBQVQsT0FBZCxDQUFOO0FBQ0Q7O0FBRURMLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRLG9CQUFSO0FBQ0FOLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRQyxrQkFBU0MsVUFBVCxFQUFSO0FBRUFSLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRRyxvQkFBV0MsVUFBWCxDQUFzQjtBQUFFQyxNQUFBQSxRQUFRLEVBQUU7QUFBWixLQUF0QixDQUFSO0FBQ0FYLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRRyxvQkFBV0csSUFBWCxFQUFSO0FBRUFaLElBQUFBLEdBQUcsQ0FBQ2EsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxPQUFELEVBQVVDLFFBQVYsS0FBdUI7QUFDbENBLE1BQUFBLFFBQVEsQ0FBQ0MsSUFBVCxDQUFjLDJDQUFkO0FBQ0QsS0FGRDtBQUlBaEIsSUFBQUEsR0FBRyxDQUFDTSxHQUFKLENBQVEsTUFBUixFQUFnQlcsZUFBaEI7QUFFQWpCLElBQUFBLEdBQUcsQ0FBQ2tCLE1BQUosQ0FBV3RCLElBQVgsRUFBaUIsTUFBTTtBQUNyQnVCLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLHdCQUF1QjVCLElBQUssT0FBTUksSUFBSyxFQUFwRDtBQUNELEtBRkQ7QUFHRCxHQTFCRCxDQTBCRSxPQUFPeUIsRUFBUCxFQUFXO0FBQ1hGLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxFQUFFLENBQUNDLE9BQWY7QUFDRDtBQUNGLENBOUJELEMsQ0FnQ0E7OztBQUNBL0IsS0FBSyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvdGVzdC9Xb3Jrc3BhY2UvYmFzaWNzL3NlcnZlciIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tIFwiYm9keS1wYXJzZXJcIjtcbmltcG9ydCBhcGkgZnJvbSBcIi4vcm91dGVzXCI7XG5pbXBvcnQgeyBkYiBhcyBkYXRhYmFzZSB9IGZyb20gXCIuL21vZGVsc1wiO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcblxuaW1wb3J0IFwiLi9taWRkbGV3YXJlcy9wYXNzcG9ydFwiO1xuXG5jb25zdCBzdGFydCA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBob3N0ID0gcHJvY2Vzcy5lbnYuSE9TVDtcbiAgICBjb25zdCBwb3J0ID0gcGFyc2VJbnQocHJvY2Vzcy5hcmd2WzJdIHx8IHByb2Nlc3MuZW52LlBPUlQpO1xuICAgIGNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuICAgIGF3YWl0IGRhdGFiYXNlLmF1dGhlbnRpY2F0ZSgpO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WKSB7XG4gICAgICBhd2FpdCBkYXRhYmFzZS5zeW5jKHsgZm9yY2U6IGZhbHNlIH0pO1xuICAgIH1cblxuICAgIGFwcC51c2UoY29ycygpKTtcbiAgICBhcHAudXNlKHBhc3Nwb3J0LmluaXRpYWxpemUoKSk7XG5cbiAgICBhcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbiAgICBhcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcblxuICAgIGFwcC5nZXQoXCIvXCIsIChyZXF1ZXN0LCByZXNwb25zZSkgPT4ge1xuICAgICAgcmVzcG9uc2Uuc2VuZChcIlBsZWFzZSBmZWVsIGZyZWUgdG8gdXNlIG91ciBhcGkgd2l0aCAvYXBpXCIpO1xuICAgIH0pO1xuXG4gICAgYXBwLnVzZShcIi9hcGlcIiwgYXBpKTtcblxuICAgIGFwcC5saXN0ZW4ocG9ydCwgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYFNlcnZlciBpcyBydW5uaW5nIGluICR7aG9zdH0gYXQgJHtwb3J0fWApO1xuICAgIH0pO1xuICB9IGNhdGNoIChleCkge1xuICAgIGNvbnNvbGUubG9nKGV4Lm1lc3NhZ2UpO1xuICB9XG59O1xuXG4vLyBMZXQncyBSb2NrISA6KVxuc3RhcnQoKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "start",
        "host",
        "process",
        "env",
        "HOST",
        "port",
        "parseInt",
        "argv",
        "PORT",
        "app",
        "database",
        "authenticate",
        "NODE_ENV",
        "sync",
        "force",
        "use",
        "passport",
        "initialize",
        "bodyParser",
        "urlencoded",
        "extended",
        "json",
        "get",
        "request",
        "response",
        "send",
        "api",
        "listen",
        "console",
        "log",
        "ex",
        "message"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;AAEA,MAAMA,KAAK,GAAG,YAAY;AACxB,MAAI;AACF,UAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAzB;AACA,UAAMC,IAAI,GAAGC,QAAQ,CAACJ,OAAO,CAACK,IAAR,CAAa,CAAb,KAAmBL,OAAO,CAACC,GAAR,CAAYK,IAAhC,CAArB;AACA,UAAMC,GAAG,GAAG,uBAAZ;AAEA,UAAMC,WAASC,YAAT,EAAN;;AAEA,QAAIT,OAAO,CAACC,GAAR,CAAYS,QAAhB,EAA0B;AACxB,YAAMF,WAASG,IAAT,CAAc;AAAEC,QAAAA,KAAK,EAAE;AAAT,OAAd,CAAN;AACD;;AAEDL,IAAAA,GAAG,CAACM,GAAJ,CAAQ,oBAAR;AACAN,IAAAA,GAAG,CAACM,GAAJ,CAAQC,kBAASC,UAAT,EAAR;AAEAR,IAAAA,GAAG,CAACM,GAAJ,CAAQG,oBAAWC,UAAX,CAAsB;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAtB,CAAR;AACAX,IAAAA,GAAG,CAACM,GAAJ,CAAQG,oBAAWG,IAAX,EAAR;AAEAZ,IAAAA,GAAG,CAACa,GAAJ,CAAQ,GAAR,EAAa,CAACC,OAAD,EAAUC,QAAV,KAAuB;AAClCA,MAAAA,QAAQ,CAACC,IAAT,CAAc,2CAAd;AACD,KAFD;AAIAhB,IAAAA,GAAG,CAACM,GAAJ,CAAQ,MAAR,EAAgBW,eAAhB;AAEAjB,IAAAA,GAAG,CAACkB,MAAJ,CAAWtB,IAAX,EAAiB,MAAM;AACrBuB,MAAAA,OAAO,CAACC,GAAR,CAAa,wBAAuB5B,IAAK,OAAMI,IAAK,EAApD;AACD,KAFD;AAGD,GA1BD,CA0BE,OAAOyB,EAAP,EAAW;AACXF,IAAAA,OAAO,CAACC,GAAR,CAAYC,EAAE,CAACC,OAAf;AACD;AACF,CA9BD,C,CAgCA;;;AACA/B,KAAK",
      "sourceRoot": "/Users/test/Workspace/basics/server",
      "sourcesContent": [
        "import express from \"express\";\nimport bodyParser from \"body-parser\";\nimport api from \"./routes\";\nimport { db as database } from \"./models\";\nimport passport from \"passport\";\nimport cors from \"cors\";\n\nimport \"./middlewares/passport\";\n\nconst start = async () => {\n  try {\n    const host = process.env.HOST;\n    const port = parseInt(process.argv[2] || process.env.PORT);\n    const app = express();\n\n    await database.authenticate();\n\n    if (process.env.NODE_ENV) {\n      await database.sync({ force: false });\n    }\n\n    app.use(cors());\n    app.use(passport.initialize());\n\n    app.use(bodyParser.urlencoded({ extended: true }));\n    app.use(bodyParser.json());\n\n    app.get(\"/\", (request, response) => {\n      response.send(\"Please feel free to use our api with /api\");\n    });\n\n    app.use(\"/api\", api);\n\n    app.listen(port, () => {\n      console.log(`Server is running in ${host} at ${port}`);\n    });\n  } catch (ex) {\n    console.log(ex.message);\n  }\n};\n\n// Let's Rock! :)\nstart();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544520458970
  },
  "{\"sourceRoot\":\"/Users/test/Workspace/basics/server/routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/test/Workspace/basics/server\",\"filename\":\"/Users/test/Workspace/basics/server/routes/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/test/Workspace/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/test/Workspace/basics/server/routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/test/Workspace/basics/server",
      "filename": "/Users/test/Workspace/basics/server/routes/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/test/Workspace/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/test/Workspace/basics/server/routes/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/test/Workspace/basics/server/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/test/Workspace/basics/server/routes",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _auth = _interopRequireDefault(require(\"./auth\"));\n\nvar _secured = _interopRequireDefault(require(\"./secured\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.get(\"/\", (req, res) => {\n  res.json({\n    name: \"sanji.Api\",\n    meta: {\n      version: \"1.0.0\",\n      status: \"running\"\n    }\n  });\n});\napi.use(\"/auth\", _auth.default);\napi.use(\"/\", _passport.default.authenticate(\"jwt\", {\n  session: false\n}), _secured.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsImpzb24iLCJuYW1lIiwibWV0YSIsInZlcnNpb24iLCJzdGF0dXMiLCJ1c2UiLCJhdXRoIiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzZXNzaW9uIiwic2VjdXJlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLHNCQUFaO0FBRUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUN6QkEsRUFBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVM7QUFDUEMsSUFBQUEsSUFBSSxFQUFFLFdBREM7QUFFUEMsSUFBQUEsSUFBSSxFQUFFO0FBQ0pDLE1BQUFBLE9BQU8sRUFBRSxPQURMO0FBRUpDLE1BQUFBLE1BQU0sRUFBRTtBQUZKO0FBRkMsR0FBVDtBQU9ELENBUkQ7QUFVQVIsR0FBRyxDQUFDUyxHQUFKLENBQVEsT0FBUixFQUFpQkMsYUFBakI7QUFDQVYsR0FBRyxDQUFDUyxHQUFKLENBQVEsR0FBUixFQUFhRSxrQkFBU0MsWUFBVCxDQUFzQixLQUF0QixFQUE2QjtBQUFFQyxFQUFBQSxPQUFPLEVBQUU7QUFBWCxDQUE3QixDQUFiLEVBQStEQyxnQkFBL0Q7ZUFFZWQsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvdGVzdC9Xb3Jrc3BhY2UvYmFzaWNzL3NlcnZlci9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xuaW1wb3J0IGF1dGggZnJvbSBcIi4vYXV0aFwiO1xuaW1wb3J0IHNlY3VyZWQgZnJvbSBcIi4vc2VjdXJlZFwiO1xuXG5jb25zdCBhcGkgPSBSb3V0ZXIoKTtcblxuYXBpLmdldChcIi9cIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICBuYW1lOiBcInNhbmppLkFwaVwiLFxuICAgIG1ldGE6IHtcbiAgICAgIHZlcnNpb246IFwiMS4wLjBcIixcbiAgICAgIHN0YXR1czogXCJydW5uaW5nXCJcbiAgICB9XG4gIH0pO1xufSk7XG5cbmFwaS51c2UoXCIvYXV0aFwiLCBhdXRoKTtcbmFwaS51c2UoXCIvXCIsIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZShcImp3dFwiLCB7IHNlc3Npb246IGZhbHNlIH0pLCBzZWN1cmVkKTtcblxuZXhwb3J0IGRlZmF1bHQgYXBpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "json",
        "name",
        "meta",
        "version",
        "status",
        "use",
        "auth",
        "passport",
        "authenticate",
        "session",
        "secured"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,EAAAA,GAAG,CAACC,IAAJ,CAAS;AACPC,IAAAA,IAAI,EAAE,WADC;AAEPC,IAAAA,IAAI,EAAE;AACJC,MAAAA,OAAO,EAAE,OADL;AAEJC,MAAAA,MAAM,EAAE;AAFJ;AAFC,GAAT;AAOD,CARD;AAUAR,GAAG,CAACS,GAAJ,CAAQ,OAAR,EAAiBC,aAAjB;AACAV,GAAG,CAACS,GAAJ,CAAQ,GAAR,EAAaE,kBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAA7B,CAAb,EAA+DC,gBAA/D;eAEed,G",
      "sourceRoot": "/Users/test/Workspace/basics/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport passport from \"passport\";\nimport auth from \"./auth\";\nimport secured from \"./secured\";\n\nconst api = Router();\n\napi.get(\"/\", (req, res) => {\n  res.json({\n    name: \"sanji.Api\",\n    meta: {\n      version: \"1.0.0\",\n      status: \"running\"\n    }\n  });\n});\n\napi.use(\"/auth\", auth);\napi.use(\"/\", passport.authenticate(\"jwt\", { session: false }), secured);\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544452727848
  },
  "{\"sourceRoot\":\"/Users/test/Workspace/basics/server/routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/test/Workspace/basics/server\",\"filename\":\"/Users/test/Workspace/basics/server/routes/auth.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/test/Workspace/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/test/Workspace/basics/server/routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/test/Workspace/basics/server",
      "filename": "/Users/test/Workspace/basics/server/routes/auth.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/test/Workspace/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/test/Workspace/basics/server/routes/auth.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/test/Workspace/basics/server/routes/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/test/Workspace/basics/server/routes",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _user = _interopRequireDefault(require(\"../models/user\"));\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.post(\"/register\", async (req, res) => {\n  const {\n    nickname,\n    email,\n    password,\n    password_confirmation\n  } = req.body;\n\n  try {\n    const user = new _user.default({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n    await user.save();\n    const payload = {\n      uuid: user.uuid,\n      nickname,\n      email\n    };\n\n    const token = _jsonwebtoken.default.sign(payload, \"mysupersecret\");\n\n    res.status(201).json({\n      data: {\n        user\n      },\n      meta: {\n        token\n      }\n    });\n  } catch (err) {\n    console.log(err.message);\n    res.json({\n      err: err.message\n    });\n  }\n});\napi.post(\"/login\", async (req, res) => {\n  _passport.default.authenticate(\"local\", {\n    session: false\n  }, (err, user) => {\n    if (err) {\n      res.status(400).json({\n        error: {\n          message: err\n        }\n      });\n    }\n\n    const {\n      uuid,\n      nickname,\n      email\n    } = user;\n    const payload = {\n      uuid,\n      nickname,\n      email\n    };\n\n    const token = _jsonwebtoken.default.sign(payload, process.env.JWT_ENCRYPTION);\n\n    res.status(200).json({\n      data: {\n        user\n      },\n      meta: {\n        token\n      }\n    });\n  })(req, res);\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiYXBpIiwicG9zdCIsInJlcSIsInJlcyIsIm5pY2tuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInBhc3N3b3JkX2NvbmZpcm1hdGlvbiIsImJvZHkiLCJ1c2VyIiwiVXNlciIsInNhdmUiLCJwYXlsb2FkIiwidXVpZCIsInRva2VuIiwiand0Iiwic2lnbiIsInN0YXR1cyIsImpzb24iLCJkYXRhIiwibWV0YSIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzZXNzaW9uIiwiZXJyb3IiLCJwcm9jZXNzIiwiZW52IiwiSldUX0VOQ1JZUFRJT04iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLEdBQUcsR0FBRyxzQkFBWjtBQUVBQSxHQUFHLENBQUNDLElBQUosQ0FBUyxXQUFULEVBQXNCLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUN4QyxRQUFNO0FBQUVDLElBQUFBLFFBQUY7QUFBWUMsSUFBQUEsS0FBWjtBQUFtQkMsSUFBQUEsUUFBbkI7QUFBNkJDLElBQUFBO0FBQTdCLE1BQXVETCxHQUFHLENBQUNNLElBQWpFOztBQUVBLE1BQUk7QUFDRixVQUFNQyxJQUFJLEdBQUcsSUFBSUMsYUFBSixDQUFTO0FBQ3BCTixNQUFBQSxRQURvQjtBQUVwQkMsTUFBQUEsS0FGb0I7QUFHcEJDLE1BQUFBLFFBSG9CO0FBSXBCQyxNQUFBQTtBQUpvQixLQUFULENBQWI7QUFPQSxVQUFNRSxJQUFJLENBQUNFLElBQUwsRUFBTjtBQUVBLFVBQU1DLE9BQU8sR0FBRztBQUFFQyxNQUFBQSxJQUFJLEVBQUVKLElBQUksQ0FBQ0ksSUFBYjtBQUFtQlQsTUFBQUEsUUFBbkI7QUFBNkJDLE1BQUFBO0FBQTdCLEtBQWhCOztBQUNBLFVBQU1TLEtBQUssR0FBR0Msc0JBQUlDLElBQUosQ0FBU0osT0FBVCxFQUFrQixlQUFsQixDQUFkOztBQUVBVCxJQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUU7QUFBRVYsUUFBQUE7QUFBRixPQUFSO0FBQWtCVyxNQUFBQSxJQUFJLEVBQUU7QUFBRU4sUUFBQUE7QUFBRjtBQUF4QixLQUFyQjtBQUNELEdBZEQsQ0FjRSxPQUFPTyxHQUFQLEVBQVk7QUFDWkMsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlGLEdBQUcsQ0FBQ0csT0FBaEI7QUFDQXJCLElBQUFBLEdBQUcsQ0FBQ2UsSUFBSixDQUFTO0FBQUVHLE1BQUFBLEdBQUcsRUFBRUEsR0FBRyxDQUFDRztBQUFYLEtBQVQ7QUFDRDtBQUNGLENBckJEO0FBdUJBeEIsR0FBRyxDQUFDQyxJQUFKLENBQVMsUUFBVCxFQUFtQixPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDckNzQixvQkFBU0MsWUFBVCxDQUFzQixPQUF0QixFQUErQjtBQUFFQyxJQUFBQSxPQUFPLEVBQUU7QUFBWCxHQUEvQixFQUFtRCxDQUFDTixHQUFELEVBQU1aLElBQU4sS0FBZTtBQUNoRSxRQUFJWSxHQUFKLEVBQVM7QUFDUGxCLE1BQUFBLEdBQUcsQ0FBQ2MsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ25CVSxRQUFBQSxLQUFLLEVBQUU7QUFBRUosVUFBQUEsT0FBTyxFQUFFSDtBQUFYO0FBRFksT0FBckI7QUFHRDs7QUFFRCxVQUFNO0FBQUVSLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsUUFBNEJJLElBQWxDO0FBQ0EsVUFBTUcsT0FBTyxHQUFHO0FBQUVDLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsS0FBaEI7O0FBQ0EsVUFBTVMsS0FBSyxHQUFHQyxzQkFBSUMsSUFBSixDQUFTSixPQUFULEVBQWtCaUIsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGNBQTlCLENBQWQ7O0FBRUE1QixJQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUU7QUFBRVYsUUFBQUE7QUFBRixPQUFSO0FBQWtCVyxNQUFBQSxJQUFJLEVBQUU7QUFBRU4sUUFBQUE7QUFBRjtBQUF4QixLQUFyQjtBQUNELEdBWkQsRUFZR1osR0FaSCxFQVlRQyxHQVpSO0FBYUQsQ0FkRDtlQWdCZUgsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvdGVzdC9Xb3Jrc3BhY2UvYmFzaWNzL3NlcnZlci9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWxzL3VzZXJcIjtcbmltcG9ydCBwYXNzcG9ydCBmcm9tIFwicGFzc3BvcnRcIjtcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cbmFwaS5wb3N0KFwiL3JlZ2lzdGVyXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IG5pY2tuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHBhc3N3b3JkX2NvbmZpcm1hdGlvbiB9ID0gcmVxLmJvZHk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgbmlja25hbWUsXG4gICAgICBlbWFpbCxcbiAgICAgIHBhc3N3b3JkLFxuICAgICAgcGFzc3dvcmRfY29uZmlybWF0aW9uXG4gICAgfSk7XG5cbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcblxuICAgIGNvbnN0IHBheWxvYWQgPSB7IHV1aWQ6IHVzZXIudXVpZCwgbmlja25hbWUsIGVtYWlsIH07XG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihwYXlsb2FkLCBcIm15c3VwZXJzZWNyZXRcIik7XG5cbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IGRhdGE6IHsgdXNlciB9LCBtZXRhOiB7IHRva2VuIH0gfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICByZXMuanNvbih7IGVycjogZXJyLm1lc3NhZ2UgfSk7XG4gIH1cbn0pO1xuXG5hcGkucG9zdChcIi9sb2dpblwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgcGFzc3BvcnQuYXV0aGVudGljYXRlKFwibG9jYWxcIiwgeyBzZXNzaW9uOiBmYWxzZSB9LCAoZXJyLCB1c2VyKSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogeyBtZXNzYWdlOiBlcnIgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyB1dWlkLCBuaWNrbmFtZSwgZW1haWwgfSA9IHVzZXI7XG4gICAgY29uc3QgcGF5bG9hZCA9IHsgdXVpZCwgbmlja25hbWUsIGVtYWlsIH07XG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihwYXlsb2FkLCBwcm9jZXNzLmVudi5KV1RfRU5DUllQVElPTik7XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHsgdXNlciB9LCBtZXRhOiB7IHRva2VuIH0gfSk7XG4gIH0pKHJlcSwgcmVzKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "api",
        "post",
        "req",
        "res",
        "nickname",
        "email",
        "password",
        "password_confirmation",
        "body",
        "user",
        "User",
        "save",
        "payload",
        "uuid",
        "token",
        "jwt",
        "sign",
        "status",
        "json",
        "data",
        "meta",
        "err",
        "console",
        "log",
        "message",
        "passport",
        "authenticate",
        "session",
        "error",
        "process",
        "env",
        "JWT_ENCRYPTION"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,IAAJ,CAAS,WAAT,EAAsB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACxC,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,KAAZ;AAAmBC,IAAAA,QAAnB;AAA6BC,IAAAA;AAA7B,MAAuDL,GAAG,CAACM,IAAjE;;AAEA,MAAI;AACF,UAAMC,IAAI,GAAG,IAAIC,aAAJ,CAAS;AACpBN,MAAAA,QADoB;AAEpBC,MAAAA,KAFoB;AAGpBC,MAAAA,QAHoB;AAIpBC,MAAAA;AAJoB,KAAT,CAAb;AAOA,UAAME,IAAI,CAACE,IAAL,EAAN;AAEA,UAAMC,OAAO,GAAG;AAAEC,MAAAA,IAAI,EAAEJ,IAAI,CAACI,IAAb;AAAmBT,MAAAA,QAAnB;AAA6BC,MAAAA;AAA7B,KAAhB;;AACA,UAAMS,KAAK,GAAGC,sBAAIC,IAAJ,CAASJ,OAAT,EAAkB,eAAlB,CAAd;;AAEAT,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,IAAI,EAAE;AAAEV,QAAAA;AAAF,OAAR;AAAkBW,MAAAA,IAAI,EAAE;AAAEN,QAAAA;AAAF;AAAxB,KAArB;AACD,GAdD,CAcE,OAAOO,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACArB,IAAAA,GAAG,CAACe,IAAJ,CAAS;AAAEG,MAAAA,GAAG,EAAEA,GAAG,CAACG;AAAX,KAAT;AACD;AACF,CArBD;AAuBAxB,GAAG,CAACC,IAAJ,CAAS,QAAT,EAAmB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACrCsB,oBAASC,YAAT,CAAsB,OAAtB,EAA+B;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAA/B,EAAmD,CAACN,GAAD,EAAMZ,IAAN,KAAe;AAChE,QAAIY,GAAJ,EAAS;AACPlB,MAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBU,QAAAA,KAAK,EAAE;AAAEJ,UAAAA,OAAO,EAAEH;AAAX;AADY,OAArB;AAGD;;AAED,UAAM;AAAER,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,QAA4BI,IAAlC;AACA,UAAMG,OAAO,GAAG;AAAEC,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,KAAhB;;AACA,UAAMS,KAAK,GAAGC,sBAAIC,IAAJ,CAASJ,OAAT,EAAkBiB,OAAO,CAACC,GAAR,CAAYC,cAA9B,CAAd;;AAEA5B,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,IAAI,EAAE;AAAEV,QAAAA;AAAF,OAAR;AAAkBW,MAAAA,IAAI,EAAE;AAAEN,QAAAA;AAAF;AAAxB,KAArB;AACD,GAZD,EAYGZ,GAZH,EAYQC,GAZR;AAaD,CAdD;eAgBeH,G",
      "sourceRoot": "/Users/test/Workspace/basics/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport jwt from \"jsonwebtoken\";\nimport User from \"../models/user\";\nimport passport from \"passport\";\n\nconst api = Router();\n\napi.post(\"/register\", async (req, res) => {\n  const { nickname, email, password, password_confirmation } = req.body;\n\n  try {\n    const user = new User({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n\n    await user.save();\n\n    const payload = { uuid: user.uuid, nickname, email };\n    const token = jwt.sign(payload, \"mysupersecret\");\n\n    res.status(201).json({ data: { user }, meta: { token } });\n  } catch (err) {\n    console.log(err.message);\n    res.json({ err: err.message });\n  }\n});\n\napi.post(\"/login\", async (req, res) => {\n  passport.authenticate(\"local\", { session: false }, (err, user) => {\n    if (err) {\n      res.status(400).json({\n        error: { message: err }\n      });\n    }\n\n    const { uuid, nickname, email } = user;\n    const payload = { uuid, nickname, email };\n    const token = jwt.sign(payload, process.env.JWT_ENCRYPTION);\n\n    res.status(200).json({ data: { user }, meta: { token } });\n  })(req, res);\n});\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544453218219
  },
  "{\"sourceRoot\":\"/Users/test/Workspace/basics/server/models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/test/Workspace/basics/server\",\"filename\":\"/Users/test/Workspace/basics/server/models/user.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/test/Workspace/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/test/Workspace/basics/server/models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/test/Workspace/basics/server",
      "filename": "/Users/test/Workspace/basics/server/models/user.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/test/Workspace/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/test/Workspace/basics/server/models/user.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/test/Workspace/basics/server/models/user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/test/Workspace/basics/server/models",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sequelize = _interopRequireWildcard(require(\"sequelize\"));\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nclass User extends _sequelize.Model {\n  static init(database) {\n    return super.init({\n      uuid: {\n        type: _sequelize.default.UUID,\n        primaryKey: true,\n        defaultValue: _sequelize.default.UUIDV4\n      },\n      nickname: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        unique: {\n          args: true,\n          msg: \"Nickname already in use\"\n        },\n        validate: {\n          isLongEnough(v) {\n            if (v.length < 5) {\n              throw new Error(\"Nickname must have at least 5 characters\");\n            }\n          }\n\n        }\n      },\n      email: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          isEmail: true\n        },\n        unique: {\n          args: true,\n          msg: \"Email already in use\"\n        }\n      },\n      password_digest: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          notEmpty: true\n        }\n      },\n      password: {\n        type: _sequelize.default.VIRTUAL,\n        validate: {\n          isLongEnough(v) {\n            if (v.length < 7) {\n              throw new Error(\"Password must have at least 7 characters\");\n            }\n          }\n\n        }\n      },\n      password_confirmation: {\n        type: _sequelize.default.VIRTUAL,\n        validate: {\n          isEqual(v) {\n            if (v !== this.password) {\n              throw new Error(\"Password confirmation doesn't match password\");\n            }\n          }\n\n        }\n      }\n    }, {\n      tableName: \"users\",\n      sequelize: database,\n      indexes: [{\n        unique: true,\n        fields: [\"uuid\", \"nickname\", \"email\"]\n      }],\n      hooks: {\n        async beforeValidate(userInstance) {\n          userInstance.password_digest = await userInstance.generateHash();\n        },\n\n        async beforeSave(userInstance) {\n          if (!userInstance.isNewRecord && userInstance.changed(\"password\")) {\n            userInstance.password_digest = await userInstance.generateHash();\n          }\n        }\n\n      }\n    });\n  }\n\n  async generateHash() {\n    const SALT_ROUND = 5;\n    const hash = await _bcrypt.default.hash(this.password, SALT_ROUND);\n\n    if (!hash) {\n      throw new Error(\"Can't hash password\");\n    }\n\n    return hash;\n  }\n\n  async checkPassword(password) {\n    return _bcrypt.default.compare(password, this.password_digest);\n  }\n\n  toJSON() {\n    const values = Object.assign({}, this.get());\n    delete values.password_digest;\n    return values;\n  }\n\n}\n\nexports.default = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiVXNlciIsIk1vZGVsIiwiaW5pdCIsImRhdGFiYXNlIiwidXVpZCIsInR5cGUiLCJTZXF1ZWxpemUiLCJVVUlEIiwicHJpbWFyeUtleSIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsIm5pY2tuYW1lIiwiU1RSSU5HIiwiYWxsb3dOdWxsIiwidW5pcXVlIiwiYXJncyIsIm1zZyIsInZhbGlkYXRlIiwiaXNMb25nRW5vdWdoIiwidiIsImxlbmd0aCIsIkVycm9yIiwiZW1haWwiLCJpc0VtYWlsIiwicGFzc3dvcmRfZGlnZXN0Iiwibm90RW1wdHkiLCJwYXNzd29yZCIsIlZJUlRVQUwiLCJwYXNzd29yZF9jb25maXJtYXRpb24iLCJpc0VxdWFsIiwidGFibGVOYW1lIiwic2VxdWVsaXplIiwiaW5kZXhlcyIsImZpZWxkcyIsImhvb2tzIiwiYmVmb3JlVmFsaWRhdGUiLCJ1c2VySW5zdGFuY2UiLCJnZW5lcmF0ZUhhc2giLCJiZWZvcmVTYXZlIiwiaXNOZXdSZWNvcmQiLCJjaGFuZ2VkIiwiU0FMVF9ST1VORCIsImhhc2giLCJiY3J5cHQiLCJjaGVja1Bhc3N3b3JkIiwiY29tcGFyZSIsInRvSlNPTiIsInZhbHVlcyIsIk9iamVjdCIsImFzc2lnbiIsImdldCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7Ozs7QUFFZSxNQUFNQSxJQUFOLFNBQW1CQyxnQkFBbkIsQ0FBeUI7QUFDdEMsU0FBT0MsSUFBUCxDQUFZQyxRQUFaLEVBQXNCO0FBQ3BCLFdBQU8sTUFBTUQsSUFBTixDQUNMO0FBQ0VFLE1BQUFBLElBQUksRUFBRTtBQUNKQyxRQUFBQSxJQUFJLEVBQUVDLG1CQUFVQyxJQURaO0FBRUpDLFFBQUFBLFVBQVUsRUFBRSxJQUZSO0FBR0pDLFFBQUFBLFlBQVksRUFBRUgsbUJBQVVJO0FBSHBCLE9BRFI7QUFNRUMsTUFBQUEsUUFBUSxFQUFFO0FBQ1JOLFFBQUFBLElBQUksRUFBRUMsbUJBQVVNLE1BRFI7QUFF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SXJCLEtBQUosQ0FBVSxxQkFBVixDQUFOO0FBQ0Q7O0FBRUQsV0FBT3FCLElBQVA7QUFDRDs7QUFFRCxRQUFNRSxhQUFOLENBQW9CbEIsUUFBcEIsRUFBOEI7QUFDNUIsV0FBT2lCLGdCQUFPRSxPQUFQLENBQWVuQixRQUFmLEVBQXlCLEtBQUtGLGVBQTlCLENBQVA7QUFDRDs7QUFFRHNCLEVBQUFBLE1BQU0sR0FBRztBQUNQLFVBQU1DLE1BQU0sR0FBR0MsTUFBTSxDQUFDQyxNQUFQLENBQWMsRUFBZCxFQUFrQixLQUFLQyxHQUFMLEVBQWxCLENBQWY7QUFFQSxXQUFPSCxNQUFNLENBQUN2QixlQUFkO0FBRUEsV0FBT3VCLE1BQVA7QUFDRDs7QUE5R3FDIiwic291cmNlUm9vdCI6Ii9Vc2Vycy90ZXN0L1dvcmtzcGFjZS9iYXNpY3Mvc2VydmVyL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTZXF1ZWxpemUsIHsgTW9kZWwgfSBmcm9tIFwic2VxdWVsaXplXCI7XG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlciBleHRlbmRzIE1vZGVsIHtcbiAgc3RhdGljIGluaXQoZGF0YWJhc2UpIHtcbiAgICByZXR1cm4gc3VwZXIuaW5pdChcbiAgICAgIHtcbiAgICAgICAgdXVpZDoge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5VVUlELFxuICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBTZXF1ZWxpemUuVVVJRFY0XG4gICAgICAgIH0sXG4gICAgICAgIG5pY2tuYW1lOiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgIHVuaXF1ZToge1xuICAgICAgICAgICAgYXJnczogdHJ1ZSxcbiAgICAgICAgICAgIG1zZzogXCJOaWNrbmFtZSBhbHJlYWR5IGluIHVzZVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgaXNMb25nRW5vdWdoKHYpIHtcbiAgICAgICAgICAgICAgaWYgKHYubGVuZ3RoIDwgNSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5pY2tuYW1lIG11c3QgaGF2ZSBhdCBsZWFzdCA1IGNoYXJhY3RlcnNcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBpc0VtYWlsOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB1bmlxdWU6IHtcbiAgICAgICAgICAgIGFyZ3M6IHRydWUsXG4gICAgICAgICAgICBtc2c6IFwiRW1haWwgYWxyZWFkeSBpbiB1c2VcIlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcGFzc3dvcmRfZGlnZXN0OiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBub3RFbXB0eTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcGFzc3dvcmQ6IHtcbiAgICAgICAgICB0eXBlOiBTZXF1ZWxpemUuVklSVFVBTCxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgaXNMb25nRW5vdWdoKHYpIHtcbiAgICAgICAgICAgICAgaWYgKHYubGVuZ3RoIDwgNykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhc3N3b3JkIG11c3QgaGF2ZSBhdCBsZWFzdCA3IGNoYXJhY3RlcnNcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvbjoge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5WSVJUVUFMLFxuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBpc0VxdWFsKHYpIHtcbiAgICAgICAgICAgICAgaWYgKHYgIT09IHRoaXMucGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXNzd29yZCBjb25maXJtYXRpb24gZG9lc24ndCBtYXRjaCBwYXNzd29yZFwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcInVzZXJzXCIsXG4gICAgICAgIHNlcXVlbGl6ZTogZGF0YWJhc2UsXG5cbiAgICAgICAgaW5kZXhlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgICAgIGZpZWxkczogW1widXVpZFwiLCBcIm5pY2tuYW1lXCIsIFwiZW1haWxcIl1cbiAgICAgICAgICB9XG4gICAgICAgIF0sXG5cbiAgICAgICAgaG9va3M6IHtcbiAgICAgICAgICBhc3luYyBiZWZvcmVWYWxpZGF0ZSh1c2VySW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHVzZXJJbnN0YW5jZS5wYXNzd29yZF9kaWdlc3QgPSBhd2FpdCB1c2VySW5zdGFuY2UuZ2VuZXJhdGVIYXNoKCk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGFzeW5jIGJlZm9yZVNhdmUodXNlckluc3RhbmNlKSB7XG4gICAgICAgICAgICBpZiAoIXVzZXJJbnN0YW5jZS5pc05ld1JlY29yZCAmJiB1c2VySW5zdGFuY2UuY2hhbmdlZChcInBhc3N3b3JkXCIpKSB7XG4gICAgICAgICAgICAgIHVzZXJJbnN0YW5jZS5wYXNzd29yZF9kaWdlc3QgPSBhd2FpdCB1c2VySW5zdGFuY2UuZ2VuZXJhdGVIYXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlSGFzaCgpIHtcbiAgICBjb25zdCBTQUxUX1JPVU5EID0gNTtcblxuICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBiY3J5cHQuaGFzaCh0aGlzLnBhc3N3b3JkLCBTQUxUX1JPVU5EKTtcbiAgICBpZiAoIWhhc2gpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGhhc2ggcGFzc3dvcmRcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhhc2g7XG4gIH1cblxuICBhc3luYyBjaGVja1Bhc3N3b3JkKHBhc3N3b3JkKSB7XG4gICAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB0aGlzLnBhc3N3b3JkX2RpZ2VzdCk7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgY29uc3QgdmFsdWVzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nZXQoKSk7XG5cbiAgICBkZWxldGUgdmFsdWVzLnBhc3N3b3JkX2RpZ2VzdDtcblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "User",
        "Model",
        "init",
        "database",
        "uuid",
        "type",
        "Sequelize",
        "UUID",
        "primaryKey",
        "defaultValue",
        "UUIDV4",
        "nickname",
        "STRING",
        "allowNull",
        "unique",
        "args",
        "msg",
        "validate",
        "isLongEnough",
        "v",
        "length",
        "Error",
        "email",
        "isEmail",
        "password_digest",
        "notEmpty",
        "password",
        "VIRTUAL",
        "password_confirmation",
        "isEqual",
        "tableName",
        "sequelize",
        "indexes",
        "fields",
        "hooks",
        "beforeValidate",
        "userInstance",
        "generateHash",
        "beforeSave",
        "isNewRecord",
        "changed",
        "SALT_ROUND",
        "hash",
        "bcrypt",
        "checkPassword",
        "compare",
        "toJSON",
        "values",
        "Object",
        "assign",
        "get"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/test/Workspace/basics/server/models",
      "sourcesContent": [
        "import Sequelize, { Model } from \"sequelize\";\nimport bcrypt from \"bcrypt\";\n\nexport default class User extends Model {\n  static init(database) {\n    return super.init(\n      {\n        uuid: {\n          type: Sequelize.UUID,\n          primaryKey: true,\n          defaultValue: Sequelize.UUIDV4\n        },\n        nickname: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          unique: {\n            args: true,\n            msg: \"Nickname already in use\"\n          },\n          validate: {\n            isLongEnough(v) {\n              if (v.length < 5) {\n                throw new Error(\"Nickname must have at least 5 characters\");\n              }\n            }\n          }\n        },\n        email: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            isEmail: true\n          },\n          unique: {\n            args: true,\n            msg: \"Email already in use\"\n          }\n        },\n        password_digest: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            notEmpty: true\n          }\n        },\n        password: {\n          type: Sequelize.VIRTUAL,\n          validate: {\n            isLongEnough(v) {\n              if (v.length < 7) {\n                throw new Error(\"Password must have at least 7 characters\");\n              }\n            }\n          }\n        },\n        password_confirmation: {\n          type: Sequelize.VIRTUAL,\n          validate: {\n            isEqual(v) {\n              if (v !== this.password) {\n                throw new Error(\"Password confirmation doesn't match password\");\n              }\n            }\n          }\n        }\n      },\n      {\n        tableName: \"users\",\n        sequelize: database,\n\n        indexes: [\n          {\n            unique: true,\n            fields: [\"uuid\", \"nickname\", \"email\"]\n          }\n        ],\n\n        hooks: {\n          async beforeValidate(userInstance) {\n            userInstance.password_digest = await userInstance.generateHash();\n          },\n\n          async beforeSave(userInstance) {\n            if (!userInstance.isNewRecord && userInstance.changed(\"password\")) {\n              userInstance.password_digest = await userInstance.generateHash();\n            }\n          }\n        }\n      }\n    );\n  }\n\n  async generateHash() {\n    const SALT_ROUND = 5;\n\n    const hash = await bcrypt.hash(this.password, SALT_ROUND);\n    if (!hash) {\n      throw new Error(\"Can't hash password\");\n    }\n\n    return hash;\n  }\n\n  async checkPassword(password) {\n    return bcrypt.compare(password, this.password_digest);\n  }\n\n  toJSON() {\n    const values = Object.assign({}, this.get());\n\n    delete values.password_digest;\n\n    return values;\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544454448638
  },
  "{\"sourceRoot\":\"/Users/test/Workspace/basics/server/routes/secured\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/test/Workspace/basics/server\",\"filename\":\"/Users/test/Workspace/basics/server/routes/secured/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/test/Workspace/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/test/Workspace/basics/server/routes/secured",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/test/Workspace/basics/server",
      "filename": "/Users/test/Workspace/basics/server/routes/secured/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/test/Workspace/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/test/Workspace/basics/server/routes/secured/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/test/Workspace/basics/server/routes/secured/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/test/Workspace/basics/server/routes/secured",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _users = _interopRequireDefault(require(\"./users\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.use(\"/users\", _users.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwaSIsInVzZSIsInVzZXJzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxHQUFHLEdBQUcsc0JBQVo7QUFFQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsUUFBUixFQUFrQkMsY0FBbEI7ZUFFZUYsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvdGVzdC9Xb3Jrc3BhY2UvYmFzaWNzL3NlcnZlci9yb3V0ZXMvc2VjdXJlZCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgdXNlcnMgZnJvbSBcIi4vdXNlcnNcIjtcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cbmFwaS51c2UoXCIvdXNlcnNcIiwgdXNlcnMpO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "api",
        "use",
        "users"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,QAAR,EAAkBC,cAAlB;eAEeF,G",
      "sourceRoot": "/Users/test/Workspace/basics/server/routes/secured",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport users from \"./users\";\n\nconst api = Router();\n\napi.use(\"/users\", users);\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544452766757
  },
  "{\"sourceRoot\":\"/Users/test/Workspace/basics/server/routes/secured\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/test/Workspace/basics/server\",\"filename\":\"/Users/test/Workspace/basics/server/routes/secured/users.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/test/Workspace/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/test/Workspace/basics/server/routes/secured",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/test/Workspace/basics/server",
      "filename": "/Users/test/Workspace/basics/server/routes/secured/users.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/test/Workspace/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/test/Workspace/basics/server/routes/secured/users.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/test/Workspace/basics/server/routes/secured/users.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/test/Workspace/basics/server/routes/secured",
        "sourceFileName": "users.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _user = _interopRequireDefault(require(\"../../models/user\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.get(\"/\", async (req, res) => {\n  const users = await _user.default.findAll();\n  res.status(200).json({\n    data: {\n      users\n    }\n  });\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsInVzZXJzIiwiVXNlciIsImZpbmRBbGwiLCJzdGF0dXMiLCJqc29uIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLHNCQUFaO0FBRUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLEdBQVIsRUFBYSxPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDL0IsUUFBTUMsS0FBSyxHQUFHLE1BQU1DLGNBQUtDLE9BQUwsRUFBcEI7QUFDQUgsRUFBQUEsR0FBRyxDQUFDSSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRUMsSUFBQUEsSUFBSSxFQUFFO0FBQUVMLE1BQUFBO0FBQUY7QUFBUixHQUFyQjtBQUNELENBSEQ7ZUFLZUosRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvdGVzdC9Xb3Jrc3BhY2UvYmFzaWNzL3NlcnZlci9yb3V0ZXMvc2VjdXJlZCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vLi4vbW9kZWxzL3VzZXJcIjtcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cbmFwaS5nZXQoXCIvXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXIuZmluZEFsbCgpO1xuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHsgdXNlcnMgfSB9KTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "users",
        "User",
        "findAll",
        "status",
        "json",
        "data"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,QAAMC,KAAK,GAAG,MAAMC,cAAKC,OAAL,EAApB;AACAH,EAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,IAAI,EAAE;AAAEL,MAAAA;AAAF;AAAR,GAArB;AACD,CAHD;eAKeJ,G",
      "sourceRoot": "/Users/test/Workspace/basics/server/routes/secured",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport User from \"../../models/user\";\n\nconst api = Router();\n\napi.get(\"/\", async (req, res) => {\n  const users = await User.findAll();\n  res.status(200).json({ data: { users } });\n});\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544452754408
  },
  "{\"sourceRoot\":\"/Users/test/Workspace/basics/server/models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/test/Workspace/basics/server\",\"filename\":\"/Users/test/Workspace/basics/server/models/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/test/Workspace/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/test/Workspace/basics/server/models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/test/Workspace/basics/server",
      "filename": "/Users/test/Workspace/basics/server/models/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/test/Workspace/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/test/Workspace/basics/server/models/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/test/Workspace/basics/server/models/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/test/Workspace/basics/server/models",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.db = void 0;\n\nvar _sequelize = _interopRequireDefault(require(\"sequelize\"));\n\nvar _user = _interopRequireDefault(require(\"./user\"));\n\nvar _project = _interopRequireDefault(require(\"./project\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// postgres://USER:PASS@HOST:PORT/DBNAME\n// createdb sanji.dev\nconst db = new _sequelize.default(process.env.DATABASE_URL);\nexports.db = db;\n\n_user.default.init(db);\n\n_project.default.init(db);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRiIiwiU2VxdWVsaXplIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsIlVzZXIiLCJpbml0IiwiUHJvamVjdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUE7QUFDQTtBQUNPLE1BQU1BLEVBQUUsR0FBRyxJQUFJQyxrQkFBSixDQUFjQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsWUFBMUIsQ0FBWDs7O0FBRVBDLGNBQUtDLElBQUwsQ0FBVU4sRUFBVjs7QUFDQU8saUJBQVFELElBQVIsQ0FBYU4sRUFBYiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvdGVzdC9Xb3Jrc3BhY2UvYmFzaWNzL3NlcnZlci9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU2VxdWVsaXplIGZyb20gXCJzZXF1ZWxpemVcIjtcbmltcG9ydCBVc2VyIGZyb20gXCIuL3VzZXJcIjtcbmltcG9ydCBQcm9qZWN0IGZyb20gXCIuL3Byb2plY3RcIjtcblxuLy8gcG9zdGdyZXM6Ly9VU0VSOlBBU1NASE9TVDpQT1JUL0RCTkFNRVxuLy8gY3JlYXRlZGIgc2FuamkuZGV2XG5leHBvcnQgY29uc3QgZGIgPSBuZXcgU2VxdWVsaXplKHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCk7XG5cblVzZXIuaW5pdChkYik7XG5Qcm9qZWN0LmluaXQoZGIpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "db",
        "Sequelize",
        "process",
        "env",
        "DATABASE_URL",
        "User",
        "init",
        "Project"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;;;AAEA;AACA;AACO,MAAMA,EAAE,GAAG,IAAIC,kBAAJ,CAAcC,OAAO,CAACC,GAAR,CAAYC,YAA1B,CAAX;;;AAEPC,cAAKC,IAAL,CAAUN,EAAV;;AACAO,iBAAQD,IAAR,CAAaN,EAAb",
      "sourceRoot": "/Users/test/Workspace/basics/server/models",
      "sourcesContent": [
        "import Sequelize from \"sequelize\";\nimport User from \"./user\";\nimport Project from \"./project\";\n\n// postgres://USER:PASS@HOST:PORT/DBNAME\n// createdb sanji.dev\nexport const db = new Sequelize(process.env.DATABASE_URL);\n\nUser.init(db);\nProject.init(db);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544453197939
  },
  "{\"sourceRoot\":\"/Users/test/Workspace/basics/server/models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/test/Workspace/basics/server\",\"filename\":\"/Users/test/Workspace/basics/server/models/project.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/test/Workspace/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/test/Workspace/basics/server/models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/test/Workspace/basics/server",
      "filename": "/Users/test/Workspace/basics/server/models/project.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/test/Workspace/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/test/Workspace/basics/server/models/project.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/test/Workspace/basics/server/models/project.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/test/Workspace/basics/server/models",
        "sourceFileName": "project.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sequelize = _interopRequireWildcard(require(\"sequelize\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nclass Project extends _sequelize.Model {\n  static init(database) {\n    return super.init({\n      id: {\n        type: _sequelize.default.INTEGER,\n        primaryKey: true,\n        autoIncrement: true\n      },\n      name: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          notEmpty: true\n        }\n      }\n    }, {\n      tableName: \"projects\",\n      sequelize: database,\n      indexes: [{\n        unique: true,\n        fields: [\"id\"]\n      }]\n    });\n  }\n\n}\n\nexports.default = Project;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3QuanMiXSwibmFtZXMiOlsiUHJvamVjdCIsIk1vZGVsIiwiaW5pdCIsImRhdGFiYXNlIiwiaWQiLCJ0eXBlIiwiU2VxdWVsaXplIiwiSU5URUdFUiIsInByaW1hcnlLZXkiLCJhdXRvSW5jcmVtZW50IiwibmFtZSIsIlNUUklORyIsImFsbG93TnVsbCIsInZhbGlkYXRlIiwibm90RW1wdHkiLCJ0YWJsZU5hbWUiLCJzZXF1ZWxpemUiLCJpbmRleGVzIiwidW5pcXVlIiwiZmllbGRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFZSxNQUFNQSxPQUFOLFNBQXNCQyxnQkFBdEIsQ0FBNEI7QUFDekMsU0FBT0MsSUFBUCxDQUFZQyxRQUFaLEVBQXNCO0FBQ3BCLFdBQU8sTUFBTUQsSUFBTixDQUNMO0FBQ0VFLE1BQUFBLEVBQUUsRUFBRTtBQUNGQyxRQUFBQSxJQUFJLEVBQUVDLG1CQUFVQyxPQURkO0FBRUZDLFFBQUFBLFVBQVUsRUFBRSxJQUZWO0FBR0ZDLFFBQUFBLGFBQWEsRUFBRTtBQUhiLE9BRE47QUFNRUMsTUFBQUEsSUFBSSxFQUFFO0FBQ0pMLFFBQUFBLElBQUksRUFBRUMsbUJBQVVLLE1BRFo7QUFFSkMsUUFBQUEsU0FBUyxFQUFFLEtBRlA7QUFHSkMsUUFBQUEsUUFBUSxFQUFFO0FBQ1JDLFVBQUFBLFFBQVEsRUFBRTtBQURGO0FBSE47QUFOUixLQURLLEVBZUw7QUFDRUMsTUFBQUEsU0FBUyxFQUFFLFVBRGI7QUFFRUMsTUFBQUEsU0FBUyxFQUFFYixRQUZiO0FBSUVjLE1BQUFBLE9BQU8sRUFBRSxDQUNQO0FBQ0VDLFFBQUFBLE1BQU0sRUFBRSxJQURWO0FBRUVDLFFBQUFBLE1BQU0sRUFBRSxDQUFDLElBQUQ7QUFGVixPQURPO0FBSlgsS0FmSyxDQUFQO0FBMkJEOztBQTdCd0MiLCJzb3VyY2VSb290IjoiL1VzZXJzL3Rlc3QvV29ya3NwYWNlL2Jhc2ljcy9zZXJ2ZXIvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSwgeyBNb2RlbCB9IGZyb20gXCJzZXF1ZWxpemVcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdCBleHRlbmRzIE1vZGVsIHtcbiAgc3RhdGljIGluaXQoZGF0YWJhc2UpIHtcbiAgICByZXR1cm4gc3VwZXIuaW5pdChcbiAgICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICB0eXBlOiBTZXF1ZWxpemUuSU5URUdFUixcbiAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZToge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsXG4gICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbm90RW1wdHk6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogXCJwcm9qZWN0c1wiLFxuICAgICAgICBzZXF1ZWxpemU6IGRhdGFiYXNlLFxuXG4gICAgICAgIGluZGV4ZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgICAgICBmaWVsZHM6IFtcImlkXCJdXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgKTtcbiAgfVxufVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "project.js"
      ],
      "names": [
        "Project",
        "Model",
        "init",
        "database",
        "id",
        "type",
        "Sequelize",
        "INTEGER",
        "primaryKey",
        "autoIncrement",
        "name",
        "STRING",
        "allowNull",
        "validate",
        "notEmpty",
        "tableName",
        "sequelize",
        "indexes",
        "unique",
        "fields"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEe,MAAMA,OAAN,SAAsBC,gBAAtB,CAA4B;AACzC,SAAOC,IAAP,CAAYC,QAAZ,EAAsB;AACpB,WAAO,MAAMD,IAAN,CACL;AACEE,MAAAA,EAAE,EAAE;AACFC,QAAAA,IAAI,EAAEC,mBAAUC,OADd;AAEFC,QAAAA,UAAU,EAAE,IAFV;AAGFC,QAAAA,aAAa,EAAE;AAHb,OADN;AAMEC,MAAAA,IAAI,EAAE;AACJL,QAAAA,IAAI,EAAEC,mBAAUK,MADZ;AAEJC,QAAAA,SAAS,EAAE,KAFP;AAGJC,QAAAA,QAAQ,EAAE;AACRC,UAAAA,QAAQ,EAAE;AADF;AAHN;AANR,KADK,EAeL;AACEC,MAAAA,SAAS,EAAE,UADb;AAEEC,MAAAA,SAAS,EAAEb,QAFb;AAIEc,MAAAA,OAAO,EAAE,CACP;AACEC,QAAAA,MAAM,EAAE,IADV;AAEEC,QAAAA,MAAM,EAAE,CAAC,IAAD;AAFV,OADO;AAJX,KAfK,CAAP;AA2BD;;AA7BwC",
      "sourceRoot": "/Users/test/Workspace/basics/server/models",
      "sourcesContent": [
        "import Sequelize, { Model } from \"sequelize\";\n\nexport default class Project extends Model {\n  static init(database) {\n    return super.init(\n      {\n        id: {\n          type: Sequelize.INTEGER,\n          primaryKey: true,\n          autoIncrement: true\n        },\n        name: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            notEmpty: true\n          }\n        }\n      },\n      {\n        tableName: \"projects\",\n        sequelize: database,\n\n        indexes: [\n          {\n            unique: true,\n            fields: [\"id\"]\n          }\n        ]\n      }\n    );\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544433553115
  },
  "{\"sourceRoot\":\"/Users/test/Workspace/basics/server/middlewares\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/test/Workspace/basics/server\",\"filename\":\"/Users/test/Workspace/basics/server/middlewares/passport.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/test/Workspace/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/test/Workspace/basics/server/middlewares",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/test/Workspace/basics/server",
      "filename": "/Users/test/Workspace/basics/server/middlewares/passport.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/test/Workspace/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/test/Workspace/basics/server/middlewares/passport.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/test/Workspace/basics/server/middlewares/passport.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/test/Workspace/basics/server/middlewares",
        "sourceFileName": "passport.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _passportLocal = require(\"passport-local\");\n\nvar _passportJwt = require(\"passport-jwt\");\n\nvar _user = _interopRequireDefault(require(\"../models/user\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_passport.default.use(new _passportLocal.Strategy({\n  usernameField: \"nickname\",\n  passwordField: \"password\"\n}, async (nickname, password, next) => {\n  const user = await _user.default.findOne({\n    where: {\n      nickname\n    }\n  });\n\n  if (!user) {\n    return next(\"Nickname doesn't exist\");\n  }\n\n  if (!(await user.checkPassword(password))) {\n    return next(\"Password doesn't match\");\n  }\n\n  return next(false, user);\n}));\n\n_passport.default.use(new _passportJwt.Strategy({\n  jwtFromRequest: _passportJwt.ExtractJwt.fromAuthHeaderAsBearerToken(),\n  secretOrKey: process.env.JWT_ENCRYPTION\n}, async (jwtPayload, next) => {\n  try {\n    const user = await _user.default.findOne({\n      where: {\n        uuid: jwtPayload.uuid\n      }\n    });\n\n    if (!user) {\n      return next(\"User doesn't exist\");\n    }\n\n    return next(false, user);\n  } catch (err) {\n    return next(err.message);\n  }\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3Nwb3J0LmpzIl0sIm5hbWVzIjpbInBhc3Nwb3J0IiwidXNlIiwiTG9jYWxTdHJhdGVneSIsInVzZXJuYW1lRmllbGQiLCJwYXNzd29yZEZpZWxkIiwibmlja25hbWUiLCJwYXNzd29yZCIsIm5leHQiLCJ1c2VyIiwiVXNlciIsImZpbmRPbmUiLCJ3aGVyZSIsImNoZWNrUGFzc3dvcmQiLCJKd3RTdHJhdGVneSIsImp3dEZyb21SZXF1ZXN0IiwiRXh0cmFjdEp3dCIsImZyb21BdXRoSGVhZGVyQXNCZWFyZXJUb2tlbiIsInNlY3JldE9yS2V5IiwicHJvY2VzcyIsImVudiIsIkpXVF9FTkNSWVBUSU9OIiwiand0UGF5bG9hZCIsInV1aWQiLCJlcnIiLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUFBLGtCQUFTQyxHQUFULENBQ0UsSUFBSUMsdUJBQUosQ0FDRTtBQUNFQyxFQUFBQSxhQUFhLEVBQUUsVUFEakI7QUFFRUMsRUFBQUEsYUFBYSxFQUFFO0FBRmpCLENBREYsRUFLRSxPQUFPQyxRQUFQLEVBQWlCQyxRQUFqQixFQUEyQkMsSUFBM0IsS0FBb0M7QUFDbEMsUUFBTUMsSUFBSSxHQUFHLE1BQU1DLGNBQUtDLE9BQUwsQ0FBYTtBQUFFQyxJQUFBQSxLQUFLLEVBQUU7QUFBRU4sTUFBQUE7QUFBRjtBQUFULEdBQWIsQ0FBbkI7O0FBRUEsTUFBSSxDQUFDRyxJQUFMLEVBQVc7QUFDVCxXQUFPRCxJQUFJLENBQUMsd0JBQUQsQ0FBWDtBQUNEOztBQUVELE1BQUksRUFBRSxNQUFNQyxJQUFJLENBQUNJLGFBQUwsQ0FBbUJOLFFBQW5CLENBQVIsQ0FBSixFQUEyQztBQUN6QyxXQUFPQyxJQUFJLENBQUMsd0JBQUQsQ0FBWDtBQUNEOztBQUVELFNBQU9BLElBQUksQ0FBQyxLQUFELEVBQVFDLElBQVIsQ0FBWDtBQUNELENBakJILENBREY7O0FBc0JBUixrQkFBU0MsR0FBVCxDQUNFLElBQUlZLHFCQUFKLENBQ0U7QUFDRUMsRUFBQUEsY0FBYyxFQUFFQyx3QkFBV0MsMkJBQVgsRUFEbEI7QUFFRUMsRUFBQUEsV0FBVyxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUM7QUFGM0IsQ0FERixFQUtFLE9BQU9DLFVBQVAsRUFBbUJkLElBQW5CLEtBQTRCO0FBQzFCLE1BQUk7QUFDRixVQUFNQyxJQUFJLEdBQUcsTUFBTUMsY0FBS0MsT0FBTCxDQUFhO0FBQUVDLE1BQUFBLEtBQUssRUFBRTtBQUFFVyxRQUFBQSxJQUFJLEVBQUVELFVBQVUsQ0FBQ0M7QUFBbkI7QUFBVCxLQUFiLENBQW5COztBQUNBLFFBQUksQ0FBQ2QsSUFBTCxFQUFXO0FBQ1QsYUFBT0QsSUFBSSxDQUFDLG9CQUFELENBQVg7QUFDRDs7QUFDRCxXQUFPQSxJQUFJLENBQUMsS0FBRCxFQUFRQyxJQUFSLENBQVg7QUFDRCxHQU5ELENBTUUsT0FBT2UsR0FBUCxFQUFZO0FBQ1osV0FBT2hCLElBQUksQ0FBQ2dCLEdBQUcsQ0FBQ0MsT0FBTCxDQUFYO0FBQ0Q7QUFDRixDQWZILENBREYiLCJzb3VyY2VSb290IjoiL1VzZXJzL3Rlc3QvV29ya3NwYWNlL2Jhc2ljcy9zZXJ2ZXIvbWlkZGxld2FyZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGFzc3BvcnQgZnJvbSBcInBhc3Nwb3J0XCI7XG5pbXBvcnQgeyBTdHJhdGVneSBhcyBMb2NhbFN0cmF0ZWd5IH0gZnJvbSBcInBhc3Nwb3J0LWxvY2FsXCI7XG5pbXBvcnQgeyBTdHJhdGVneSBhcyBKd3RTdHJhdGVneSwgRXh0cmFjdEp3dCB9IGZyb20gXCJwYXNzcG9ydC1qd3RcIjtcbmltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbHMvdXNlclwiO1xuXG5wYXNzcG9ydC51c2UoXG4gIG5ldyBMb2NhbFN0cmF0ZWd5KFxuICAgIHtcbiAgICAgIHVzZXJuYW1lRmllbGQ6IFwibmlja25hbWVcIixcbiAgICAgIHBhc3N3b3JkRmllbGQ6IFwicGFzc3dvcmRcIlxuICAgIH0sXG4gICAgYXN5bmMgKG5pY2tuYW1lLCBwYXNzd29yZCwgbmV4dCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHdoZXJlOiB7IG5pY2tuYW1lIH0gfSk7XG5cbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gbmV4dChcIk5pY2tuYW1lIGRvZXNuJ3QgZXhpc3RcIik7XG4gICAgICB9XG5cbiAgICAgIGlmICghKGF3YWl0IHVzZXIuY2hlY2tQYXNzd29yZChwYXNzd29yZCkpKSB7XG4gICAgICAgIHJldHVybiBuZXh0KFwiUGFzc3dvcmQgZG9lc24ndCBtYXRjaFwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5leHQoZmFsc2UsIHVzZXIpO1xuICAgIH1cbiAgKVxuKTtcblxucGFzc3BvcnQudXNlKFxuICBuZXcgSnd0U3RyYXRlZ3koXG4gICAge1xuICAgICAgand0RnJvbVJlcXVlc3Q6IEV4dHJhY3RKd3QuZnJvbUF1dGhIZWFkZXJBc0JlYXJlclRva2VuKCksXG4gICAgICBzZWNyZXRPcktleTogcHJvY2Vzcy5lbnYuSldUX0VOQ1JZUFRJT05cbiAgICB9LFxuICAgIGFzeW5jIChqd3RQYXlsb2FkLCBuZXh0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgd2hlcmU6IHsgdXVpZDogand0UGF5bG9hZC51dWlkIH0gfSk7XG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgIHJldHVybiBuZXh0KFwiVXNlciBkb2Vzbid0IGV4aXN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0KGZhbHNlLCB1c2VyKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gbmV4dChlcnIubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuICApXG4pO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "passport.js"
      ],
      "names": [
        "passport",
        "use",
        "LocalStrategy",
        "usernameField",
        "passwordField",
        "nickname",
        "password",
        "next",
        "user",
        "User",
        "findOne",
        "where",
        "checkPassword",
        "JwtStrategy",
        "jwtFromRequest",
        "ExtractJwt",
        "fromAuthHeaderAsBearerToken",
        "secretOrKey",
        "process",
        "env",
        "JWT_ENCRYPTION",
        "jwtPayload",
        "uuid",
        "err",
        "message"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;;;AAEAA,kBAASC,GAAT,CACE,IAAIC,uBAAJ,CACE;AACEC,EAAAA,aAAa,EAAE,UADjB;AAEEC,EAAAA,aAAa,EAAE;AAFjB,CADF,EAKE,OAAOC,QAAP,EAAiBC,QAAjB,EAA2BC,IAA3B,KAAoC;AAClC,QAAMC,IAAI,GAAG,MAAMC,cAAKC,OAAL,CAAa;AAAEC,IAAAA,KAAK,EAAE;AAAEN,MAAAA;AAAF;AAAT,GAAb,CAAnB;;AAEA,MAAI,CAACG,IAAL,EAAW;AACT,WAAOD,IAAI,CAAC,wBAAD,CAAX;AACD;;AAED,MAAI,EAAE,MAAMC,IAAI,CAACI,aAAL,CAAmBN,QAAnB,CAAR,CAAJ,EAA2C;AACzC,WAAOC,IAAI,CAAC,wBAAD,CAAX;AACD;;AAED,SAAOA,IAAI,CAAC,KAAD,EAAQC,IAAR,CAAX;AACD,CAjBH,CADF;;AAsBAR,kBAASC,GAAT,CACE,IAAIY,qBAAJ,CACE;AACEC,EAAAA,cAAc,EAAEC,wBAAWC,2BAAX,EADlB;AAEEC,EAAAA,WAAW,EAAEC,OAAO,CAACC,GAAR,CAAYC;AAF3B,CADF,EAKE,OAAOC,UAAP,EAAmBd,IAAnB,KAA4B;AAC1B,MAAI;AACF,UAAMC,IAAI,GAAG,MAAMC,cAAKC,OAAL,CAAa;AAAEC,MAAAA,KAAK,EAAE;AAAEW,QAAAA,IAAI,EAAED,UAAU,CAACC;AAAnB;AAAT,KAAb,CAAnB;;AACA,QAAI,CAACd,IAAL,EAAW;AACT,aAAOD,IAAI,CAAC,oBAAD,CAAX;AACD;;AACD,WAAOA,IAAI,CAAC,KAAD,EAAQC,IAAR,CAAX;AACD,GAND,CAME,OAAOe,GAAP,EAAY;AACZ,WAAOhB,IAAI,CAACgB,GAAG,CAACC,OAAL,CAAX;AACD;AACF,CAfH,CADF",
      "sourceRoot": "/Users/test/Workspace/basics/server/middlewares",
      "sourcesContent": [
        "import passport from \"passport\";\nimport { Strategy as LocalStrategy } from \"passport-local\";\nimport { Strategy as JwtStrategy, ExtractJwt } from \"passport-jwt\";\nimport User from \"../models/user\";\n\npassport.use(\n  new LocalStrategy(\n    {\n      usernameField: \"nickname\",\n      passwordField: \"password\"\n    },\n    async (nickname, password, next) => {\n      const user = await User.findOne({ where: { nickname } });\n\n      if (!user) {\n        return next(\"Nickname doesn't exist\");\n      }\n\n      if (!(await user.checkPassword(password))) {\n        return next(\"Password doesn't match\");\n      }\n\n      return next(false, user);\n    }\n  )\n);\n\npassport.use(\n  new JwtStrategy(\n    {\n      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n      secretOrKey: process.env.JWT_ENCRYPTION\n    },\n    async (jwtPayload, next) => {\n      try {\n        const user = await User.findOne({ where: { uuid: jwtPayload.uuid } });\n        if (!user) {\n          return next(\"User doesn't exist\");\n        }\n        return next(false, user);\n      } catch (err) {\n        return next(err.message);\n      }\n    }\n  )\n);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544453210160
  },
  "{\"sourceRoot\":\"/Users/test/Workspace/basics/server/routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/test/Workspace/basics/server\",\"filename\":\"/Users/test/Workspace/basics/server/routes/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/test/Workspace/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/test/Workspace/basics/server/routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/test/Workspace/basics/server",
      "filename": "/Users/test/Workspace/basics/server/routes/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/test/Workspace/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/test/Workspace/basics/server/routes/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/test/Workspace/basics/server/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/test/Workspace/basics/server/routes",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _auth = _interopRequireDefault(require(\"./auth\"));\n\nvar _secured = _interopRequireDefault(require(\"./secured\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.get(\"/\", (req, res) => {\n  res.json({\n    name: \"sanji.Api\",\n    meta: {\n      version: \"1.0.0\",\n      status: \"running\"\n    }\n  });\n});\napi.use(\"/auth\", _auth.default);\napi.use(\"/\", _passport.default.authenticate(\"jwt\", {\n  session: false\n}), _secured.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsImpzb24iLCJuYW1lIiwibWV0YSIsInZlcnNpb24iLCJzdGF0dXMiLCJ1c2UiLCJhdXRoIiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzZXNzaW9uIiwic2VjdXJlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLHNCQUFaO0FBRUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUN6QkEsRUFBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVM7QUFDUEMsSUFBQUEsSUFBSSxFQUFFLFdBREM7QUFFUEMsSUFBQUEsSUFBSSxFQUFFO0FBQ0pDLE1BQUFBLE9BQU8sRUFBRSxPQURMO0FBRUpDLE1BQUFBLE1BQU0sRUFBRTtBQUZKO0FBRkMsR0FBVDtBQU9ELENBUkQ7QUFVQVIsR0FBRyxDQUFDUyxHQUFKLENBQVEsT0FBUixFQUFpQkMsYUFBakI7QUFDQVYsR0FBRyxDQUFDUyxHQUFKLENBQVEsR0FBUixFQUFhRSxrQkFBU0MsWUFBVCxDQUFzQixLQUF0QixFQUE2QjtBQUFFQyxFQUFBQSxPQUFPLEVBQUU7QUFBWCxDQUE3QixDQUFiLEVBQStEQyxnQkFBL0Q7ZUFFZWQsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvdGVzdC9Xb3Jrc3BhY2UvYmFzaWNzL3NlcnZlci9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xuaW1wb3J0IGF1dGggZnJvbSBcIi4vYXV0aFwiO1xuaW1wb3J0IHNlY3VyZWQgZnJvbSBcIi4vc2VjdXJlZFwiO1xuXG5jb25zdCBhcGkgPSBSb3V0ZXIoKTtcblxuYXBpLmdldChcIi9cIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICBuYW1lOiBcInNhbmppLkFwaVwiLFxuICAgIG1ldGE6IHtcbiAgICAgIHZlcnNpb246IFwiMS4wLjBcIixcbiAgICAgIHN0YXR1czogXCJydW5uaW5nXCJcbiAgICB9XG4gIH0pO1xufSk7XG5cbmFwaS51c2UoXCIvYXV0aFwiLCBhdXRoKTtcbmFwaS51c2UoXCIvXCIsIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZShcImp3dFwiLCB7IHNlc3Npb246IGZhbHNlIH0pLCBzZWN1cmVkKTtcblxuZXhwb3J0IGRlZmF1bHQgYXBpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "json",
        "name",
        "meta",
        "version",
        "status",
        "use",
        "auth",
        "passport",
        "authenticate",
        "session",
        "secured"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,EAAAA,GAAG,CAACC,IAAJ,CAAS;AACPC,IAAAA,IAAI,EAAE,WADC;AAEPC,IAAAA,IAAI,EAAE;AACJC,MAAAA,OAAO,EAAE,OADL;AAEJC,MAAAA,MAAM,EAAE;AAFJ;AAFC,GAAT;AAOD,CARD;AAUAR,GAAG,CAACS,GAAJ,CAAQ,OAAR,EAAiBC,aAAjB;AACAV,GAAG,CAACS,GAAJ,CAAQ,GAAR,EAAaE,kBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAA7B,CAAb,EAA+DC,gBAA/D;eAEed,G",
      "sourceRoot": "/Users/test/Workspace/basics/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport passport from \"passport\";\nimport auth from \"./auth\";\nimport secured from \"./secured\";\n\nconst api = Router();\n\napi.get(\"/\", (req, res) => {\n  res.json({\n    name: \"sanji.Api\",\n    meta: {\n      version: \"1.0.0\",\n      status: \"running\"\n    }\n  });\n});\n\napi.use(\"/auth\", auth);\napi.use(\"/\", passport.authenticate(\"jwt\", { session: false }), secured);\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544452727848
  },
  "{\"sourceRoot\":\"/Users/test/Workspace/basics/server/routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/test/Workspace/basics/server\",\"filename\":\"/Users/test/Workspace/basics/server/routes/auth.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/test/Workspace/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/test/Workspace/basics/server/routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/test/Workspace/basics/server",
      "filename": "/Users/test/Workspace/basics/server/routes/auth.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/test/Workspace/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/test/Workspace/basics/server/routes/auth.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/test/Workspace/basics/server/routes/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/test/Workspace/basics/server/routes",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _user = _interopRequireDefault(require(\"../models/user\"));\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.post(\"/register\", async (req, res) => {\n  const {\n    nickname,\n    email,\n    password,\n    password_confirmation\n  } = req.body;\n\n  try {\n    const user = new _user.default({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n    await user.save();\n    const payload = {\n      uuid: user.uuid,\n      nickname,\n      email\n    };\n\n    const token = _jsonwebtoken.default.sign(payload, \"mysupersecret\");\n\n    res.status(201).json({\n      data: {\n        user\n      },\n      meta: {\n        token\n      }\n    });\n  } catch (err) {\n    console.log(err.message);\n    res.json({\n      err: err.message\n    });\n  }\n});\napi.post(\"/login\", async (req, res) => {\n  _passport.default.authenticate(\"local\", {\n    session: false\n  }, (err, user) => {\n    if (err) {\n      res.status(400).json({\n        error: {\n          message: err\n        }\n      });\n    }\n\n    const {\n      uuid,\n      nickname,\n      email\n    } = user;\n    const payload = {\n      uuid,\n      nickname,\n      email\n    };\n\n    const token = _jsonwebtoken.default.sign(payload, process.env.JWT_ENCRYPTION);\n\n    res.status(200).json({\n      data: {\n        user\n      },\n      meta: {\n        token\n      }\n    });\n  })(req, res);\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiYXBpIiwicG9zdCIsInJlcSIsInJlcyIsIm5pY2tuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInBhc3N3b3JkX2NvbmZpcm1hdGlvbiIsImJvZHkiLCJ1c2VyIiwiVXNlciIsInNhdmUiLCJwYXlsb2FkIiwidXVpZCIsInRva2VuIiwiand0Iiwic2lnbiIsInN0YXR1cyIsImpzb24iLCJkYXRhIiwibWV0YSIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzZXNzaW9uIiwiZXJyb3IiLCJwcm9jZXNzIiwiZW52IiwiSldUX0VOQ1JZUFRJT04iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLEdBQUcsR0FBRyxzQkFBWjtBQUVBQSxHQUFHLENBQUNDLElBQUosQ0FBUyxXQUFULEVBQXNCLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUN4QyxRQUFNO0FBQUVDLElBQUFBLFFBQUY7QUFBWUMsSUFBQUEsS0FBWjtBQUFtQkMsSUFBQUEsUUFBbkI7QUFBNkJDLElBQUFBO0FBQTdCLE1BQXVETCxHQUFHLENBQUNNLElBQWpFOztBQUVBLE1BQUk7QUFDRixVQUFNQyxJQUFJLEdBQUcsSUFBSUMsYUFBSixDQUFTO0FBQ3BCTixNQUFBQSxRQURvQjtBQUVwQkMsTUFBQUEsS0FGb0I7QUFHcEJDLE1BQUFBLFFBSG9CO0FBSXBCQyxNQUFBQTtBQUpvQixLQUFULENBQWI7QUFPQSxVQUFNRSxJQUFJLENBQUNFLElBQUwsRUFBTjtBQUVBLFVBQU1DLE9BQU8sR0FBRztBQUFFQyxNQUFBQSxJQUFJLEVBQUVKLElBQUksQ0FBQ0ksSUFBYjtBQUFtQlQsTUFBQUEsUUFBbkI7QUFBNkJDLE1BQUFBO0FBQTdCLEtBQWhCOztBQUNBLFVBQU1TLEtBQUssR0FBR0Msc0JBQUlDLElBQUosQ0FBU0osT0FBVCxFQUFrQixlQUFsQixDQUFkOztBQUVBVCxJQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUU7QUFBRVYsUUFBQUE7QUFBRixPQUFSO0FBQWtCVyxNQUFBQSxJQUFJLEVBQUU7QUFBRU4sUUFBQUE7QUFBRjtBQUF4QixLQUFyQjtBQUNELEdBZEQsQ0FjRSxPQUFPTyxHQUFQLEVBQVk7QUFDWkMsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlGLEdBQUcsQ0FBQ0csT0FBaEI7QUFDQXJCLElBQUFBLEdBQUcsQ0FBQ2UsSUFBSixDQUFTO0FBQUVHLE1BQUFBLEdBQUcsRUFBRUEsR0FBRyxDQUFDRztBQUFYLEtBQVQ7QUFDRDtBQUNGLENBckJEO0FBdUJBeEIsR0FBRyxDQUFDQyxJQUFKLENBQVMsUUFBVCxFQUFtQixPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDckNzQixvQkFBU0MsWUFBVCxDQUFzQixPQUF0QixFQUErQjtBQUFFQyxJQUFBQSxPQUFPLEVBQUU7QUFBWCxHQUEvQixFQUFtRCxDQUFDTixHQUFELEVBQU1aLElBQU4sS0FBZTtBQUNoRSxRQUFJWSxHQUFKLEVBQVM7QUFDUGxCLE1BQUFBLEdBQUcsQ0FBQ2MsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ25CVSxRQUFBQSxLQUFLLEVBQUU7QUFBRUosVUFBQUEsT0FBTyxFQUFFSDtBQUFYO0FBRFksT0FBckI7QUFHRDs7QUFFRCxVQUFNO0FBQUVSLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsUUFBNEJJLElBQWxDO0FBQ0EsVUFBTUcsT0FBTyxHQUFHO0FBQUVDLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsS0FBaEI7O0FBQ0EsVUFBTVMsS0FBSyxHQUFHQyxzQkFBSUMsSUFBSixDQUFTSixPQUFULEVBQWtCaUIsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGNBQTlCLENBQWQ7O0FBRUE1QixJQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUU7QUFBRVYsUUFBQUE7QUFBRixPQUFSO0FBQWtCVyxNQUFBQSxJQUFJLEVBQUU7QUFBRU4sUUFBQUE7QUFBRjtBQUF4QixLQUFyQjtBQUNELEdBWkQsRUFZR1osR0FaSCxFQVlRQyxHQVpSO0FBYUQsQ0FkRDtlQWdCZUgsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvdGVzdC9Xb3Jrc3BhY2UvYmFzaWNzL3NlcnZlci9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWxzL3VzZXJcIjtcbmltcG9ydCBwYXNzcG9ydCBmcm9tIFwicGFzc3BvcnRcIjtcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cbmFwaS5wb3N0KFwiL3JlZ2lzdGVyXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IG5pY2tuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHBhc3N3b3JkX2NvbmZpcm1hdGlvbiB9ID0gcmVxLmJvZHk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgbmlja25hbWUsXG4gICAgICBlbWFpbCxcbiAgICAgIHBhc3N3b3JkLFxuICAgICAgcGFzc3dvcmRfY29uZmlybWF0aW9uXG4gICAgfSk7XG5cbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcblxuICAgIGNvbnN0IHBheWxvYWQgPSB7IHV1aWQ6IHVzZXIudXVpZCwgbmlja25hbWUsIGVtYWlsIH07XG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihwYXlsb2FkLCBcIm15c3VwZXJzZWNyZXRcIik7XG5cbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IGRhdGE6IHsgdXNlciB9LCBtZXRhOiB7IHRva2VuIH0gfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICByZXMuanNvbih7IGVycjogZXJyLm1lc3NhZ2UgfSk7XG4gIH1cbn0pO1xuXG5hcGkucG9zdChcIi9sb2dpblwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgcGFzc3BvcnQuYXV0aGVudGljYXRlKFwibG9jYWxcIiwgeyBzZXNzaW9uOiBmYWxzZSB9LCAoZXJyLCB1c2VyKSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogeyBtZXNzYWdlOiBlcnIgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyB1dWlkLCBuaWNrbmFtZSwgZW1haWwgfSA9IHVzZXI7XG4gICAgY29uc3QgcGF5bG9hZCA9IHsgdXVpZCwgbmlja25hbWUsIGVtYWlsIH07XG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihwYXlsb2FkLCBwcm9jZXNzLmVudi5KV1RfRU5DUllQVElPTik7XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHsgdXNlciB9LCBtZXRhOiB7IHRva2VuIH0gfSk7XG4gIH0pKHJlcSwgcmVzKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "api",
        "post",
        "req",
        "res",
        "nickname",
        "email",
        "password",
        "password_confirmation",
        "body",
        "user",
        "User",
        "save",
        "payload",
        "uuid",
        "token",
        "jwt",
        "sign",
        "status",
        "json",
        "data",
        "meta",
        "err",
        "console",
        "log",
        "message",
        "passport",
        "authenticate",
        "session",
        "error",
        "process",
        "env",
        "JWT_ENCRYPTION"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,IAAJ,CAAS,WAAT,EAAsB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACxC,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,KAAZ;AAAmBC,IAAAA,QAAnB;AAA6BC,IAAAA;AAA7B,MAAuDL,GAAG,CAACM,IAAjE;;AAEA,MAAI;AACF,UAAMC,IAAI,GAAG,IAAIC,aAAJ,CAAS;AACpBN,MAAAA,QADoB;AAEpBC,MAAAA,KAFoB;AAGpBC,MAAAA,QAHoB;AAIpBC,MAAAA;AAJoB,KAAT,CAAb;AAOA,UAAME,IAAI,CAACE,IAAL,EAAN;AAEA,UAAMC,OAAO,GAAG;AAAEC,MAAAA,IAAI,EAAEJ,IAAI,CAACI,IAAb;AAAmBT,MAAAA,QAAnB;AAA6BC,MAAAA;AAA7B,KAAhB;;AACA,UAAMS,KAAK,GAAGC,sBAAIC,IAAJ,CAASJ,OAAT,EAAkB,eAAlB,CAAd;;AAEAT,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,IAAI,EAAE;AAAEV,QAAAA;AAAF,OAAR;AAAkBW,MAAAA,IAAI,EAAE;AAAEN,QAAAA;AAAF;AAAxB,KAArB;AACD,GAdD,CAcE,OAAOO,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACArB,IAAAA,GAAG,CAACe,IAAJ,CAAS;AAAEG,MAAAA,GAAG,EAAEA,GAAG,CAACG;AAAX,KAAT;AACD;AACF,CArBD;AAuBAxB,GAAG,CAACC,IAAJ,CAAS,QAAT,EAAmB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACrCsB,oBAASC,YAAT,CAAsB,OAAtB,EAA+B;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAA/B,EAAmD,CAACN,GAAD,EAAMZ,IAAN,KAAe;AAChE,QAAIY,GAAJ,EAAS;AACPlB,MAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBU,QAAAA,KAAK,EAAE;AAAEJ,UAAAA,OAAO,EAAEH;AAAX;AADY,OAArB;AAGD;;AAED,UAAM;AAAER,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,QAA4BI,IAAlC;AACA,UAAMG,OAAO,GAAG;AAAEC,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,KAAhB;;AACA,UAAMS,KAAK,GAAGC,sBAAIC,IAAJ,CAASJ,OAAT,EAAkBiB,OAAO,CAACC,GAAR,CAAYC,cAA9B,CAAd;;AAEA5B,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,IAAI,EAAE;AAAEV,QAAAA;AAAF,OAAR;AAAkBW,MAAAA,IAAI,EAAE;AAAEN,QAAAA;AAAF;AAAxB,KAArB;AACD,GAZD,EAYGZ,GAZH,EAYQC,GAZR;AAaD,CAdD;eAgBeH,G",
      "sourceRoot": "/Users/test/Workspace/basics/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport jwt from \"jsonwebtoken\";\nimport User from \"../models/user\";\nimport passport from \"passport\";\n\nconst api = Router();\n\napi.post(\"/register\", async (req, res) => {\n  const { nickname, email, password, password_confirmation } = req.body;\n\n  try {\n    const user = new User({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n\n    await user.save();\n\n    const payload = { uuid: user.uuid, nickname, email };\n    const token = jwt.sign(payload, \"mysupersecret\");\n\n    res.status(201).json({ data: { user }, meta: { token } });\n  } catch (err) {\n    console.log(err.message);\n    res.json({ err: err.message });\n  }\n});\n\napi.post(\"/login\", async (req, res) => {\n  passport.authenticate(\"local\", { session: false }, (err, user) => {\n    if (err) {\n      res.status(400).json({\n        error: { message: err }\n      });\n    }\n\n    const { uuid, nickname, email } = user;\n    const payload = { uuid, nickname, email };\n    const token = jwt.sign(payload, process.env.JWT_ENCRYPTION);\n\n    res.status(200).json({ data: { user }, meta: { token } });\n  })(req, res);\n});\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544453218219
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/server.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/server.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/server.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/server.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server",
        "sourceFileName": "server.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _routes = _interopRequireDefault(require(\"./routes\"));\n\nvar _models = require(\"./models\");\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nrequire(\"./middlewares/passport\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst start = async () => {\n  try {\n    const host = process.env.HOST;\n    const port = parseInt(process.argv[2] || process.env.PORT);\n    const app = (0, _express.default)();\n    await _models.db.authenticate();\n\n    if (process.env.NODE_ENV) {\n      await _models.db.sync({\n        force: false\n      });\n    }\n\n    app.use((0, _cors.default)());\n    app.use(_passport.default.initialize());\n    app.use(_bodyParser.default.urlencoded({\n      extended: true\n    }));\n    app.use(_bodyParser.default.json());\n    app.get(\"/\", (request, response) => {\n      response.send(\"Please feel free to use our api with /api\");\n    });\n    app.use(\"/api\", _routes.default);\n    app.listen(port, () => {\n      console.log(`Server is running in ${host} at ${port}`);\n    });\n  } catch (ex) {\n    console.log(ex.message);\n  }\n}; // Let's Rock! :)\n\n\nstart();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJzdGFydCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiSE9TVCIsInBvcnQiLCJwYXJzZUludCIsImFyZ3YiLCJQT1JUIiwiYXBwIiwiZGF0YWJhc2UiLCJhdXRoZW50aWNhdGUiLCJOT0RFX0VOViIsInN5bmMiLCJmb3JjZSIsInVzZSIsInBhc3Nwb3J0IiwiaW5pdGlhbGl6ZSIsImJvZHlQYXJzZXIiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJqc29uIiwiZ2V0IiwicmVxdWVzdCIsInJlc3BvbnNlIiwic2VuZCIsImFwaSIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciLCJleCIsIm1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7Ozs7QUFFQSxNQUFNQSxLQUFLLEdBQUcsWUFBWTtBQUN4QixNQUFJO0FBQ0YsVUFBTUMsSUFBSSxHQUFHQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsSUFBekI7QUFDQSxVQUFNQyxJQUFJLEdBQUdDLFFBQVEsQ0FBQ0osT0FBTyxDQUFDSyxJQUFSLENBQWEsQ0FBYixLQUFtQkwsT0FBTyxDQUFDQyxHQUFSLENBQVlLLElBQWhDLENBQXJCO0FBQ0EsVUFBTUMsR0FBRyxHQUFHLHVCQUFaO0FBRUEsVUFBTUMsV0FBU0MsWUFBVCxFQUFOOztBQUVBLFFBQUlULE9BQU8sQ0FBQ0MsR0FBUixDQUFZUyxRQUFoQixFQUEwQjtBQUN4QixZQUFNRixXQUFTRyxJQUFULENBQWM7QUFBRUMsUUFBQUEsS0FBSyxFQUFFO0FBQVQsT0FBZCxDQUFOO0FBQ0Q7O0FBRURMLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRLG9CQUFSO0FBQ0FOLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRQyxrQkFBU0MsVUFBVCxFQUFSO0FBRUFSLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRRyxvQkFBV0MsVUFBWCxDQUFzQjtBQUFFQyxNQUFBQSxRQUFRLEVBQUU7QUFBWixLQUF0QixDQUFSO0FBQ0FYLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRRyxvQkFBV0csSUFBWCxFQUFSO0FBRUFaLElBQUFBLEdBQUcsQ0FBQ2EsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxPQUFELEVBQVVDLFFBQVYsS0FBdUI7QUFDbENBLE1BQUFBLFFBQVEsQ0FBQ0MsSUFBVCxDQUFjLDJDQUFkO0FBQ0QsS0FGRDtBQUlBaEIsSUFBQUEsR0FBRyxDQUFDTSxHQUFKLENBQVEsTUFBUixFQUFnQlcsZUFBaEI7QUFFQWpCLElBQUFBLEdBQUcsQ0FBQ2tCLE1BQUosQ0FBV3RCLElBQVgsRUFBaUIsTUFBTTtBQUNyQnVCLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLHdCQUF1QjVCLElBQUssT0FBTUksSUFBSyxFQUFwRDtBQUNELEtBRkQ7QUFHRCxHQTFCRCxDQTBCRSxPQUFPeUIsRUFBUCxFQUFXO0FBQ1hGLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxFQUFFLENBQUNDLE9BQWY7QUFDRDtBQUNGLENBOUJELEMsQ0FnQ0E7OztBQUNBL0IsS0FBSyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlciIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tIFwiYm9keS1wYXJzZXJcIjtcbmltcG9ydCBhcGkgZnJvbSBcIi4vcm91dGVzXCI7XG5pbXBvcnQgeyBkYiBhcyBkYXRhYmFzZSB9IGZyb20gXCIuL21vZGVsc1wiO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcblxuaW1wb3J0IFwiLi9taWRkbGV3YXJlcy9wYXNzcG9ydFwiO1xuXG5jb25zdCBzdGFydCA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBob3N0ID0gcHJvY2Vzcy5lbnYuSE9TVDtcbiAgICBjb25zdCBwb3J0ID0gcGFyc2VJbnQocHJvY2Vzcy5hcmd2WzJdIHx8IHByb2Nlc3MuZW52LlBPUlQpO1xuICAgIGNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuICAgIGF3YWl0IGRhdGFiYXNlLmF1dGhlbnRpY2F0ZSgpO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WKSB7XG4gICAgICBhd2FpdCBkYXRhYmFzZS5zeW5jKHsgZm9yY2U6IGZhbHNlIH0pO1xuICAgIH1cblxuICAgIGFwcC51c2UoY29ycygpKTtcbiAgICBhcHAudXNlKHBhc3Nwb3J0LmluaXRpYWxpemUoKSk7XG5cbiAgICBhcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbiAgICBhcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcblxuICAgIGFwcC5nZXQoXCIvXCIsIChyZXF1ZXN0LCByZXNwb25zZSkgPT4ge1xuICAgICAgcmVzcG9uc2Uuc2VuZChcIlBsZWFzZSBmZWVsIGZyZWUgdG8gdXNlIG91ciBhcGkgd2l0aCAvYXBpXCIpO1xuICAgIH0pO1xuXG4gICAgYXBwLnVzZShcIi9hcGlcIiwgYXBpKTtcblxuICAgIGFwcC5saXN0ZW4ocG9ydCwgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYFNlcnZlciBpcyBydW5uaW5nIGluICR7aG9zdH0gYXQgJHtwb3J0fWApO1xuICAgIH0pO1xuICB9IGNhdGNoIChleCkge1xuICAgIGNvbnNvbGUubG9nKGV4Lm1lc3NhZ2UpO1xuICB9XG59O1xuXG4vLyBMZXQncyBSb2NrISA6KVxuc3RhcnQoKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "start",
        "host",
        "process",
        "env",
        "HOST",
        "port",
        "parseInt",
        "argv",
        "PORT",
        "app",
        "database",
        "authenticate",
        "NODE_ENV",
        "sync",
        "force",
        "use",
        "passport",
        "initialize",
        "bodyParser",
        "urlencoded",
        "extended",
        "json",
        "get",
        "request",
        "response",
        "send",
        "api",
        "listen",
        "console",
        "log",
        "ex",
        "message"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;AAEA,MAAMA,KAAK,GAAG,YAAY;AACxB,MAAI;AACF,UAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAzB;AACA,UAAMC,IAAI,GAAGC,QAAQ,CAACJ,OAAO,CAACK,IAAR,CAAa,CAAb,KAAmBL,OAAO,CAACC,GAAR,CAAYK,IAAhC,CAArB;AACA,UAAMC,GAAG,GAAG,uBAAZ;AAEA,UAAMC,WAASC,YAAT,EAAN;;AAEA,QAAIT,OAAO,CAACC,GAAR,CAAYS,QAAhB,EAA0B;AACxB,YAAMF,WAASG,IAAT,CAAc;AAAEC,QAAAA,KAAK,EAAE;AAAT,OAAd,CAAN;AACD;;AAEDL,IAAAA,GAAG,CAACM,GAAJ,CAAQ,oBAAR;AACAN,IAAAA,GAAG,CAACM,GAAJ,CAAQC,kBAASC,UAAT,EAAR;AAEAR,IAAAA,GAAG,CAACM,GAAJ,CAAQG,oBAAWC,UAAX,CAAsB;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAtB,CAAR;AACAX,IAAAA,GAAG,CAACM,GAAJ,CAAQG,oBAAWG,IAAX,EAAR;AAEAZ,IAAAA,GAAG,CAACa,GAAJ,CAAQ,GAAR,EAAa,CAACC,OAAD,EAAUC,QAAV,KAAuB;AAClCA,MAAAA,QAAQ,CAACC,IAAT,CAAc,2CAAd;AACD,KAFD;AAIAhB,IAAAA,GAAG,CAACM,GAAJ,CAAQ,MAAR,EAAgBW,eAAhB;AAEAjB,IAAAA,GAAG,CAACkB,MAAJ,CAAWtB,IAAX,EAAiB,MAAM;AACrBuB,MAAAA,OAAO,CAACC,GAAR,CAAa,wBAAuB5B,IAAK,OAAMI,IAAK,EAApD;AACD,KAFD;AAGD,GA1BD,CA0BE,OAAOyB,EAAP,EAAW;AACXF,IAAAA,OAAO,CAACC,GAAR,CAAYC,EAAE,CAACC,OAAf;AACD;AACF,CA9BD,C,CAgCA;;;AACA/B,KAAK",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server",
      "sourcesContent": [
        "import express from \"express\";\nimport bodyParser from \"body-parser\";\nimport api from \"./routes\";\nimport { db as database } from \"./models\";\nimport passport from \"passport\";\nimport cors from \"cors\";\n\nimport \"./middlewares/passport\";\n\nconst start = async () => {\n  try {\n    const host = process.env.HOST;\n    const port = parseInt(process.argv[2] || process.env.PORT);\n    const app = express();\n\n    await database.authenticate();\n\n    if (process.env.NODE_ENV) {\n      await database.sync({ force: false });\n    }\n\n    app.use(cors());\n    app.use(passport.initialize());\n\n    app.use(bodyParser.urlencoded({ extended: true }));\n    app.use(bodyParser.json());\n\n    app.get(\"/\", (request, response) => {\n      response.send(\"Please feel free to use our api with /api\");\n    });\n\n    app.use(\"/api\", api);\n\n    app.listen(port, () => {\n      console.log(`Server is running in ${host} at ${port}`);\n    });\n  } catch (ex) {\n    console.log(ex.message);\n  }\n};\n\n// Let's Rock! :)\nstart();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544520458000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/routes\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/routes/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/routes/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/routes/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _auth = _interopRequireDefault(require(\"./auth\"));\n\nvar _secured = _interopRequireDefault(require(\"./secured\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.get(\"/\", (req, res) => {\n  res.json({\n    name: \"sanji.Api\",\n    meta: {\n      version: \"1.0.0\",\n      status: \"running\"\n    }\n  });\n});\napi.use(\"/auth\", _auth.default);\napi.use(\"/\", _passport.default.authenticate(\"jwt\", {\n  session: false\n}), _secured.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsImpzb24iLCJuYW1lIiwibWV0YSIsInZlcnNpb24iLCJzdGF0dXMiLCJ1c2UiLCJhdXRoIiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzZXNzaW9uIiwic2VjdXJlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLHNCQUFaO0FBRUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUN6QkEsRUFBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVM7QUFDUEMsSUFBQUEsSUFBSSxFQUFFLFdBREM7QUFFUEMsSUFBQUEsSUFBSSxFQUFFO0FBQ0pDLE1BQUFBLE9BQU8sRUFBRSxPQURMO0FBRUpDLE1BQUFBLE1BQU0sRUFBRTtBQUZKO0FBRkMsR0FBVDtBQU9ELENBUkQ7QUFVQVIsR0FBRyxDQUFDUyxHQUFKLENBQVEsT0FBUixFQUFpQkMsYUFBakI7QUFDQVYsR0FBRyxDQUFDUyxHQUFKLENBQVEsR0FBUixFQUFhRSxrQkFBU0MsWUFBVCxDQUFzQixLQUF0QixFQUE2QjtBQUFFQyxFQUFBQSxPQUFPLEVBQUU7QUFBWCxDQUE3QixDQUFiLEVBQStEQyxnQkFBL0Q7ZUFFZWQsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlci9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xuaW1wb3J0IGF1dGggZnJvbSBcIi4vYXV0aFwiO1xuaW1wb3J0IHNlY3VyZWQgZnJvbSBcIi4vc2VjdXJlZFwiO1xuXG5jb25zdCBhcGkgPSBSb3V0ZXIoKTtcblxuYXBpLmdldChcIi9cIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICBuYW1lOiBcInNhbmppLkFwaVwiLFxuICAgIG1ldGE6IHtcbiAgICAgIHZlcnNpb246IFwiMS4wLjBcIixcbiAgICAgIHN0YXR1czogXCJydW5uaW5nXCJcbiAgICB9XG4gIH0pO1xufSk7XG5cbmFwaS51c2UoXCIvYXV0aFwiLCBhdXRoKTtcbmFwaS51c2UoXCIvXCIsIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZShcImp3dFwiLCB7IHNlc3Npb246IGZhbHNlIH0pLCBzZWN1cmVkKTtcblxuZXhwb3J0IGRlZmF1bHQgYXBpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "json",
        "name",
        "meta",
        "version",
        "status",
        "use",
        "auth",
        "passport",
        "authenticate",
        "session",
        "secured"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,EAAAA,GAAG,CAACC,IAAJ,CAAS;AACPC,IAAAA,IAAI,EAAE,WADC;AAEPC,IAAAA,IAAI,EAAE;AACJC,MAAAA,OAAO,EAAE,OADL;AAEJC,MAAAA,MAAM,EAAE;AAFJ;AAFC,GAAT;AAOD,CARD;AAUAR,GAAG,CAACS,GAAJ,CAAQ,OAAR,EAAiBC,aAAjB;AACAV,GAAG,CAACS,GAAJ,CAAQ,GAAR,EAAaE,kBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAA7B,CAAb,EAA+DC,gBAA/D;eAEed,G",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport passport from \"passport\";\nimport auth from \"./auth\";\nimport secured from \"./secured\";\n\nconst api = Router();\n\napi.get(\"/\", (req, res) => {\n  res.json({\n    name: \"sanji.Api\",\n    meta: {\n      version: \"1.0.0\",\n      status: \"running\"\n    }\n  });\n});\n\napi.use(\"/auth\", auth);\napi.use(\"/\", passport.authenticate(\"jwt\", { session: false }), secured);\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544452727000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/routes\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/routes/auth.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/routes/auth.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/routes/auth.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/routes/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _user = _interopRequireDefault(require(\"../models/user\"));\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.post(\"/register\", async (req, res) => {\n  const {\n    nickname,\n    email,\n    password,\n    password_confirmation\n  } = req.body;\n\n  try {\n    const user = new _user.default({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n    await user.save();\n    const payload = {\n      uuid: user.uuid,\n      nickname,\n      email\n    };\n\n    const token = _jsonwebtoken.default.sign(payload, \"mysupersecret\");\n\n    res.status(201).json({\n      data: {\n        user\n      },\n      meta: {\n        token\n      }\n    });\n  } catch (err) {\n    console.log(err.message);\n    res.json({\n      err: err.message\n    });\n  }\n});\napi.post(\"/login\", async (req, res) => {\n  _passport.default.authenticate(\"local\", {\n    session: false\n  }, (err, user) => {\n    if (err) {\n      res.status(400).json({\n        error: {\n          message: err\n        }\n      });\n    }\n\n    const {\n      uuid,\n      nickname,\n      email\n    } = user;\n    const payload = {\n      uuid,\n      nickname,\n      email\n    };\n\n    const token = _jsonwebtoken.default.sign(payload, process.env.JWT_ENCRYPTION);\n\n    res.status(200).json({\n      data: {\n        user\n      },\n      meta: {\n        token\n      }\n    });\n  })(req, res);\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiYXBpIiwicG9zdCIsInJlcSIsInJlcyIsIm5pY2tuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInBhc3N3b3JkX2NvbmZpcm1hdGlvbiIsImJvZHkiLCJ1c2VyIiwiVXNlciIsInNhdmUiLCJwYXlsb2FkIiwidXVpZCIsInRva2VuIiwiand0Iiwic2lnbiIsInN0YXR1cyIsImpzb24iLCJkYXRhIiwibWV0YSIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzZXNzaW9uIiwiZXJyb3IiLCJwcm9jZXNzIiwiZW52IiwiSldUX0VOQ1JZUFRJT04iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLEdBQUcsR0FBRyxzQkFBWjtBQUVBQSxHQUFHLENBQUNDLElBQUosQ0FBUyxXQUFULEVBQXNCLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUN4QyxRQUFNO0FBQUVDLElBQUFBLFFBQUY7QUFBWUMsSUFBQUEsS0FBWjtBQUFtQkMsSUFBQUEsUUFBbkI7QUFBNkJDLElBQUFBO0FBQTdCLE1BQXVETCxHQUFHLENBQUNNLElBQWpFOztBQUVBLE1BQUk7QUFDRixVQUFNQyxJQUFJLEdBQUcsSUFBSUMsYUFBSixDQUFTO0FBQ3BCTixNQUFBQSxRQURvQjtBQUVwQkMsTUFBQUEsS0FGb0I7QUFHcEJDLE1BQUFBLFFBSG9CO0FBSXBCQyxNQUFBQTtBQUpvQixLQUFULENBQWI7QUFPQSxVQUFNRSxJQUFJLENBQUNFLElBQUwsRUFBTjtBQUVBLFVBQU1DLE9BQU8sR0FBRztBQUFFQyxNQUFBQSxJQUFJLEVBQUVKLElBQUksQ0FBQ0ksSUFBYjtBQUFtQlQsTUFBQUEsUUFBbkI7QUFBNkJDLE1BQUFBO0FBQTdCLEtBQWhCOztBQUNBLFVBQU1TLEtBQUssR0FBR0Msc0JBQUlDLElBQUosQ0FBU0osT0FBVCxFQUFrQixlQUFsQixDQUFkOztBQUVBVCxJQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUU7QUFBRVYsUUFBQUE7QUFBRixPQUFSO0FBQWtCVyxNQUFBQSxJQUFJLEVBQUU7QUFBRU4sUUFBQUE7QUFBRjtBQUF4QixLQUFyQjtBQUNELEdBZEQsQ0FjRSxPQUFPTyxHQUFQLEVBQVk7QUFDWkMsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlGLEdBQUcsQ0FBQ0csT0FBaEI7QUFDQXJCLElBQUFBLEdBQUcsQ0FBQ2UsSUFBSixDQUFTO0FBQUVHLE1BQUFBLEdBQUcsRUFBRUEsR0FBRyxDQUFDRztBQUFYLEtBQVQ7QUFDRDtBQUNGLENBckJEO0FBdUJBeEIsR0FBRyxDQUFDQyxJQUFKLENBQVMsUUFBVCxFQUFtQixPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDckNzQixvQkFBU0MsWUFBVCxDQUFzQixPQUF0QixFQUErQjtBQUFFQyxJQUFBQSxPQUFPLEVBQUU7QUFBWCxHQUEvQixFQUFtRCxDQUFDTixHQUFELEVBQU1aLElBQU4sS0FBZTtBQUNoRSxRQUFJWSxHQUFKLEVBQVM7QUFDUGxCLE1BQUFBLEdBQUcsQ0FBQ2MsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ25CVSxRQUFBQSxLQUFLLEVBQUU7QUFBRUosVUFBQUEsT0FBTyxFQUFFSDtBQUFYO0FBRFksT0FBckI7QUFHRDs7QUFFRCxVQUFNO0FBQUVSLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsUUFBNEJJLElBQWxDO0FBQ0EsVUFBTUcsT0FBTyxHQUFHO0FBQUVDLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsS0FBaEI7O0FBQ0EsVUFBTVMsS0FBSyxHQUFHQyxzQkFBSUMsSUFBSixDQUFTSixPQUFULEVBQWtCaUIsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGNBQTlCLENBQWQ7O0FBRUE1QixJQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUU7QUFBRVYsUUFBQUE7QUFBRixPQUFSO0FBQWtCVyxNQUFBQSxJQUFJLEVBQUU7QUFBRU4sUUFBQUE7QUFBRjtBQUF4QixLQUFyQjtBQUNELEdBWkQsRUFZR1osR0FaSCxFQVlRQyxHQVpSO0FBYUQsQ0FkRDtlQWdCZUgsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlci9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWxzL3VzZXJcIjtcbmltcG9ydCBwYXNzcG9ydCBmcm9tIFwicGFzc3BvcnRcIjtcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cbmFwaS5wb3N0KFwiL3JlZ2lzdGVyXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IG5pY2tuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHBhc3N3b3JkX2NvbmZpcm1hdGlvbiB9ID0gcmVxLmJvZHk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgbmlja25hbWUsXG4gICAgICBlbWFpbCxcbiAgICAgIHBhc3N3b3JkLFxuICAgICAgcGFzc3dvcmRfY29uZmlybWF0aW9uXG4gICAgfSk7XG5cbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcblxuICAgIGNvbnN0IHBheWxvYWQgPSB7IHV1aWQ6IHVzZXIudXVpZCwgbmlja25hbWUsIGVtYWlsIH07XG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihwYXlsb2FkLCBcIm15c3VwZXJzZWNyZXRcIik7XG5cbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IGRhdGE6IHsgdXNlciB9LCBtZXRhOiB7IHRva2VuIH0gfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICByZXMuanNvbih7IGVycjogZXJyLm1lc3NhZ2UgfSk7XG4gIH1cbn0pO1xuXG5hcGkucG9zdChcIi9sb2dpblwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgcGFzc3BvcnQuYXV0aGVudGljYXRlKFwibG9jYWxcIiwgeyBzZXNzaW9uOiBmYWxzZSB9LCAoZXJyLCB1c2VyKSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogeyBtZXNzYWdlOiBlcnIgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyB1dWlkLCBuaWNrbmFtZSwgZW1haWwgfSA9IHVzZXI7XG4gICAgY29uc3QgcGF5bG9hZCA9IHsgdXVpZCwgbmlja25hbWUsIGVtYWlsIH07XG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihwYXlsb2FkLCBwcm9jZXNzLmVudi5KV1RfRU5DUllQVElPTik7XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHsgdXNlciB9LCBtZXRhOiB7IHRva2VuIH0gfSk7XG4gIH0pKHJlcSwgcmVzKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "api",
        "post",
        "req",
        "res",
        "nickname",
        "email",
        "password",
        "password_confirmation",
        "body",
        "user",
        "User",
        "save",
        "payload",
        "uuid",
        "token",
        "jwt",
        "sign",
        "status",
        "json",
        "data",
        "meta",
        "err",
        "console",
        "log",
        "message",
        "passport",
        "authenticate",
        "session",
        "error",
        "process",
        "env",
        "JWT_ENCRYPTION"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,IAAJ,CAAS,WAAT,EAAsB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACxC,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,KAAZ;AAAmBC,IAAAA,QAAnB;AAA6BC,IAAAA;AAA7B,MAAuDL,GAAG,CAACM,IAAjE;;AAEA,MAAI;AACF,UAAMC,IAAI,GAAG,IAAIC,aAAJ,CAAS;AACpBN,MAAAA,QADoB;AAEpBC,MAAAA,KAFoB;AAGpBC,MAAAA,QAHoB;AAIpBC,MAAAA;AAJoB,KAAT,CAAb;AAOA,UAAME,IAAI,CAACE,IAAL,EAAN;AAEA,UAAMC,OAAO,GAAG;AAAEC,MAAAA,IAAI,EAAEJ,IAAI,CAACI,IAAb;AAAmBT,MAAAA,QAAnB;AAA6BC,MAAAA;AAA7B,KAAhB;;AACA,UAAMS,KAAK,GAAGC,sBAAIC,IAAJ,CAASJ,OAAT,EAAkB,eAAlB,CAAd;;AAEAT,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,IAAI,EAAE;AAAEV,QAAAA;AAAF,OAAR;AAAkBW,MAAAA,IAAI,EAAE;AAAEN,QAAAA;AAAF;AAAxB,KAArB;AACD,GAdD,CAcE,OAAOO,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACArB,IAAAA,GAAG,CAACe,IAAJ,CAAS;AAAEG,MAAAA,GAAG,EAAEA,GAAG,CAACG;AAAX,KAAT;AACD;AACF,CArBD;AAuBAxB,GAAG,CAACC,IAAJ,CAAS,QAAT,EAAmB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACrCsB,oBAASC,YAAT,CAAsB,OAAtB,EAA+B;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAA/B,EAAmD,CAACN,GAAD,EAAMZ,IAAN,KAAe;AAChE,QAAIY,GAAJ,EAAS;AACPlB,MAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBU,QAAAA,KAAK,EAAE;AAAEJ,UAAAA,OAAO,EAAEH;AAAX;AADY,OAArB;AAGD;;AAED,UAAM;AAAER,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,QAA4BI,IAAlC;AACA,UAAMG,OAAO,GAAG;AAAEC,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,KAAhB;;AACA,UAAMS,KAAK,GAAGC,sBAAIC,IAAJ,CAASJ,OAAT,EAAkBiB,OAAO,CAACC,GAAR,CAAYC,cAA9B,CAAd;;AAEA5B,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,IAAI,EAAE;AAAEV,QAAAA;AAAF,OAAR;AAAkBW,MAAAA,IAAI,EAAE;AAAEN,QAAAA;AAAF;AAAxB,KAArB;AACD,GAZD,EAYGZ,GAZH,EAYQC,GAZR;AAaD,CAdD;eAgBeH,G",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport jwt from \"jsonwebtoken\";\nimport User from \"../models/user\";\nimport passport from \"passport\";\n\nconst api = Router();\n\napi.post(\"/register\", async (req, res) => {\n  const { nickname, email, password, password_confirmation } = req.body;\n\n  try {\n    const user = new User({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n\n    await user.save();\n\n    const payload = { uuid: user.uuid, nickname, email };\n    const token = jwt.sign(payload, \"mysupersecret\");\n\n    res.status(201).json({ data: { user }, meta: { token } });\n  } catch (err) {\n    console.log(err.message);\n    res.json({ err: err.message });\n  }\n});\n\napi.post(\"/login\", async (req, res) => {\n  passport.authenticate(\"local\", { session: false }, (err, user) => {\n    if (err) {\n      res.status(400).json({\n        error: { message: err }\n      });\n    }\n\n    const { uuid, nickname, email } = user;\n    const payload = { uuid, nickname, email };\n    const token = jwt.sign(payload, process.env.JWT_ENCRYPTION);\n\n    res.status(200).json({ data: { user }, meta: { token } });\n  })(req, res);\n});\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544453218000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/models\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/models/user.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/models/user.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/models/user.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/models/user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sequelize = _interopRequireWildcard(require(\"sequelize\"));\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nclass User extends _sequelize.Model {\n  static init(database) {\n    return super.init({\n      uuid: {\n        type: _sequelize.default.UUID,\n        primaryKey: true,\n        defaultValue: _sequelize.default.UUIDV4\n      },\n      nickname: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        unique: {\n          args: true,\n          msg: \"Nickname already in use\"\n        },\n        validate: {\n          isLongEnough(v) {\n            if (v.length < 5) {\n              throw new Error(\"Nickname must have at least 5 characters\");\n            }\n          }\n\n        }\n      },\n      email: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          isEmail: true\n        },\n        unique: {\n          args: true,\n          msg: \"Email already in use\"\n        }\n      },\n      password_digest: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          notEmpty: true\n        }\n      },\n      password: {\n        type: _sequelize.default.VIRTUAL,\n        validate: {\n          isLongEnough(v) {\n            if (v.length < 7) {\n              throw new Error(\"Password must have at least 7 characters\");\n            }\n          }\n\n        }\n      },\n      password_confirmation: {\n        type: _sequelize.default.VIRTUAL,\n        validate: {\n          isEqual(v) {\n            if (v !== this.password) {\n              throw new Error(\"Password confirmation doesn't match password\");\n            }\n          }\n\n        }\n      }\n    }, {\n      tableName: \"users\",\n      sequelize: database,\n      indexes: [{\n        unique: true,\n        fields: [\"uuid\", \"nickname\", \"email\"]\n      }],\n      hooks: {\n        async beforeValidate(userInstance) {\n          userInstance.password_digest = await userInstance.generateHash();\n        },\n\n        async beforeSave(userInstance) {\n          if (!userInstance.isNewRecord && userInstance.changed(\"password\")) {\n            userInstance.password_digest = await userInstance.generateHash();\n          }\n        }\n\n      }\n    });\n  }\n\n  async generateHash() {\n    const SALT_ROUND = 5;\n    const hash = await _bcrypt.default.hash(this.password, SALT_ROUND);\n\n    if (!hash) {\n      throw new Error(\"Can't hash password\");\n    }\n\n    return hash;\n  }\n\n  async checkPassword(password) {\n    return _bcrypt.default.compare(password, this.password_digest);\n  }\n\n  toJSON() {\n    const values = Object.assign({}, this.get());\n    delete values.password_digest;\n    return values;\n  }\n\n}\n\nexports.default = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiVXNlciIsIk1vZGVsIiwiaW5pdCIsImRhdGFiYXNlIiwidXVpZCIsInR5cGUiLCJTZXF1ZWxpemUiLCJVVUlEIiwicHJpbWFyeUtleSIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsIm5pY2tuYW1lIiwiU1RSSU5HIiwiYWxsb3dOdWxsIiwidW5pcXVlIiwiYXJncyIsIm1zZyIsInZhbGlkYXRlIiwiaXNMb25nRW5vdWdoIiwidiIsImxlbmd0aCIsIkVycm9yIiwiZW1haWwiLCJpc0VtYWlsIiwicGFzc3dvcmRfZGlnZXN0Iiwibm90RW1wdHkiLCJwYXNzd29yZCIsIlZJUlRVQUwiLCJwYXNzd29yZF9jb25maXJtYXRpb24iLCJpc0VxdWFsIiwidGFibGVOYW1lIiwic2VxdWVsaXplIiwiaW5kZXhlcyIsImZpZWxkcyIsImhvb2tzIiwiYmVmb3JlVmFsaWRhdGUiLCJ1c2VySW5zdGFuY2UiLCJnZW5lcmF0ZUhhc2giLCJiZWZvcmVTYXZlIiwiaXNOZXdSZWNvcmQiLCJjaGFuZ2VkIiwiU0FMVF9ST1VORCIsImhhc2giLCJiY3J5cHQiLCJjaGVja1Bhc3N3b3JkIiwiY29tcGFyZSIsInRvSlNPTiIsInZhbHVlcyIsIk9iamVjdCIsImFzc2lnbiIsImdldCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7Ozs7QUFFZSxNQUFNQSxJQUFOLFNBQW1CQyxnQkFBbkIsQ0FBeUI7QUFDdEMsU0FBT0MsSUFBUCxDQUFZQyxRQUFaLEVBQXNCO0FBQ3BCLFdBQU8sTUFBTUQsSUFBTixDQUNMO0FBQ0VFLE1BQUFBLElBQUksRUFBRTtBQUNKQyxRQUFBQSxJQUFJLEVBQUVDLG1CQUFVQyxJQURaO0FBRUpDLFFBQUFBLFVBQVUsRUFBRSxJQUZSO0FBR0pDLFFBQUFBLFlBQVksRUFBRUgsbUJBQVVJO0FBSHBCLE9BRFI7QUFNRUMsTUFBQUEsUUFBUSxFQUFFO0FBQ1JOLFFBQUFBLElBQUksRUFBRUMsbUJBQVVNLE1BRFI7QUFF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SXJCLEtBQUosQ0FBVSxxQkFBVixDQUFOO0FBQ0Q7O0FBRUQsV0FBT3FCLElBQVA7QUFDRDs7QUFFRCxRQUFNRSxhQUFOLENBQW9CbEIsUUFBcEIsRUFBOEI7QUFDNUIsV0FBT2lCLGdCQUFPRSxPQUFQLENBQWVuQixRQUFmLEVBQXlCLEtBQUtGLGVBQTlCLENBQVA7QUFDRDs7QUFFRHNCLEVBQUFBLE1BQU0sR0FBRztBQUNQLFVBQU1DLE1BQU0sR0FBR0MsTUFBTSxDQUFDQyxNQUFQLENBQWMsRUFBZCxFQUFrQixLQUFLQyxHQUFMLEVBQWxCLENBQWY7QUFFQSxXQUFPSCxNQUFNLENBQUN2QixlQUFkO0FBRUEsV0FBT3VCLE1BQVA7QUFDRDs7QUE5R3FDIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9iYmVub2l0L0Rldi9iYXNpY3Mvc2VydmVyL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTZXF1ZWxpemUsIHsgTW9kZWwgfSBmcm9tIFwic2VxdWVsaXplXCI7XG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlciBleHRlbmRzIE1vZGVsIHtcbiAgc3RhdGljIGluaXQoZGF0YWJhc2UpIHtcbiAgICByZXR1cm4gc3VwZXIuaW5pdChcbiAgICAgIHtcbiAgICAgICAgdXVpZDoge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5VVUlELFxuICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBTZXF1ZWxpemUuVVVJRFY0XG4gICAgICAgIH0sXG4gICAgICAgIG5pY2tuYW1lOiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgIHVuaXF1ZToge1xuICAgICAgICAgICAgYXJnczogdHJ1ZSxcbiAgICAgICAgICAgIG1zZzogXCJOaWNrbmFtZSBhbHJlYWR5IGluIHVzZVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgaXNMb25nRW5vdWdoKHYpIHtcbiAgICAgICAgICAgICAgaWYgKHYubGVuZ3RoIDwgNSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5pY2tuYW1lIG11c3QgaGF2ZSBhdCBsZWFzdCA1IGNoYXJhY3RlcnNcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBpc0VtYWlsOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB1bmlxdWU6IHtcbiAgICAgICAgICAgIGFyZ3M6IHRydWUsXG4gICAgICAgICAgICBtc2c6IFwiRW1haWwgYWxyZWFkeSBpbiB1c2VcIlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcGFzc3dvcmRfZGlnZXN0OiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBub3RFbXB0eTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcGFzc3dvcmQ6IHtcbiAgICAgICAgICB0eXBlOiBTZXF1ZWxpemUuVklSVFVBTCxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgaXNMb25nRW5vdWdoKHYpIHtcbiAgICAgICAgICAgICAgaWYgKHYubGVuZ3RoIDwgNykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhc3N3b3JkIG11c3QgaGF2ZSBhdCBsZWFzdCA3IGNoYXJhY3RlcnNcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvbjoge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5WSVJUVUFMLFxuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBpc0VxdWFsKHYpIHtcbiAgICAgICAgICAgICAgaWYgKHYgIT09IHRoaXMucGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXNzd29yZCBjb25maXJtYXRpb24gZG9lc24ndCBtYXRjaCBwYXNzd29yZFwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcInVzZXJzXCIsXG4gICAgICAgIHNlcXVlbGl6ZTogZGF0YWJhc2UsXG5cbiAgICAgICAgaW5kZXhlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgICAgIGZpZWxkczogW1widXVpZFwiLCBcIm5pY2tuYW1lXCIsIFwiZW1haWxcIl1cbiAgICAgICAgICB9XG4gICAgICAgIF0sXG5cbiAgICAgICAgaG9va3M6IHtcbiAgICAgICAgICBhc3luYyBiZWZvcmVWYWxpZGF0ZSh1c2VySW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHVzZXJJbnN0YW5jZS5wYXNzd29yZF9kaWdlc3QgPSBhd2FpdCB1c2VySW5zdGFuY2UuZ2VuZXJhdGVIYXNoKCk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGFzeW5jIGJlZm9yZVNhdmUodXNlckluc3RhbmNlKSB7XG4gICAgICAgICAgICBpZiAoIXVzZXJJbnN0YW5jZS5pc05ld1JlY29yZCAmJiB1c2VySW5zdGFuY2UuY2hhbmdlZChcInBhc3N3b3JkXCIpKSB7XG4gICAgICAgICAgICAgIHVzZXJJbnN0YW5jZS5wYXNzd29yZF9kaWdlc3QgPSBhd2FpdCB1c2VySW5zdGFuY2UuZ2VuZXJhdGVIYXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlSGFzaCgpIHtcbiAgICBjb25zdCBTQUxUX1JPVU5EID0gNTtcblxuICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBiY3J5cHQuaGFzaCh0aGlzLnBhc3N3b3JkLCBTQUxUX1JPVU5EKTtcbiAgICBpZiAoIWhhc2gpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGhhc2ggcGFzc3dvcmRcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhhc2g7XG4gIH1cblxuICBhc3luYyBjaGVja1Bhc3N3b3JkKHBhc3N3b3JkKSB7XG4gICAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB0aGlzLnBhc3N3b3JkX2RpZ2VzdCk7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgY29uc3QgdmFsdWVzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nZXQoKSk7XG5cbiAgICBkZWxldGUgdmFsdWVzLnBhc3N3b3JkX2RpZ2VzdDtcblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "User",
        "Model",
        "init",
        "database",
        "uuid",
        "type",
        "Sequelize",
        "UUID",
        "primaryKey",
        "defaultValue",
        "UUIDV4",
        "nickname",
        "STRING",
        "allowNull",
        "unique",
        "args",
        "msg",
        "validate",
        "isLongEnough",
        "v",
        "length",
        "Error",
        "email",
        "isEmail",
        "password_digest",
        "notEmpty",
        "password",
        "VIRTUAL",
        "password_confirmation",
        "isEqual",
        "tableName",
        "sequelize",
        "indexes",
        "fields",
        "hooks",
        "beforeValidate",
        "userInstance",
        "generateHash",
        "beforeSave",
        "isNewRecord",
        "changed",
        "SALT_ROUND",
        "hash",
        "bcrypt",
        "checkPassword",
        "compare",
        "toJSON",
        "values",
        "Object",
        "assign",
        "get"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "sourcesContent": [
        "import Sequelize, { Model } from \"sequelize\";\nimport bcrypt from \"bcrypt\";\n\nexport default class User extends Model {\n  static init(database) {\n    return super.init(\n      {\n        uuid: {\n          type: Sequelize.UUID,\n          primaryKey: true,\n          defaultValue: Sequelize.UUIDV4\n        },\n        nickname: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          unique: {\n            args: true,\n            msg: \"Nickname already in use\"\n          },\n          validate: {\n            isLongEnough(v) {\n              if (v.length < 5) {\n                throw new Error(\"Nickname must have at least 5 characters\");\n              }\n            }\n          }\n        },\n        email: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            isEmail: true\n          },\n          unique: {\n            args: true,\n            msg: \"Email already in use\"\n          }\n        },\n        password_digest: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            notEmpty: true\n          }\n        },\n        password: {\n          type: Sequelize.VIRTUAL,\n          validate: {\n            isLongEnough(v) {\n              if (v.length < 7) {\n                throw new Error(\"Password must have at least 7 characters\");\n              }\n            }\n          }\n        },\n        password_confirmation: {\n          type: Sequelize.VIRTUAL,\n          validate: {\n            isEqual(v) {\n              if (v !== this.password) {\n                throw new Error(\"Password confirmation doesn't match password\");\n              }\n            }\n          }\n        }\n      },\n      {\n        tableName: \"users\",\n        sequelize: database,\n\n        indexes: [\n          {\n            unique: true,\n            fields: [\"uuid\", \"nickname\", \"email\"]\n          }\n        ],\n\n        hooks: {\n          async beforeValidate(userInstance) {\n            userInstance.password_digest = await userInstance.generateHash();\n          },\n\n          async beforeSave(userInstance) {\n            if (!userInstance.isNewRecord && userInstance.changed(\"password\")) {\n              userInstance.password_digest = await userInstance.generateHash();\n            }\n          }\n        }\n      }\n    );\n  }\n\n  async generateHash() {\n    const SALT_ROUND = 5;\n\n    const hash = await bcrypt.hash(this.password, SALT_ROUND);\n    if (!hash) {\n      throw new Error(\"Can't hash password\");\n    }\n\n    return hash;\n  }\n\n  async checkPassword(password) {\n    return bcrypt.compare(password, this.password_digest);\n  }\n\n  toJSON() {\n    const values = Object.assign({}, this.get());\n\n    delete values.password_digest;\n\n    return values;\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544454448000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/routes/secured\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/routes/secured/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/routes/secured/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/routes/secured/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/routes/secured/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _users = _interopRequireDefault(require(\"./users\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.use(\"/users\", _users.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwaSIsInVzZSIsInVzZXJzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxHQUFHLEdBQUcsc0JBQVo7QUFFQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsUUFBUixFQUFrQkMsY0FBbEI7ZUFFZUYsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlci9yb3V0ZXMvc2VjdXJlZCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgdXNlcnMgZnJvbSBcIi4vdXNlcnNcIjtcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cbmFwaS51c2UoXCIvdXNlcnNcIiwgdXNlcnMpO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "api",
        "use",
        "users"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,QAAR,EAAkBC,cAAlB;eAEeF,G",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport users from \"./users\";\n\nconst api = Router();\n\napi.use(\"/users\", users);\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544452766000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/routes/secured\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/routes/secured/users.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/routes/secured/users.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/routes/secured/users.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/routes/secured/users.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
        "sourceFileName": "users.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _user = _interopRequireDefault(require(\"../../models/user\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.get(\"/\", async (req, res) => {\n  const users = await _user.default.findAll();\n  res.status(200).json({\n    data: {\n      users\n    }\n  });\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsInVzZXJzIiwiVXNlciIsImZpbmRBbGwiLCJzdGF0dXMiLCJqc29uIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLHNCQUFaO0FBRUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLEdBQVIsRUFBYSxPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDL0IsUUFBTUMsS0FBSyxHQUFHLE1BQU1DLGNBQUtDLE9BQUwsRUFBcEI7QUFDQUgsRUFBQUEsR0FBRyxDQUFDSSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRUMsSUFBQUEsSUFBSSxFQUFFO0FBQUVMLE1BQUFBO0FBQUY7QUFBUixHQUFyQjtBQUNELENBSEQ7ZUFLZUosRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlci9yb3V0ZXMvc2VjdXJlZCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vLi4vbW9kZWxzL3VzZXJcIjtcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cbmFwaS5nZXQoXCIvXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXIuZmluZEFsbCgpO1xuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHsgdXNlcnMgfSB9KTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "users",
        "User",
        "findAll",
        "status",
        "json",
        "data"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,QAAMC,KAAK,GAAG,MAAMC,cAAKC,OAAL,EAApB;AACAH,EAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,IAAI,EAAE;AAAEL,MAAAA;AAAF;AAAR,GAArB;AACD,CAHD;eAKeJ,G",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport User from \"../../models/user\";\n\nconst api = Router();\n\napi.get(\"/\", async (req, res) => {\n  const users = await User.findAll();\n  res.status(200).json({ data: { users } });\n});\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544452754000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/models\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/models/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/models/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/models/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/models/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.db = void 0;\n\nvar _sequelize = _interopRequireDefault(require(\"sequelize\"));\n\nvar _user = _interopRequireDefault(require(\"./user\"));\n\nvar _project = _interopRequireDefault(require(\"./project\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// postgres://USER:PASS@HOST:PORT/DBNAME\n// createdb sanji.dev\nconst db = new _sequelize.default(process.env.DATABASE_URL);\nexports.db = db;\n\n_user.default.init(db);\n\n_project.default.init(db);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRiIiwiU2VxdWVsaXplIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsIlVzZXIiLCJpbml0IiwiUHJvamVjdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUE7QUFDQTtBQUNPLE1BQU1BLEVBQUUsR0FBRyxJQUFJQyxrQkFBSixDQUFjQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsWUFBMUIsQ0FBWDs7O0FBRVBDLGNBQUtDLElBQUwsQ0FBVU4sRUFBVjs7QUFDQU8saUJBQVFELElBQVIsQ0FBYU4sRUFBYiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlci9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU2VxdWVsaXplIGZyb20gXCJzZXF1ZWxpemVcIjtcbmltcG9ydCBVc2VyIGZyb20gXCIuL3VzZXJcIjtcbmltcG9ydCBQcm9qZWN0IGZyb20gXCIuL3Byb2plY3RcIjtcblxuLy8gcG9zdGdyZXM6Ly9VU0VSOlBBU1NASE9TVDpQT1JUL0RCTkFNRVxuLy8gY3JlYXRlZGIgc2FuamkuZGV2XG5leHBvcnQgY29uc3QgZGIgPSBuZXcgU2VxdWVsaXplKHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCk7XG5cblVzZXIuaW5pdChkYik7XG5Qcm9qZWN0LmluaXQoZGIpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "db",
        "Sequelize",
        "process",
        "env",
        "DATABASE_URL",
        "User",
        "init",
        "Project"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;;;AAEA;AACA;AACO,MAAMA,EAAE,GAAG,IAAIC,kBAAJ,CAAcC,OAAO,CAACC,GAAR,CAAYC,YAA1B,CAAX;;;AAEPC,cAAKC,IAAL,CAAUN,EAAV;;AACAO,iBAAQD,IAAR,CAAaN,EAAb",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "sourcesContent": [
        "import Sequelize from \"sequelize\";\nimport User from \"./user\";\nimport Project from \"./project\";\n\n// postgres://USER:PASS@HOST:PORT/DBNAME\n// createdb sanji.dev\nexport const db = new Sequelize(process.env.DATABASE_URL);\n\nUser.init(db);\nProject.init(db);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544453197000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/models\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/models/project.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/models/project.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/models/project.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/models/project.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
        "sourceFileName": "project.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sequelize = _interopRequireWildcard(require(\"sequelize\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nclass Project extends _sequelize.Model {\n  static init(database) {\n    return super.init({\n      id: {\n        type: _sequelize.default.INTEGER,\n        primaryKey: true,\n        autoIncrement: true\n      },\n      name: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          notEmpty: true\n        }\n      }\n    }, {\n      tableName: \"projects\",\n      sequelize: database,\n      indexes: [{\n        unique: true,\n        fields: [\"id\"]\n      }]\n    });\n  }\n\n}\n\nexports.default = Project;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3QuanMiXSwibmFtZXMiOlsiUHJvamVjdCIsIk1vZGVsIiwiaW5pdCIsImRhdGFiYXNlIiwiaWQiLCJ0eXBlIiwiU2VxdWVsaXplIiwiSU5URUdFUiIsInByaW1hcnlLZXkiLCJhdXRvSW5jcmVtZW50IiwibmFtZSIsIlNUUklORyIsImFsbG93TnVsbCIsInZhbGlkYXRlIiwibm90RW1wdHkiLCJ0YWJsZU5hbWUiLCJzZXF1ZWxpemUiLCJpbmRleGVzIiwidW5pcXVlIiwiZmllbGRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFZSxNQUFNQSxPQUFOLFNBQXNCQyxnQkFBdEIsQ0FBNEI7QUFDekMsU0FBT0MsSUFBUCxDQUFZQyxRQUFaLEVBQXNCO0FBQ3BCLFdBQU8sTUFBTUQsSUFBTixDQUNMO0FBQ0VFLE1BQUFBLEVBQUUsRUFBRTtBQUNGQyxRQUFBQSxJQUFJLEVBQUVDLG1CQUFVQyxPQURkO0FBRUZDLFFBQUFBLFVBQVUsRUFBRSxJQUZWO0FBR0ZDLFFBQUFBLGFBQWEsRUFBRTtBQUhiLE9BRE47QUFNRUMsTUFBQUEsSUFBSSxFQUFFO0FBQ0pMLFFBQUFBLElBQUksRUFBRUMsbUJBQVVLLE1BRFo7QUFFSkMsUUFBQUEsU0FBUyxFQUFFLEtBRlA7QUFHSkMsUUFBQUEsUUFBUSxFQUFFO0FBQ1JDLFVBQUFBLFFBQVEsRUFBRTtBQURGO0FBSE47QUFOUixLQURLLEVBZUw7QUFDRUMsTUFBQUEsU0FBUyxFQUFFLFVBRGI7QUFFRUMsTUFBQUEsU0FBUyxFQUFFYixRQUZiO0FBSUVjLE1BQUFBLE9BQU8sRUFBRSxDQUNQO0FBQ0VDLFFBQUFBLE1BQU0sRUFBRSxJQURWO0FBRUVDLFFBQUFBLE1BQU0sRUFBRSxDQUFDLElBQUQ7QUFGVixPQURPO0FBSlgsS0FmSyxDQUFQO0FBMkJEOztBQTdCd0MiLCJzb3VyY2VSb290IjoiL1VzZXJzL2JiZW5vaXQvRGV2L2Jhc2ljcy9zZXJ2ZXIvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSwgeyBNb2RlbCB9IGZyb20gXCJzZXF1ZWxpemVcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdCBleHRlbmRzIE1vZGVsIHtcbiAgc3RhdGljIGluaXQoZGF0YWJhc2UpIHtcbiAgICByZXR1cm4gc3VwZXIuaW5pdChcbiAgICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICB0eXBlOiBTZXF1ZWxpemUuSU5URUdFUixcbiAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZToge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsXG4gICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbm90RW1wdHk6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogXCJwcm9qZWN0c1wiLFxuICAgICAgICBzZXF1ZWxpemU6IGRhdGFiYXNlLFxuXG4gICAgICAgIGluZGV4ZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgICAgICBmaWVsZHM6IFtcImlkXCJdXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgKTtcbiAgfVxufVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "project.js"
      ],
      "names": [
        "Project",
        "Model",
        "init",
        "database",
        "id",
        "type",
        "Sequelize",
        "INTEGER",
        "primaryKey",
        "autoIncrement",
        "name",
        "STRING",
        "allowNull",
        "validate",
        "notEmpty",
        "tableName",
        "sequelize",
        "indexes",
        "unique",
        "fields"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEe,MAAMA,OAAN,SAAsBC,gBAAtB,CAA4B;AACzC,SAAOC,IAAP,CAAYC,QAAZ,EAAsB;AACpB,WAAO,MAAMD,IAAN,CACL;AACEE,MAAAA,EAAE,EAAE;AACFC,QAAAA,IAAI,EAAEC,mBAAUC,OADd;AAEFC,QAAAA,UAAU,EAAE,IAFV;AAGFC,QAAAA,aAAa,EAAE;AAHb,OADN;AAMEC,MAAAA,IAAI,EAAE;AACJL,QAAAA,IAAI,EAAEC,mBAAUK,MADZ;AAEJC,QAAAA,SAAS,EAAE,KAFP;AAGJC,QAAAA,QAAQ,EAAE;AACRC,UAAAA,QAAQ,EAAE;AADF;AAHN;AANR,KADK,EAeL;AACEC,MAAAA,SAAS,EAAE,UADb;AAEEC,MAAAA,SAAS,EAAEb,QAFb;AAIEc,MAAAA,OAAO,EAAE,CACP;AACEC,QAAAA,MAAM,EAAE,IADV;AAEEC,QAAAA,MAAM,EAAE,CAAC,IAAD;AAFV,OADO;AAJX,KAfK,CAAP;AA2BD;;AA7BwC",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "sourcesContent": [
        "import Sequelize, { Model } from \"sequelize\";\n\nexport default class Project extends Model {\n  static init(database) {\n    return super.init(\n      {\n        id: {\n          type: Sequelize.INTEGER,\n          primaryKey: true,\n          autoIncrement: true\n        },\n        name: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            notEmpty: true\n          }\n        }\n      },\n      {\n        tableName: \"projects\",\n        sequelize: database,\n\n        indexes: [\n          {\n            unique: true,\n            fields: [\"id\"]\n          }\n        ]\n      }\n    );\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544433553000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/server.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/server.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/server.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/server.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server",
        "sourceFileName": "server.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _routes = _interopRequireDefault(require(\"./routes\"));\n\nvar _models = require(\"./models\");\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nrequire(\"./middlewares/passport\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst start = async () => {\n  try {\n    const host = process.env.HOST;\n    const port = parseInt(process.argv[2] || process.env.PORT);\n    const app = (0, _express.default)();\n    await _models.db.authenticate();\n\n    if (process.env.NODE_ENV) {\n      await _models.db.sync({\n        force: false\n      });\n    }\n\n    app.use((0, _cors.default)());\n    app.use(_passport.default.initialize());\n    app.use(_bodyParser.default.urlencoded({\n      extended: true\n    }));\n    app.use(_bodyParser.default.json());\n    app.get(\"/\", (request, response) => {\n      response.send(\"Please feel free to use our api with /api\");\n    });\n    app.use(\"/api\", _routes.default);\n    app.listen(port, () => {\n      console.log(`Server is running in ${host} at ${port}`);\n    });\n  } catch (ex) {\n    console.log(ex.message);\n  }\n}; // Let's Rock! :)\n\n\nstart();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJzdGFydCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiSE9TVCIsInBvcnQiLCJwYXJzZUludCIsImFyZ3YiLCJQT1JUIiwiYXBwIiwiZGF0YWJhc2UiLCJhdXRoZW50aWNhdGUiLCJOT0RFX0VOViIsInN5bmMiLCJmb3JjZSIsInVzZSIsInBhc3Nwb3J0IiwiaW5pdGlhbGl6ZSIsImJvZHlQYXJzZXIiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJqc29uIiwiZ2V0IiwicmVxdWVzdCIsInJlc3BvbnNlIiwic2VuZCIsImFwaSIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciLCJleCIsIm1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7Ozs7QUFFQSxNQUFNQSxLQUFLLEdBQUcsWUFBWTtBQUN4QixNQUFJO0FBQ0YsVUFBTUMsSUFBSSxHQUFHQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsSUFBekI7QUFDQSxVQUFNQyxJQUFJLEdBQUdDLFFBQVEsQ0FBQ0osT0FBTyxDQUFDSyxJQUFSLENBQWEsQ0FBYixLQUFtQkwsT0FBTyxDQUFDQyxHQUFSLENBQVlLLElBQWhDLENBQXJCO0FBQ0EsVUFBTUMsR0FBRyxHQUFHLHVCQUFaO0FBRUEsVUFBTUMsV0FBU0MsWUFBVCxFQUFOOztBQUVBLFFBQUlULE9BQU8sQ0FBQ0MsR0FBUixDQUFZUyxRQUFoQixFQUEwQjtBQUN4QixZQUFNRixXQUFTRyxJQUFULENBQWM7QUFBRUMsUUFBQUEsS0FBSyxFQUFFO0FBQVQsT0FBZCxDQUFOO0FBQ0Q7O0FBRURMLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRLG9CQUFSO0FBQ0FOLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRQyxrQkFBU0MsVUFBVCxFQUFSO0FBRUFSLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRRyxvQkFBV0MsVUFBWCxDQUFzQjtBQUFFQyxNQUFBQSxRQUFRLEVBQUU7QUFBWixLQUF0QixDQUFSO0FBQ0FYLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRRyxvQkFBV0csSUFBWCxFQUFSO0FBRUFaLElBQUFBLEdBQUcsQ0FBQ2EsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxPQUFELEVBQVVDLFFBQVYsS0FBdUI7QUFDbENBLE1BQUFBLFFBQVEsQ0FBQ0MsSUFBVCxDQUFjLDJDQUFkO0FBQ0QsS0FGRDtBQUlBaEIsSUFBQUEsR0FBRyxDQUFDTSxHQUFKLENBQVEsTUFBUixFQUFnQlcsZUFBaEI7QUFFQWpCLElBQUFBLEdBQUcsQ0FBQ2tCLE1BQUosQ0FBV3RCLElBQVgsRUFBaUIsTUFBTTtBQUNyQnVCLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLHdCQUF1QjVCLElBQUssT0FBTUksSUFBSyxFQUFwRDtBQUNELEtBRkQ7QUFHRCxHQTFCRCxDQTBCRSxPQUFPeUIsRUFBUCxFQUFXO0FBQ1hGLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxFQUFFLENBQUNDLE9BQWY7QUFDRDtBQUNGLENBOUJELEMsQ0FnQ0E7OztBQUNBL0IsS0FBSyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlciIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tIFwiYm9keS1wYXJzZXJcIjtcbmltcG9ydCBhcGkgZnJvbSBcIi4vcm91dGVzXCI7XG5pbXBvcnQgeyBkYiBhcyBkYXRhYmFzZSB9IGZyb20gXCIuL21vZGVsc1wiO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcblxuaW1wb3J0IFwiLi9taWRkbGV3YXJlcy9wYXNzcG9ydFwiO1xuXG5jb25zdCBzdGFydCA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBob3N0ID0gcHJvY2Vzcy5lbnYuSE9TVDtcbiAgICBjb25zdCBwb3J0ID0gcGFyc2VJbnQocHJvY2Vzcy5hcmd2WzJdIHx8IHByb2Nlc3MuZW52LlBPUlQpO1xuICAgIGNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuICAgIGF3YWl0IGRhdGFiYXNlLmF1dGhlbnRpY2F0ZSgpO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WKSB7XG4gICAgICBhd2FpdCBkYXRhYmFzZS5zeW5jKHsgZm9yY2U6IGZhbHNlIH0pO1xuICAgIH1cblxuICAgIGFwcC51c2UoY29ycygpKTtcbiAgICBhcHAudXNlKHBhc3Nwb3J0LmluaXRpYWxpemUoKSk7XG5cbiAgICBhcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbiAgICBhcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcblxuICAgIGFwcC5nZXQoXCIvXCIsIChyZXF1ZXN0LCByZXNwb25zZSkgPT4ge1xuICAgICAgcmVzcG9uc2Uuc2VuZChcIlBsZWFzZSBmZWVsIGZyZWUgdG8gdXNlIG91ciBhcGkgd2l0aCAvYXBpXCIpO1xuICAgIH0pO1xuXG4gICAgYXBwLnVzZShcIi9hcGlcIiwgYXBpKTtcblxuICAgIGFwcC5saXN0ZW4ocG9ydCwgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYFNlcnZlciBpcyBydW5uaW5nIGluICR7aG9zdH0gYXQgJHtwb3J0fWApO1xuICAgIH0pO1xuICB9IGNhdGNoIChleCkge1xuICAgIGNvbnNvbGUubG9nKGV4Lm1lc3NhZ2UpO1xuICB9XG59O1xuXG4vLyBMZXQncyBSb2NrISA6KVxuc3RhcnQoKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "start",
        "host",
        "process",
        "env",
        "HOST",
        "port",
        "parseInt",
        "argv",
        "PORT",
        "app",
        "database",
        "authenticate",
        "NODE_ENV",
        "sync",
        "force",
        "use",
        "passport",
        "initialize",
        "bodyParser",
        "urlencoded",
        "extended",
        "json",
        "get",
        "request",
        "response",
        "send",
        "api",
        "listen",
        "console",
        "log",
        "ex",
        "message"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;AAEA,MAAMA,KAAK,GAAG,YAAY;AACxB,MAAI;AACF,UAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAzB;AACA,UAAMC,IAAI,GAAGC,QAAQ,CAACJ,OAAO,CAACK,IAAR,CAAa,CAAb,KAAmBL,OAAO,CAACC,GAAR,CAAYK,IAAhC,CAArB;AACA,UAAMC,GAAG,GAAG,uBAAZ;AAEA,UAAMC,WAASC,YAAT,EAAN;;AAEA,QAAIT,OAAO,CAACC,GAAR,CAAYS,QAAhB,EAA0B;AACxB,YAAMF,WAASG,IAAT,CAAc;AAAEC,QAAAA,KAAK,EAAE;AAAT,OAAd,CAAN;AACD;;AAEDL,IAAAA,GAAG,CAACM,GAAJ,CAAQ,oBAAR;AACAN,IAAAA,GAAG,CAACM,GAAJ,CAAQC,kBAASC,UAAT,EAAR;AAEAR,IAAAA,GAAG,CAACM,GAAJ,CAAQG,oBAAWC,UAAX,CAAsB;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAtB,CAAR;AACAX,IAAAA,GAAG,CAACM,GAAJ,CAAQG,oBAAWG,IAAX,EAAR;AAEAZ,IAAAA,GAAG,CAACa,GAAJ,CAAQ,GAAR,EAAa,CAACC,OAAD,EAAUC,QAAV,KAAuB;AAClCA,MAAAA,QAAQ,CAACC,IAAT,CAAc,2CAAd;AACD,KAFD;AAIAhB,IAAAA,GAAG,CAACM,GAAJ,CAAQ,MAAR,EAAgBW,eAAhB;AAEAjB,IAAAA,GAAG,CAACkB,MAAJ,CAAWtB,IAAX,EAAiB,MAAM;AACrBuB,MAAAA,OAAO,CAACC,GAAR,CAAa,wBAAuB5B,IAAK,OAAMI,IAAK,EAApD;AACD,KAFD;AAGD,GA1BD,CA0BE,OAAOyB,EAAP,EAAW;AACXF,IAAAA,OAAO,CAACC,GAAR,CAAYC,EAAE,CAACC,OAAf;AACD;AACF,CA9BD,C,CAgCA;;;AACA/B,KAAK",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server",
      "sourcesContent": [
        "import express from \"express\";\nimport bodyParser from \"body-parser\";\nimport api from \"./routes\";\nimport { db as database } from \"./models\";\nimport passport from \"passport\";\nimport cors from \"cors\";\n\nimport \"./middlewares/passport\";\n\nconst start = async () => {\n  try {\n    const host = process.env.HOST;\n    const port = parseInt(process.argv[2] || process.env.PORT);\n    const app = express();\n\n    await database.authenticate();\n\n    if (process.env.NODE_ENV) {\n      await database.sync({ force: false });\n    }\n\n    app.use(cors());\n    app.use(passport.initialize());\n\n    app.use(bodyParser.urlencoded({ extended: true }));\n    app.use(bodyParser.json());\n\n    app.get(\"/\", (request, response) => {\n      response.send(\"Please feel free to use our api with /api\");\n    });\n\n    app.use(\"/api\", api);\n\n    app.listen(port, () => {\n      console.log(`Server is running in ${host} at ${port}`);\n    });\n  } catch (ex) {\n    console.log(ex.message);\n  }\n};\n\n// Let's Rock! :)\nstart();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544520458000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/routes/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/routes/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/routes/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _auth = _interopRequireDefault(require(\"./auth\"));\n\nvar _secured = _interopRequireDefault(require(\"./secured\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.get(\"/\", (req, res) => {\n  res.json({\n    name: \"sanji.Api\",\n    meta: {\n      version: \"1.0.0\",\n      status: \"running\"\n    }\n  });\n});\napi.use(\"/auth\", _auth.default);\napi.use(\"/\", _passport.default.authenticate(\"jwt\", {\n  session: false\n}), _secured.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsImpzb24iLCJuYW1lIiwibWV0YSIsInZlcnNpb24iLCJzdGF0dXMiLCJ1c2UiLCJhdXRoIiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzZXNzaW9uIiwic2VjdXJlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLHNCQUFaO0FBRUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUN6QkEsRUFBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVM7QUFDUEMsSUFBQUEsSUFBSSxFQUFFLFdBREM7QUFFUEMsSUFBQUEsSUFBSSxFQUFFO0FBQ0pDLE1BQUFBLE9BQU8sRUFBRSxPQURMO0FBRUpDLE1BQUFBLE1BQU0sRUFBRTtBQUZKO0FBRkMsR0FBVDtBQU9ELENBUkQ7QUFVQVIsR0FBRyxDQUFDUyxHQUFKLENBQVEsT0FBUixFQUFpQkMsYUFBakI7QUFDQVYsR0FBRyxDQUFDUyxHQUFKLENBQVEsR0FBUixFQUFhRSxrQkFBU0MsWUFBVCxDQUFzQixLQUF0QixFQUE2QjtBQUFFQyxFQUFBQSxPQUFPLEVBQUU7QUFBWCxDQUE3QixDQUFiLEVBQStEQyxnQkFBL0Q7ZUFFZWQsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlci9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xuaW1wb3J0IGF1dGggZnJvbSBcIi4vYXV0aFwiO1xuaW1wb3J0IHNlY3VyZWQgZnJvbSBcIi4vc2VjdXJlZFwiO1xuXG5jb25zdCBhcGkgPSBSb3V0ZXIoKTtcblxuYXBpLmdldChcIi9cIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICBuYW1lOiBcInNhbmppLkFwaVwiLFxuICAgIG1ldGE6IHtcbiAgICAgIHZlcnNpb246IFwiMS4wLjBcIixcbiAgICAgIHN0YXR1czogXCJydW5uaW5nXCJcbiAgICB9XG4gIH0pO1xufSk7XG5cbmFwaS51c2UoXCIvYXV0aFwiLCBhdXRoKTtcbmFwaS51c2UoXCIvXCIsIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZShcImp3dFwiLCB7IHNlc3Npb246IGZhbHNlIH0pLCBzZWN1cmVkKTtcblxuZXhwb3J0IGRlZmF1bHQgYXBpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "json",
        "name",
        "meta",
        "version",
        "status",
        "use",
        "auth",
        "passport",
        "authenticate",
        "session",
        "secured"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,EAAAA,GAAG,CAACC,IAAJ,CAAS;AACPC,IAAAA,IAAI,EAAE,WADC;AAEPC,IAAAA,IAAI,EAAE;AACJC,MAAAA,OAAO,EAAE,OADL;AAEJC,MAAAA,MAAM,EAAE;AAFJ;AAFC,GAAT;AAOD,CARD;AAUAR,GAAG,CAACS,GAAJ,CAAQ,OAAR,EAAiBC,aAAjB;AACAV,GAAG,CAACS,GAAJ,CAAQ,GAAR,EAAaE,kBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAA7B,CAAb,EAA+DC,gBAA/D;eAEed,G",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport passport from \"passport\";\nimport auth from \"./auth\";\nimport secured from \"./secured\";\n\nconst api = Router();\n\napi.get(\"/\", (req, res) => {\n  res.json({\n    name: \"sanji.Api\",\n    meta: {\n      version: \"1.0.0\",\n      status: \"running\"\n    }\n  });\n});\n\napi.use(\"/auth\", auth);\napi.use(\"/\", passport.authenticate(\"jwt\", { session: false }), secured);\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544452727000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/routes/auth.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/routes/auth.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/routes/auth.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/routes/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _user = _interopRequireDefault(require(\"../models/user\"));\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.post(\"/register\", async (req, res) => {\n  const {\n    nickname,\n    email,\n    password,\n    password_confirmation\n  } = req.body;\n\n  try {\n    const user = new _user.default({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n    await user.save();\n    const payload = {\n      uuid: user.uuid,\n      nickname,\n      email\n    };\n\n    const token = _jsonwebtoken.default.sign(payload, \"mysupersecret\");\n\n    res.status(201).json({\n      data: {\n        user\n      },\n      meta: {\n        token\n      }\n    });\n  } catch (err) {\n    console.log(err.message);\n    res.json({\n      err: err.message\n    });\n  }\n});\napi.post(\"/login\", async (req, res) => {\n  _passport.default.authenticate(\"local\", {\n    session: false\n  }, (err, user) => {\n    if (err) {\n      res.status(400).json({\n        error: {\n          message: err\n        }\n      });\n    }\n\n    const {\n      uuid,\n      nickname,\n      email\n    } = user;\n    const payload = {\n      uuid,\n      nickname,\n      email\n    };\n\n    const token = _jsonwebtoken.default.sign(payload, process.env.JWT_ENCRYPTION);\n\n    res.status(200).json({\n      data: {\n        user\n      },\n      meta: {\n        token\n      }\n    });\n  })(req, res);\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiYXBpIiwicG9zdCIsInJlcSIsInJlcyIsIm5pY2tuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInBhc3N3b3JkX2NvbmZpcm1hdGlvbiIsImJvZHkiLCJ1c2VyIiwiVXNlciIsInNhdmUiLCJwYXlsb2FkIiwidXVpZCIsInRva2VuIiwiand0Iiwic2lnbiIsInN0YXR1cyIsImpzb24iLCJkYXRhIiwibWV0YSIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzZXNzaW9uIiwiZXJyb3IiLCJwcm9jZXNzIiwiZW52IiwiSldUX0VOQ1JZUFRJT04iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLEdBQUcsR0FBRyxzQkFBWjtBQUVBQSxHQUFHLENBQUNDLElBQUosQ0FBUyxXQUFULEVBQXNCLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUN4QyxRQUFNO0FBQUVDLElBQUFBLFFBQUY7QUFBWUMsSUFBQUEsS0FBWjtBQUFtQkMsSUFBQUEsUUFBbkI7QUFBNkJDLElBQUFBO0FBQTdCLE1BQXVETCxHQUFHLENBQUNNLElBQWpFOztBQUVBLE1BQUk7QUFDRixVQUFNQyxJQUFJLEdBQUcsSUFBSUMsYUFBSixDQUFTO0FBQ3BCTixNQUFBQSxRQURvQjtBQUVwQkMsTUFBQUEsS0FGb0I7QUFHcEJDLE1BQUFBLFFBSG9CO0FBSXBCQyxNQUFBQTtBQUpvQixLQUFULENBQWI7QUFPQSxVQUFNRSxJQUFJLENBQUNFLElBQUwsRUFBTjtBQUVBLFVBQU1DLE9BQU8sR0FBRztBQUFFQyxNQUFBQSxJQUFJLEVBQUVKLElBQUksQ0FBQ0ksSUFBYjtBQUFtQlQsTUFBQUEsUUFBbkI7QUFBNkJDLE1BQUFBO0FBQTdCLEtBQWhCOztBQUNBLFVBQU1TLEtBQUssR0FBR0Msc0JBQUlDLElBQUosQ0FBU0osT0FBVCxFQUFrQixlQUFsQixDQUFkOztBQUVBVCxJQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUU7QUFBRVYsUUFBQUE7QUFBRixPQUFSO0FBQWtCVyxNQUFBQSxJQUFJLEVBQUU7QUFBRU4sUUFBQUE7QUFBRjtBQUF4QixLQUFyQjtBQUNELEdBZEQsQ0FjRSxPQUFPTyxHQUFQLEVBQVk7QUFDWkMsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlGLEdBQUcsQ0FBQ0csT0FBaEI7QUFDQXJCLElBQUFBLEdBQUcsQ0FBQ2UsSUFBSixDQUFTO0FBQUVHLE1BQUFBLEdBQUcsRUFBRUEsR0FBRyxDQUFDRztBQUFYLEtBQVQ7QUFDRDtBQUNGLENBckJEO0FBdUJBeEIsR0FBRyxDQUFDQyxJQUFKLENBQVMsUUFBVCxFQUFtQixPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDckNzQixvQkFBU0MsWUFBVCxDQUFzQixPQUF0QixFQUErQjtBQUFFQyxJQUFBQSxPQUFPLEVBQUU7QUFBWCxHQUEvQixFQUFtRCxDQUFDTixHQUFELEVBQU1aLElBQU4sS0FBZTtBQUNoRSxRQUFJWSxHQUFKLEVBQVM7QUFDUGxCLE1BQUFBLEdBQUcsQ0FBQ2MsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ25CVSxRQUFBQSxLQUFLLEVBQUU7QUFBRUosVUFBQUEsT0FBTyxFQUFFSDtBQUFYO0FBRFksT0FBckI7QUFHRDs7QUFFRCxVQUFNO0FBQUVSLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsUUFBNEJJLElBQWxDO0FBQ0EsVUFBTUcsT0FBTyxHQUFHO0FBQUVDLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsS0FBaEI7O0FBQ0EsVUFBTVMsS0FBSyxHQUFHQyxzQkFBSUMsSUFBSixDQUFTSixPQUFULEVBQWtCaUIsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGNBQTlCLENBQWQ7O0FBRUE1QixJQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUU7QUFBRVYsUUFBQUE7QUFBRixPQUFSO0FBQWtCVyxNQUFBQSxJQUFJLEVBQUU7QUFBRU4sUUFBQUE7QUFBRjtBQUF4QixLQUFyQjtBQUNELEdBWkQsRUFZR1osR0FaSCxFQVlRQyxHQVpSO0FBYUQsQ0FkRDtlQWdCZUgsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlci9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWxzL3VzZXJcIjtcbmltcG9ydCBwYXNzcG9ydCBmcm9tIFwicGFzc3BvcnRcIjtcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cbmFwaS5wb3N0KFwiL3JlZ2lzdGVyXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IG5pY2tuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHBhc3N3b3JkX2NvbmZpcm1hdGlvbiB9ID0gcmVxLmJvZHk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgbmlja25hbWUsXG4gICAgICBlbWFpbCxcbiAgICAgIHBhc3N3b3JkLFxuICAgICAgcGFzc3dvcmRfY29uZmlybWF0aW9uXG4gICAgfSk7XG5cbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcblxuICAgIGNvbnN0IHBheWxvYWQgPSB7IHV1aWQ6IHVzZXIudXVpZCwgbmlja25hbWUsIGVtYWlsIH07XG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihwYXlsb2FkLCBcIm15c3VwZXJzZWNyZXRcIik7XG5cbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IGRhdGE6IHsgdXNlciB9LCBtZXRhOiB7IHRva2VuIH0gfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICByZXMuanNvbih7IGVycjogZXJyLm1lc3NhZ2UgfSk7XG4gIH1cbn0pO1xuXG5hcGkucG9zdChcIi9sb2dpblwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgcGFzc3BvcnQuYXV0aGVudGljYXRlKFwibG9jYWxcIiwgeyBzZXNzaW9uOiBmYWxzZSB9LCAoZXJyLCB1c2VyKSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogeyBtZXNzYWdlOiBlcnIgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyB1dWlkLCBuaWNrbmFtZSwgZW1haWwgfSA9IHVzZXI7XG4gICAgY29uc3QgcGF5bG9hZCA9IHsgdXVpZCwgbmlja25hbWUsIGVtYWlsIH07XG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihwYXlsb2FkLCBwcm9jZXNzLmVudi5KV1RfRU5DUllQVElPTik7XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHsgdXNlciB9LCBtZXRhOiB7IHRva2VuIH0gfSk7XG4gIH0pKHJlcSwgcmVzKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "api",
        "post",
        "req",
        "res",
        "nickname",
        "email",
        "password",
        "password_confirmation",
        "body",
        "user",
        "User",
        "save",
        "payload",
        "uuid",
        "token",
        "jwt",
        "sign",
        "status",
        "json",
        "data",
        "meta",
        "err",
        "console",
        "log",
        "message",
        "passport",
        "authenticate",
        "session",
        "error",
        "process",
        "env",
        "JWT_ENCRYPTION"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,IAAJ,CAAS,WAAT,EAAsB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACxC,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,KAAZ;AAAmBC,IAAAA,QAAnB;AAA6BC,IAAAA;AAA7B,MAAuDL,GAAG,CAACM,IAAjE;;AAEA,MAAI;AACF,UAAMC,IAAI,GAAG,IAAIC,aAAJ,CAAS;AACpBN,MAAAA,QADoB;AAEpBC,MAAAA,KAFoB;AAGpBC,MAAAA,QAHoB;AAIpBC,MAAAA;AAJoB,KAAT,CAAb;AAOA,UAAME,IAAI,CAACE,IAAL,EAAN;AAEA,UAAMC,OAAO,GAAG;AAAEC,MAAAA,IAAI,EAAEJ,IAAI,CAACI,IAAb;AAAmBT,MAAAA,QAAnB;AAA6BC,MAAAA;AAA7B,KAAhB;;AACA,UAAMS,KAAK,GAAGC,sBAAIC,IAAJ,CAASJ,OAAT,EAAkB,eAAlB,CAAd;;AAEAT,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,IAAI,EAAE;AAAEV,QAAAA;AAAF,OAAR;AAAkBW,MAAAA,IAAI,EAAE;AAAEN,QAAAA;AAAF;AAAxB,KAArB;AACD,GAdD,CAcE,OAAOO,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACArB,IAAAA,GAAG,CAACe,IAAJ,CAAS;AAAEG,MAAAA,GAAG,EAAEA,GAAG,CAACG;AAAX,KAAT;AACD;AACF,CArBD;AAuBAxB,GAAG,CAACC,IAAJ,CAAS,QAAT,EAAmB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACrCsB,oBAASC,YAAT,CAAsB,OAAtB,EAA+B;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAA/B,EAAmD,CAACN,GAAD,EAAMZ,IAAN,KAAe;AAChE,QAAIY,GAAJ,EAAS;AACPlB,MAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBU,QAAAA,KAAK,EAAE;AAAEJ,UAAAA,OAAO,EAAEH;AAAX;AADY,OAArB;AAGD;;AAED,UAAM;AAAER,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,QAA4BI,IAAlC;AACA,UAAMG,OAAO,GAAG;AAAEC,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,KAAhB;;AACA,UAAMS,KAAK,GAAGC,sBAAIC,IAAJ,CAASJ,OAAT,EAAkBiB,OAAO,CAACC,GAAR,CAAYC,cAA9B,CAAd;;AAEA5B,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,IAAI,EAAE;AAAEV,QAAAA;AAAF,OAAR;AAAkBW,MAAAA,IAAI,EAAE;AAAEN,QAAAA;AAAF;AAAxB,KAArB;AACD,GAZD,EAYGZ,GAZH,EAYQC,GAZR;AAaD,CAdD;eAgBeH,G",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport jwt from \"jsonwebtoken\";\nimport User from \"../models/user\";\nimport passport from \"passport\";\n\nconst api = Router();\n\napi.post(\"/register\", async (req, res) => {\n  const { nickname, email, password, password_confirmation } = req.body;\n\n  try {\n    const user = new User({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n\n    await user.save();\n\n    const payload = { uuid: user.uuid, nickname, email };\n    const token = jwt.sign(payload, \"mysupersecret\");\n\n    res.status(201).json({ data: { user }, meta: { token } });\n  } catch (err) {\n    console.log(err.message);\n    res.json({ err: err.message });\n  }\n});\n\napi.post(\"/login\", async (req, res) => {\n  passport.authenticate(\"local\", { session: false }, (err, user) => {\n    if (err) {\n      res.status(400).json({\n        error: { message: err }\n      });\n    }\n\n    const { uuid, nickname, email } = user;\n    const payload = { uuid, nickname, email };\n    const token = jwt.sign(payload, process.env.JWT_ENCRYPTION);\n\n    res.status(200).json({ data: { user }, meta: { token } });\n  })(req, res);\n});\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544453218000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/models/user.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/models/user.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/models/user.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/models/user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sequelize = _interopRequireWildcard(require(\"sequelize\"));\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nclass User extends _sequelize.Model {\n  static init(database) {\n    return super.init({\n      uuid: {\n        type: _sequelize.default.UUID,\n        primaryKey: true,\n        defaultValue: _sequelize.default.UUIDV4\n      },\n      nickname: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        unique: {\n          args: true,\n          msg: \"Nickname already in use\"\n        },\n        validate: {\n          isLongEnough(v) {\n            if (v.length < 5) {\n              throw new Error(\"Nickname must have at least 5 characters\");\n            }\n          }\n\n        }\n      },\n      email: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          isEmail: true\n        },\n        unique: {\n          args: true,\n          msg: \"Email already in use\"\n        }\n      },\n      password_digest: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          notEmpty: true\n        }\n      },\n      password: {\n        type: _sequelize.default.VIRTUAL,\n        validate: {\n          isLongEnough(v) {\n            if (v.length < 7) {\n              throw new Error(\"Password must have at least 7 characters\");\n            }\n          }\n\n        }\n      },\n      password_confirmation: {\n        type: _sequelize.default.VIRTUAL,\n        validate: {\n          isEqual(v) {\n            if (v !== this.password) {\n              throw new Error(\"Password confirmation doesn't match password\");\n            }\n          }\n\n        }\n      }\n    }, {\n      tableName: \"users\",\n      sequelize: database,\n      indexes: [{\n        unique: true,\n        fields: [\"uuid\", \"nickname\", \"email\"]\n      }],\n      hooks: {\n        async beforeValidate(userInstance) {\n          userInstance.password_digest = await userInstance.generateHash();\n        },\n\n        async beforeSave(userInstance) {\n          if (!userInstance.isNewRecord && userInstance.changed(\"password\")) {\n            userInstance.password_digest = await userInstance.generateHash();\n          }\n        }\n\n      }\n    });\n  }\n\n  async generateHash() {\n    const SALT_ROUND = 5;\n    const hash = await _bcrypt.default.hash(this.password, SALT_ROUND);\n\n    if (!hash) {\n      throw new Error(\"Can't hash password\");\n    }\n\n    return hash;\n  }\n\n  async checkPassword(password) {\n    return _bcrypt.default.compare(password, this.password_digest);\n  }\n\n  toJSON() {\n    const values = Object.assign({}, this.get());\n    delete values.password_digest;\n    return values;\n  }\n\n}\n\nexports.default = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiVXNlciIsIk1vZGVsIiwiaW5pdCIsImRhdGFiYXNlIiwidXVpZCIsInR5cGUiLCJTZXF1ZWxpemUiLCJVVUlEIiwicHJpbWFyeUtleSIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsIm5pY2tuYW1lIiwiU1RSSU5HIiwiYWxsb3dOdWxsIiwidW5pcXVlIiwiYXJncyIsIm1zZyIsInZhbGlkYXRlIiwiaXNMb25nRW5vdWdoIiwidiIsImxlbmd0aCIsIkVycm9yIiwiZW1haWwiLCJpc0VtYWlsIiwicGFzc3dvcmRfZGlnZXN0Iiwibm90RW1wdHkiLCJwYXNzd29yZCIsIlZJUlRVQUwiLCJwYXNzd29yZF9jb25maXJtYXRpb24iLCJpc0VxdWFsIiwidGFibGVOYW1lIiwic2VxdWVsaXplIiwiaW5kZXhlcyIsImZpZWxkcyIsImhvb2tzIiwiYmVmb3JlVmFsaWRhdGUiLCJ1c2VySW5zdGFuY2UiLCJnZW5lcmF0ZUhhc2giLCJiZWZvcmVTYXZlIiwiaXNOZXdSZWNvcmQiLCJjaGFuZ2VkIiwiU0FMVF9ST1VORCIsImhhc2giLCJiY3J5cHQiLCJjaGVja1Bhc3N3b3JkIiwiY29tcGFyZSIsInRvSlNPTiIsInZhbHVlcyIsIk9iamVjdCIsImFzc2lnbiIsImdldCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7Ozs7QUFFZSxNQUFNQSxJQUFOLFNBQW1CQyxnQkFBbkIsQ0FBeUI7QUFDdEMsU0FBT0MsSUFBUCxDQUFZQyxRQUFaLEVBQXNCO0FBQ3BCLFdBQU8sTUFBTUQsSUFBTixDQUNMO0FBQ0VFLE1BQUFBLElBQUksRUFBRTtBQUNKQyxRQUFBQSxJQUFJLEVBQUVDLG1CQUFVQyxJQURaO0FBRUpDLFFBQUFBLFVBQVUsRUFBRSxJQUZSO0FBR0pDLFFBQUFBLFlBQVksRUFBRUgsbUJBQVVJO0FBSHBCLE9BRFI7QUFNRUMsTUFBQUEsUUFBUSxFQUFFO0FBQ1JOLFFBQUFBLElBQUksRUFBRUMsbUJBQVVNLE1BRFI7QUFF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SXJCLEtBQUosQ0FBVSxxQkFBVixDQUFOO0FBQ0Q7O0FBRUQsV0FBT3FCLElBQVA7QUFDRDs7QUFFRCxRQUFNRSxhQUFOLENBQW9CbEIsUUFBcEIsRUFBOEI7QUFDNUIsV0FBT2lCLGdCQUFPRSxPQUFQLENBQWVuQixRQUFmLEVBQXlCLEtBQUtGLGVBQTlCLENBQVA7QUFDRDs7QUFFRHNCLEVBQUFBLE1BQU0sR0FBRztBQUNQLFVBQU1DLE1BQU0sR0FBR0MsTUFBTSxDQUFDQyxNQUFQLENBQWMsRUFBZCxFQUFrQixLQUFLQyxHQUFMLEVBQWxCLENBQWY7QUFFQSxXQUFPSCxNQUFNLENBQUN2QixlQUFkO0FBRUEsV0FBT3VCLE1BQVA7QUFDRDs7QUE5R3FDIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9iYmVub2l0L0Rldi9iYXNpY3Mvc2VydmVyL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTZXF1ZWxpemUsIHsgTW9kZWwgfSBmcm9tIFwic2VxdWVsaXplXCI7XG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlciBleHRlbmRzIE1vZGVsIHtcbiAgc3RhdGljIGluaXQoZGF0YWJhc2UpIHtcbiAgICByZXR1cm4gc3VwZXIuaW5pdChcbiAgICAgIHtcbiAgICAgICAgdXVpZDoge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5VVUlELFxuICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBTZXF1ZWxpemUuVVVJRFY0XG4gICAgICAgIH0sXG4gICAgICAgIG5pY2tuYW1lOiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgIHVuaXF1ZToge1xuICAgICAgICAgICAgYXJnczogdHJ1ZSxcbiAgICAgICAgICAgIG1zZzogXCJOaWNrbmFtZSBhbHJlYWR5IGluIHVzZVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgaXNMb25nRW5vdWdoKHYpIHtcbiAgICAgICAgICAgICAgaWYgKHYubGVuZ3RoIDwgNSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5pY2tuYW1lIG11c3QgaGF2ZSBhdCBsZWFzdCA1IGNoYXJhY3RlcnNcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBpc0VtYWlsOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB1bmlxdWU6IHtcbiAgICAgICAgICAgIGFyZ3M6IHRydWUsXG4gICAgICAgICAgICBtc2c6IFwiRW1haWwgYWxyZWFkeSBpbiB1c2VcIlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcGFzc3dvcmRfZGlnZXN0OiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBub3RFbXB0eTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcGFzc3dvcmQ6IHtcbiAgICAgICAgICB0eXBlOiBTZXF1ZWxpemUuVklSVFVBTCxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgaXNMb25nRW5vdWdoKHYpIHtcbiAgICAgICAgICAgICAgaWYgKHYubGVuZ3RoIDwgNykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhc3N3b3JkIG11c3QgaGF2ZSBhdCBsZWFzdCA3IGNoYXJhY3RlcnNcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvbjoge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5WSVJUVUFMLFxuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBpc0VxdWFsKHYpIHtcbiAgICAgICAgICAgICAgaWYgKHYgIT09IHRoaXMucGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXNzd29yZCBjb25maXJtYXRpb24gZG9lc24ndCBtYXRjaCBwYXNzd29yZFwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcInVzZXJzXCIsXG4gICAgICAgIHNlcXVlbGl6ZTogZGF0YWJhc2UsXG5cbiAgICAgICAgaW5kZXhlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgICAgIGZpZWxkczogW1widXVpZFwiLCBcIm5pY2tuYW1lXCIsIFwiZW1haWxcIl1cbiAgICAgICAgICB9XG4gICAgICAgIF0sXG5cbiAgICAgICAgaG9va3M6IHtcbiAgICAgICAgICBhc3luYyBiZWZvcmVWYWxpZGF0ZSh1c2VySW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHVzZXJJbnN0YW5jZS5wYXNzd29yZF9kaWdlc3QgPSBhd2FpdCB1c2VySW5zdGFuY2UuZ2VuZXJhdGVIYXNoKCk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGFzeW5jIGJlZm9yZVNhdmUodXNlckluc3RhbmNlKSB7XG4gICAgICAgICAgICBpZiAoIXVzZXJJbnN0YW5jZS5pc05ld1JlY29yZCAmJiB1c2VySW5zdGFuY2UuY2hhbmdlZChcInBhc3N3b3JkXCIpKSB7XG4gICAgICAgICAgICAgIHVzZXJJbnN0YW5jZS5wYXNzd29yZF9kaWdlc3QgPSBhd2FpdCB1c2VySW5zdGFuY2UuZ2VuZXJhdGVIYXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlSGFzaCgpIHtcbiAgICBjb25zdCBTQUxUX1JPVU5EID0gNTtcblxuICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBiY3J5cHQuaGFzaCh0aGlzLnBhc3N3b3JkLCBTQUxUX1JPVU5EKTtcbiAgICBpZiAoIWhhc2gpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGhhc2ggcGFzc3dvcmRcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhhc2g7XG4gIH1cblxuICBhc3luYyBjaGVja1Bhc3N3b3JkKHBhc3N3b3JkKSB7XG4gICAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB0aGlzLnBhc3N3b3JkX2RpZ2VzdCk7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgY29uc3QgdmFsdWVzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nZXQoKSk7XG5cbiAgICBkZWxldGUgdmFsdWVzLnBhc3N3b3JkX2RpZ2VzdDtcblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "User",
        "Model",
        "init",
        "database",
        "uuid",
        "type",
        "Sequelize",
        "UUID",
        "primaryKey",
        "defaultValue",
        "UUIDV4",
        "nickname",
        "STRING",
        "allowNull",
        "unique",
        "args",
        "msg",
        "validate",
        "isLongEnough",
        "v",
        "length",
        "Error",
        "email",
        "isEmail",
        "password_digest",
        "notEmpty",
        "password",
        "VIRTUAL",
        "password_confirmation",
        "isEqual",
        "tableName",
        "sequelize",
        "indexes",
        "fields",
        "hooks",
        "beforeValidate",
        "userInstance",
        "generateHash",
        "beforeSave",
        "isNewRecord",
        "changed",
        "SALT_ROUND",
        "hash",
        "bcrypt",
        "checkPassword",
        "compare",
        "toJSON",
        "values",
        "Object",
        "assign",
        "get"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "sourcesContent": [
        "import Sequelize, { Model } from \"sequelize\";\nimport bcrypt from \"bcrypt\";\n\nexport default class User extends Model {\n  static init(database) {\n    return super.init(\n      {\n        uuid: {\n          type: Sequelize.UUID,\n          primaryKey: true,\n          defaultValue: Sequelize.UUIDV4\n        },\n        nickname: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          unique: {\n            args: true,\n            msg: \"Nickname already in use\"\n          },\n          validate: {\n            isLongEnough(v) {\n              if (v.length < 5) {\n                throw new Error(\"Nickname must have at least 5 characters\");\n              }\n            }\n          }\n        },\n        email: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            isEmail: true\n          },\n          unique: {\n            args: true,\n            msg: \"Email already in use\"\n          }\n        },\n        password_digest: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            notEmpty: true\n          }\n        },\n        password: {\n          type: Sequelize.VIRTUAL,\n          validate: {\n            isLongEnough(v) {\n              if (v.length < 7) {\n                throw new Error(\"Password must have at least 7 characters\");\n              }\n            }\n          }\n        },\n        password_confirmation: {\n          type: Sequelize.VIRTUAL,\n          validate: {\n            isEqual(v) {\n              if (v !== this.password) {\n                throw new Error(\"Password confirmation doesn't match password\");\n              }\n            }\n          }\n        }\n      },\n      {\n        tableName: \"users\",\n        sequelize: database,\n\n        indexes: [\n          {\n            unique: true,\n            fields: [\"uuid\", \"nickname\", \"email\"]\n          }\n        ],\n\n        hooks: {\n          async beforeValidate(userInstance) {\n            userInstance.password_digest = await userInstance.generateHash();\n          },\n\n          async beforeSave(userInstance) {\n            if (!userInstance.isNewRecord && userInstance.changed(\"password\")) {\n              userInstance.password_digest = await userInstance.generateHash();\n            }\n          }\n        }\n      }\n    );\n  }\n\n  async generateHash() {\n    const SALT_ROUND = 5;\n\n    const hash = await bcrypt.hash(this.password, SALT_ROUND);\n    if (!hash) {\n      throw new Error(\"Can't hash password\");\n    }\n\n    return hash;\n  }\n\n  async checkPassword(password) {\n    return bcrypt.compare(password, this.password_digest);\n  }\n\n  toJSON() {\n    const values = Object.assign({}, this.get());\n\n    delete values.password_digest;\n\n    return values;\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544454448000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/routes/secured\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/routes/secured/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/routes/secured/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/routes/secured/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/routes/secured/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _users = _interopRequireDefault(require(\"./users\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.use(\"/users\", _users.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwaSIsInVzZSIsInVzZXJzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxHQUFHLEdBQUcsc0JBQVo7QUFFQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsUUFBUixFQUFrQkMsY0FBbEI7ZUFFZUYsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlci9yb3V0ZXMvc2VjdXJlZCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgdXNlcnMgZnJvbSBcIi4vdXNlcnNcIjtcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cbmFwaS51c2UoXCIvdXNlcnNcIiwgdXNlcnMpO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "api",
        "use",
        "users"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,QAAR,EAAkBC,cAAlB;eAEeF,G",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport users from \"./users\";\n\nconst api = Router();\n\napi.use(\"/users\", users);\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544452766000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/routes/secured\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/routes/secured/users.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/routes/secured/users.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/routes/secured/users.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/routes/secured/users.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
        "sourceFileName": "users.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _user = _interopRequireDefault(require(\"../../models/user\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.get(\"/\", async (req, res) => {\n  const users = await _user.default.findAll();\n  res.status(200).json({\n    data: {\n      users\n    }\n  });\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsInVzZXJzIiwiVXNlciIsImZpbmRBbGwiLCJzdGF0dXMiLCJqc29uIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLHNCQUFaO0FBRUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLEdBQVIsRUFBYSxPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDL0IsUUFBTUMsS0FBSyxHQUFHLE1BQU1DLGNBQUtDLE9BQUwsRUFBcEI7QUFDQUgsRUFBQUEsR0FBRyxDQUFDSSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRUMsSUFBQUEsSUFBSSxFQUFFO0FBQUVMLE1BQUFBO0FBQUY7QUFBUixHQUFyQjtBQUNELENBSEQ7ZUFLZUosRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlci9yb3V0ZXMvc2VjdXJlZCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vLi4vbW9kZWxzL3VzZXJcIjtcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cbmFwaS5nZXQoXCIvXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXIuZmluZEFsbCgpO1xuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHsgdXNlcnMgfSB9KTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "users",
        "User",
        "findAll",
        "status",
        "json",
        "data"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,QAAMC,KAAK,GAAG,MAAMC,cAAKC,OAAL,EAApB;AACAH,EAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,IAAI,EAAE;AAAEL,MAAAA;AAAF;AAAR,GAArB;AACD,CAHD;eAKeJ,G",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport User from \"../../models/user\";\n\nconst api = Router();\n\napi.get(\"/\", async (req, res) => {\n  const users = await User.findAll();\n  res.status(200).json({ data: { users } });\n});\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544452754000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/models/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/models/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/models/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/models/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.db = void 0;\n\nvar _sequelize = _interopRequireDefault(require(\"sequelize\"));\n\nvar _user = _interopRequireDefault(require(\"./user\"));\n\nvar _project = _interopRequireDefault(require(\"./project\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// postgres://USER:PASS@HOST:PORT/DBNAME\n// createdb sanji.dev\nconst db = new _sequelize.default(process.env.DATABASE_URL);\nexports.db = db;\n\n_user.default.init(db);\n\n_project.default.init(db);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRiIiwiU2VxdWVsaXplIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsIlVzZXIiLCJpbml0IiwiUHJvamVjdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUE7QUFDQTtBQUNPLE1BQU1BLEVBQUUsR0FBRyxJQUFJQyxrQkFBSixDQUFjQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsWUFBMUIsQ0FBWDs7O0FBRVBDLGNBQUtDLElBQUwsQ0FBVU4sRUFBVjs7QUFDQU8saUJBQVFELElBQVIsQ0FBYU4sRUFBYiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlci9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU2VxdWVsaXplIGZyb20gXCJzZXF1ZWxpemVcIjtcbmltcG9ydCBVc2VyIGZyb20gXCIuL3VzZXJcIjtcbmltcG9ydCBQcm9qZWN0IGZyb20gXCIuL3Byb2plY3RcIjtcblxuLy8gcG9zdGdyZXM6Ly9VU0VSOlBBU1NASE9TVDpQT1JUL0RCTkFNRVxuLy8gY3JlYXRlZGIgc2FuamkuZGV2XG5leHBvcnQgY29uc3QgZGIgPSBuZXcgU2VxdWVsaXplKHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCk7XG5cblVzZXIuaW5pdChkYik7XG5Qcm9qZWN0LmluaXQoZGIpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "db",
        "Sequelize",
        "process",
        "env",
        "DATABASE_URL",
        "User",
        "init",
        "Project"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;;;AAEA;AACA;AACO,MAAMA,EAAE,GAAG,IAAIC,kBAAJ,CAAcC,OAAO,CAACC,GAAR,CAAYC,YAA1B,CAAX;;;AAEPC,cAAKC,IAAL,CAAUN,EAAV;;AACAO,iBAAQD,IAAR,CAAaN,EAAb",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "sourcesContent": [
        "import Sequelize from \"sequelize\";\nimport User from \"./user\";\nimport Project from \"./project\";\n\n// postgres://USER:PASS@HOST:PORT/DBNAME\n// createdb sanji.dev\nexport const db = new Sequelize(process.env.DATABASE_URL);\n\nUser.init(db);\nProject.init(db);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544453197000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/models/project.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/models/project.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/models/project.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/models/project.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
        "sourceFileName": "project.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sequelize = _interopRequireWildcard(require(\"sequelize\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nclass Project extends _sequelize.Model {\n  static init(database) {\n    return super.init({\n      id: {\n        type: _sequelize.default.INTEGER,\n        primaryKey: true,\n        autoIncrement: true\n      },\n      name: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          notEmpty: true\n        }\n      }\n    }, {\n      tableName: \"projects\",\n      sequelize: database,\n      indexes: [{\n        unique: true,\n        fields: [\"id\"]\n      }]\n    });\n  }\n\n}\n\nexports.default = Project;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3QuanMiXSwibmFtZXMiOlsiUHJvamVjdCIsIk1vZGVsIiwiaW5pdCIsImRhdGFiYXNlIiwiaWQiLCJ0eXBlIiwiU2VxdWVsaXplIiwiSU5URUdFUiIsInByaW1hcnlLZXkiLCJhdXRvSW5jcmVtZW50IiwibmFtZSIsIlNUUklORyIsImFsbG93TnVsbCIsInZhbGlkYXRlIiwibm90RW1wdHkiLCJ0YWJsZU5hbWUiLCJzZXF1ZWxpemUiLCJpbmRleGVzIiwidW5pcXVlIiwiZmllbGRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFZSxNQUFNQSxPQUFOLFNBQXNCQyxnQkFBdEIsQ0FBNEI7QUFDekMsU0FBT0MsSUFBUCxDQUFZQyxRQUFaLEVBQXNCO0FBQ3BCLFdBQU8sTUFBTUQsSUFBTixDQUNMO0FBQ0VFLE1BQUFBLEVBQUUsRUFBRTtBQUNGQyxRQUFBQSxJQUFJLEVBQUVDLG1CQUFVQyxPQURkO0FBRUZDLFFBQUFBLFVBQVUsRUFBRSxJQUZWO0FBR0ZDLFFBQUFBLGFBQWEsRUFBRTtBQUhiLE9BRE47QUFNRUMsTUFBQUEsSUFBSSxFQUFFO0FBQ0pMLFFBQUFBLElBQUksRUFBRUMsbUJBQVVLLE1BRFo7QUFFSkMsUUFBQUEsU0FBUyxFQUFFLEtBRlA7QUFHSkMsUUFBQUEsUUFBUSxFQUFFO0FBQ1JDLFVBQUFBLFFBQVEsRUFBRTtBQURGO0FBSE47QUFOUixLQURLLEVBZUw7QUFDRUMsTUFBQUEsU0FBUyxFQUFFLFVBRGI7QUFFRUMsTUFBQUEsU0FBUyxFQUFFYixRQUZiO0FBSUVjLE1BQUFBLE9BQU8sRUFBRSxDQUNQO0FBQ0VDLFFBQUFBLE1BQU0sRUFBRSxJQURWO0FBRUVDLFFBQUFBLE1BQU0sRUFBRSxDQUFDLElBQUQ7QUFGVixPQURPO0FBSlgsS0FmSyxDQUFQO0FBMkJEOztBQTdCd0MiLCJzb3VyY2VSb290IjoiL1VzZXJzL2JiZW5vaXQvRGV2L2Jhc2ljcy9zZXJ2ZXIvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSwgeyBNb2RlbCB9IGZyb20gXCJzZXF1ZWxpemVcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdCBleHRlbmRzIE1vZGVsIHtcbiAgc3RhdGljIGluaXQoZGF0YWJhc2UpIHtcbiAgICByZXR1cm4gc3VwZXIuaW5pdChcbiAgICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICB0eXBlOiBTZXF1ZWxpemUuSU5URUdFUixcbiAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZToge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsXG4gICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbm90RW1wdHk6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogXCJwcm9qZWN0c1wiLFxuICAgICAgICBzZXF1ZWxpemU6IGRhdGFiYXNlLFxuXG4gICAgICAgIGluZGV4ZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgICAgICBmaWVsZHM6IFtcImlkXCJdXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgKTtcbiAgfVxufVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "project.js"
      ],
      "names": [
        "Project",
        "Model",
        "init",
        "database",
        "id",
        "type",
        "Sequelize",
        "INTEGER",
        "primaryKey",
        "autoIncrement",
        "name",
        "STRING",
        "allowNull",
        "validate",
        "notEmpty",
        "tableName",
        "sequelize",
        "indexes",
        "unique",
        "fields"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEe,MAAMA,OAAN,SAAsBC,gBAAtB,CAA4B;AACzC,SAAOC,IAAP,CAAYC,QAAZ,EAAsB;AACpB,WAAO,MAAMD,IAAN,CACL;AACEE,MAAAA,EAAE,EAAE;AACFC,QAAAA,IAAI,EAAEC,mBAAUC,OADd;AAEFC,QAAAA,UAAU,EAAE,IAFV;AAGFC,QAAAA,aAAa,EAAE;AAHb,OADN;AAMEC,MAAAA,IAAI,EAAE;AACJL,QAAAA,IAAI,EAAEC,mBAAUK,MADZ;AAEJC,QAAAA,SAAS,EAAE,KAFP;AAGJC,QAAAA,QAAQ,EAAE;AACRC,UAAAA,QAAQ,EAAE;AADF;AAHN;AANR,KADK,EAeL;AACEC,MAAAA,SAAS,EAAE,UADb;AAEEC,MAAAA,SAAS,EAAEb,QAFb;AAIEc,MAAAA,OAAO,EAAE,CACP;AACEC,QAAAA,MAAM,EAAE,IADV;AAEEC,QAAAA,MAAM,EAAE,CAAC,IAAD;AAFV,OADO;AAJX,KAfK,CAAP;AA2BD;;AA7BwC",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "sourcesContent": [
        "import Sequelize, { Model } from \"sequelize\";\n\nexport default class Project extends Model {\n  static init(database) {\n    return super.init(\n      {\n        id: {\n          type: Sequelize.INTEGER,\n          primaryKey: true,\n          autoIncrement: true\n        },\n        name: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            notEmpty: true\n          }\n        }\n      },\n      {\n        tableName: \"projects\",\n        sequelize: database,\n\n        indexes: [\n          {\n            unique: true,\n            fields: [\"id\"]\n          }\n        ]\n      }\n    );\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544433553000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/middlewares\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/middlewares/passport.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/middlewares",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/middlewares/passport.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/middlewares/passport.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/middlewares/passport.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/middlewares",
        "sourceFileName": "passport.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _passportLocal = require(\"passport-local\");\n\nvar _passportJwt = require(\"passport-jwt\");\n\nvar _user = _interopRequireDefault(require(\"../models/user\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_passport.default.use(new _passportLocal.Strategy({\n  usernameField: \"nickname\",\n  passwordField: \"password\"\n}, async (nickname, password, next) => {\n  const user = await _user.default.findOne({\n    where: {\n      nickname\n    }\n  });\n\n  if (!user) {\n    return next(\"Nickname doesn't exist\");\n  }\n\n  if (!(await user.checkPassword(password))) {\n    return next(\"Password doesn't match\");\n  }\n\n  return next(false, user);\n}));\n\n_passport.default.use(new _passportJwt.Strategy({\n  jwtFromRequest: _passportJwt.ExtractJwt.fromAuthHeaderAsBearerToken(),\n  secretOrKey: process.env.JWT_ENCRYPTION\n}, async (jwtPayload, next) => {\n  try {\n    const user = await _user.default.findOne({\n      where: {\n        uuid: jwtPayload.uuid\n      }\n    });\n\n    if (!user) {\n      return next(\"User doesn't exist\");\n    }\n\n    return next(false, user);\n  } catch (err) {\n    return next(err.message);\n  }\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3Nwb3J0LmpzIl0sIm5hbWVzIjpbInBhc3Nwb3J0IiwidXNlIiwiTG9jYWxTdHJhdGVneSIsInVzZXJuYW1lRmllbGQiLCJwYXNzd29yZEZpZWxkIiwibmlja25hbWUiLCJwYXNzd29yZCIsIm5leHQiLCJ1c2VyIiwiVXNlciIsImZpbmRPbmUiLCJ3aGVyZSIsImNoZWNrUGFzc3dvcmQiLCJKd3RTdHJhdGVneSIsImp3dEZyb21SZXF1ZXN0IiwiRXh0cmFjdEp3dCIsImZyb21BdXRoSGVhZGVyQXNCZWFyZXJUb2tlbiIsInNlY3JldE9yS2V5IiwicHJvY2VzcyIsImVudiIsIkpXVF9FTkNSWVBUSU9OIiwiand0UGF5bG9hZCIsInV1aWQiLCJlcnIiLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUFBLGtCQUFTQyxHQUFULENBQ0UsSUFBSUMsdUJBQUosQ0FDRTtBQUNFQyxFQUFBQSxhQUFhLEVBQUUsVUFEakI7QUFFRUMsRUFBQUEsYUFBYSxFQUFFO0FBRmpCLENBREYsRUFLRSxPQUFPQyxRQUFQLEVBQWlCQyxRQUFqQixFQUEyQkMsSUFBM0IsS0FBb0M7QUFDbEMsUUFBTUMsSUFBSSxHQUFHLE1BQU1DLGNBQUtDLE9BQUwsQ0FBYTtBQUFFQyxJQUFBQSxLQUFLLEVBQUU7QUFBRU4sTUFBQUE7QUFBRjtBQUFULEdBQWIsQ0FBbkI7O0FBRUEsTUFBSSxDQUFDRyxJQUFMLEVBQVc7QUFDVCxXQUFPRCxJQUFJLENBQUMsd0JBQUQsQ0FBWDtBQUNEOztBQUVELE1BQUksRUFBRSxNQUFNQyxJQUFJLENBQUNJLGFBQUwsQ0FBbUJOLFFBQW5CLENBQVIsQ0FBSixFQUEyQztBQUN6QyxXQUFPQyxJQUFJLENBQUMsd0JBQUQsQ0FBWDtBQUNEOztBQUVELFNBQU9BLElBQUksQ0FBQyxLQUFELEVBQVFDLElBQVIsQ0FBWDtBQUNELENBakJILENBREY7O0FBc0JBUixrQkFBU0MsR0FBVCxDQUNFLElBQUlZLHFCQUFKLENBQ0U7QUFDRUMsRUFBQUEsY0FBYyxFQUFFQyx3QkFBV0MsMkJBQVgsRUFEbEI7QUFFRUMsRUFBQUEsV0FBVyxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUM7QUFGM0IsQ0FERixFQUtFLE9BQU9DLFVBQVAsRUFBbUJkLElBQW5CLEtBQTRCO0FBQzFCLE1BQUk7QUFDRixVQUFNQyxJQUFJLEdBQUcsTUFBTUMsY0FBS0MsT0FBTCxDQUFhO0FBQUVDLE1BQUFBLEtBQUssRUFBRTtBQUFFVyxRQUFBQSxJQUFJLEVBQUVELFVBQVUsQ0FBQ0M7QUFBbkI7QUFBVCxLQUFiLENBQW5COztBQUNBLFFBQUksQ0FBQ2QsSUFBTCxFQUFXO0FBQ1QsYUFBT0QsSUFBSSxDQUFDLG9CQUFELENBQVg7QUFDRDs7QUFDRCxXQUFPQSxJQUFJLENBQUMsS0FBRCxFQUFRQyxJQUFSLENBQVg7QUFDRCxHQU5ELENBTUUsT0FBT2UsR0FBUCxFQUFZO0FBQ1osV0FBT2hCLElBQUksQ0FBQ2dCLEdBQUcsQ0FBQ0MsT0FBTCxDQUFYO0FBQ0Q7QUFDRixDQWZILENBREYiLCJzb3VyY2VSb290IjoiL1VzZXJzL2JiZW5vaXQvRGV2L2Jhc2ljcy9zZXJ2ZXIvbWlkZGxld2FyZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGFzc3BvcnQgZnJvbSBcInBhc3Nwb3J0XCI7XG5pbXBvcnQgeyBTdHJhdGVneSBhcyBMb2NhbFN0cmF0ZWd5IH0gZnJvbSBcInBhc3Nwb3J0LWxvY2FsXCI7XG5pbXBvcnQgeyBTdHJhdGVneSBhcyBKd3RTdHJhdGVneSwgRXh0cmFjdEp3dCB9IGZyb20gXCJwYXNzcG9ydC1qd3RcIjtcbmltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbHMvdXNlclwiO1xuXG5wYXNzcG9ydC51c2UoXG4gIG5ldyBMb2NhbFN0cmF0ZWd5KFxuICAgIHtcbiAgICAgIHVzZXJuYW1lRmllbGQ6IFwibmlja25hbWVcIixcbiAgICAgIHBhc3N3b3JkRmllbGQ6IFwicGFzc3dvcmRcIlxuICAgIH0sXG4gICAgYXN5bmMgKG5pY2tuYW1lLCBwYXNzd29yZCwgbmV4dCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHdoZXJlOiB7IG5pY2tuYW1lIH0gfSk7XG5cbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gbmV4dChcIk5pY2tuYW1lIGRvZXNuJ3QgZXhpc3RcIik7XG4gICAgICB9XG5cbiAgICAgIGlmICghKGF3YWl0IHVzZXIuY2hlY2tQYXNzd29yZChwYXNzd29yZCkpKSB7XG4gICAgICAgIHJldHVybiBuZXh0KFwiUGFzc3dvcmQgZG9lc24ndCBtYXRjaFwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5leHQoZmFsc2UsIHVzZXIpO1xuICAgIH1cbiAgKVxuKTtcblxucGFzc3BvcnQudXNlKFxuICBuZXcgSnd0U3RyYXRlZ3koXG4gICAge1xuICAgICAgand0RnJvbVJlcXVlc3Q6IEV4dHJhY3RKd3QuZnJvbUF1dGhIZWFkZXJBc0JlYXJlclRva2VuKCksXG4gICAgICBzZWNyZXRPcktleTogcHJvY2Vzcy5lbnYuSldUX0VOQ1JZUFRJT05cbiAgICB9LFxuICAgIGFzeW5jIChqd3RQYXlsb2FkLCBuZXh0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgd2hlcmU6IHsgdXVpZDogand0UGF5bG9hZC51dWlkIH0gfSk7XG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgIHJldHVybiBuZXh0KFwiVXNlciBkb2Vzbid0IGV4aXN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0KGZhbHNlLCB1c2VyKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gbmV4dChlcnIubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuICApXG4pO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "passport.js"
      ],
      "names": [
        "passport",
        "use",
        "LocalStrategy",
        "usernameField",
        "passwordField",
        "nickname",
        "password",
        "next",
        "user",
        "User",
        "findOne",
        "where",
        "checkPassword",
        "JwtStrategy",
        "jwtFromRequest",
        "ExtractJwt",
        "fromAuthHeaderAsBearerToken",
        "secretOrKey",
        "process",
        "env",
        "JWT_ENCRYPTION",
        "jwtPayload",
        "uuid",
        "err",
        "message"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;;;AAEAA,kBAASC,GAAT,CACE,IAAIC,uBAAJ,CACE;AACEC,EAAAA,aAAa,EAAE,UADjB;AAEEC,EAAAA,aAAa,EAAE;AAFjB,CADF,EAKE,OAAOC,QAAP,EAAiBC,QAAjB,EAA2BC,IAA3B,KAAoC;AAClC,QAAMC,IAAI,GAAG,MAAMC,cAAKC,OAAL,CAAa;AAAEC,IAAAA,KAAK,EAAE;AAAEN,MAAAA;AAAF;AAAT,GAAb,CAAnB;;AAEA,MAAI,CAACG,IAAL,EAAW;AACT,WAAOD,IAAI,CAAC,wBAAD,CAAX;AACD;;AAED,MAAI,EAAE,MAAMC,IAAI,CAACI,aAAL,CAAmBN,QAAnB,CAAR,CAAJ,EAA2C;AACzC,WAAOC,IAAI,CAAC,wBAAD,CAAX;AACD;;AAED,SAAOA,IAAI,CAAC,KAAD,EAAQC,IAAR,CAAX;AACD,CAjBH,CADF;;AAsBAR,kBAASC,GAAT,CACE,IAAIY,qBAAJ,CACE;AACEC,EAAAA,cAAc,EAAEC,wBAAWC,2BAAX,EADlB;AAEEC,EAAAA,WAAW,EAAEC,OAAO,CAACC,GAAR,CAAYC;AAF3B,CADF,EAKE,OAAOC,UAAP,EAAmBd,IAAnB,KAA4B;AAC1B,MAAI;AACF,UAAMC,IAAI,GAAG,MAAMC,cAAKC,OAAL,CAAa;AAAEC,MAAAA,KAAK,EAAE;AAAEW,QAAAA,IAAI,EAAED,UAAU,CAACC;AAAnB;AAAT,KAAb,CAAnB;;AACA,QAAI,CAACd,IAAL,EAAW;AACT,aAAOD,IAAI,CAAC,oBAAD,CAAX;AACD;;AACD,WAAOA,IAAI,CAAC,KAAD,EAAQC,IAAR,CAAX;AACD,GAND,CAME,OAAOe,GAAP,EAAY;AACZ,WAAOhB,IAAI,CAACgB,GAAG,CAACC,OAAL,CAAX;AACD;AACF,CAfH,CADF",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/middlewares",
      "sourcesContent": [
        "import passport from \"passport\";\nimport { Strategy as LocalStrategy } from \"passport-local\";\nimport { Strategy as JwtStrategy, ExtractJwt } from \"passport-jwt\";\nimport User from \"../models/user\";\n\npassport.use(\n  new LocalStrategy(\n    {\n      usernameField: \"nickname\",\n      passwordField: \"password\"\n    },\n    async (nickname, password, next) => {\n      const user = await User.findOne({ where: { nickname } });\n\n      if (!user) {\n        return next(\"Nickname doesn't exist\");\n      }\n\n      if (!(await user.checkPassword(password))) {\n        return next(\"Password doesn't match\");\n      }\n\n      return next(false, user);\n    }\n  )\n);\n\npassport.use(\n  new JwtStrategy(\n    {\n      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n      secretOrKey: process.env.JWT_ENCRYPTION\n    },\n    async (jwtPayload, next) => {\n      try {\n        const user = await User.findOne({ where: { uuid: jwtPayload.uuid } });\n        if (!user) {\n          return next(\"User doesn't exist\");\n        }\n        return next(false, user);\n      } catch (err) {\n        return next(err.message);\n      }\n    }\n  )\n);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544453210000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/routes/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/routes/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/routes/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _auth = _interopRequireDefault(require(\"./auth\"));\n\nvar _secured = _interopRequireDefault(require(\"./secured\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.get(\"/\", (req, res) => {\n  res.json({\n    name: \"sanji.Api\",\n    meta: {\n      version: \"1.0.0\",\n      status: \"running\"\n    }\n  });\n});\napi.use(\"/auth\", _auth.default);\napi.use(\"/\", _passport.default.authenticate(\"jwt\", {\n  session: false\n}), _secured.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsImpzb24iLCJuYW1lIiwibWV0YSIsInZlcnNpb24iLCJzdGF0dXMiLCJ1c2UiLCJhdXRoIiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzZXNzaW9uIiwic2VjdXJlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLHNCQUFaO0FBRUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUN6QkEsRUFBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVM7QUFDUEMsSUFBQUEsSUFBSSxFQUFFLFdBREM7QUFFUEMsSUFBQUEsSUFBSSxFQUFFO0FBQ0pDLE1BQUFBLE9BQU8sRUFBRSxPQURMO0FBRUpDLE1BQUFBLE1BQU0sRUFBRTtBQUZKO0FBRkMsR0FBVDtBQU9ELENBUkQ7QUFVQVIsR0FBRyxDQUFDUyxHQUFKLENBQVEsT0FBUixFQUFpQkMsYUFBakI7QUFDQVYsR0FBRyxDQUFDUyxHQUFKLENBQVEsR0FBUixFQUFhRSxrQkFBU0MsWUFBVCxDQUFzQixLQUF0QixFQUE2QjtBQUFFQyxFQUFBQSxPQUFPLEVBQUU7QUFBWCxDQUE3QixDQUFiLEVBQStEQyxnQkFBL0Q7ZUFFZWQsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlci9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xuaW1wb3J0IGF1dGggZnJvbSBcIi4vYXV0aFwiO1xuaW1wb3J0IHNlY3VyZWQgZnJvbSBcIi4vc2VjdXJlZFwiO1xuXG5jb25zdCBhcGkgPSBSb3V0ZXIoKTtcblxuYXBpLmdldChcIi9cIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICBuYW1lOiBcInNhbmppLkFwaVwiLFxuICAgIG1ldGE6IHtcbiAgICAgIHZlcnNpb246IFwiMS4wLjBcIixcbiAgICAgIHN0YXR1czogXCJydW5uaW5nXCJcbiAgICB9XG4gIH0pO1xufSk7XG5cbmFwaS51c2UoXCIvYXV0aFwiLCBhdXRoKTtcbmFwaS51c2UoXCIvXCIsIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZShcImp3dFwiLCB7IHNlc3Npb246IGZhbHNlIH0pLCBzZWN1cmVkKTtcblxuZXhwb3J0IGRlZmF1bHQgYXBpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "json",
        "name",
        "meta",
        "version",
        "status",
        "use",
        "auth",
        "passport",
        "authenticate",
        "session",
        "secured"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,EAAAA,GAAG,CAACC,IAAJ,CAAS;AACPC,IAAAA,IAAI,EAAE,WADC;AAEPC,IAAAA,IAAI,EAAE;AACJC,MAAAA,OAAO,EAAE,OADL;AAEJC,MAAAA,MAAM,EAAE;AAFJ;AAFC,GAAT;AAOD,CARD;AAUAR,GAAG,CAACS,GAAJ,CAAQ,OAAR,EAAiBC,aAAjB;AACAV,GAAG,CAACS,GAAJ,CAAQ,GAAR,EAAaE,kBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAA7B,CAAb,EAA+DC,gBAA/D;eAEed,G",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport passport from \"passport\";\nimport auth from \"./auth\";\nimport secured from \"./secured\";\n\nconst api = Router();\n\napi.get(\"/\", (req, res) => {\n  res.json({\n    name: \"sanji.Api\",\n    meta: {\n      version: \"1.0.0\",\n      status: \"running\"\n    }\n  });\n});\n\napi.use(\"/auth\", auth);\napi.use(\"/\", passport.authenticate(\"jwt\", { session: false }), secured);\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544452727000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/routes/auth.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/routes/auth.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/routes/auth.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/routes/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _user = _interopRequireDefault(require(\"../models/user\"));\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.post(\"/register\", async (req, res) => {\n  const {\n    nickname,\n    email,\n    password,\n    password_confirmation\n  } = req.body;\n\n  try {\n    const user = new _user.default({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n    await user.save();\n    const payload = {\n      uuid: user.uuid,\n      nickname,\n      email\n    };\n\n    const token = _jsonwebtoken.default.sign(payload, \"mysupersecret\");\n\n    res.status(201).json({\n      data: {\n        user\n      },\n      meta: {\n        token\n      }\n    });\n  } catch (err) {\n    console.log(err.message);\n    res.json({\n      err: err.message\n    });\n  }\n});\napi.post(\"/login\", async (req, res) => {\n  _passport.default.authenticate(\"local\", {\n    session: false\n  }, (err, user) => {\n    if (err) {\n      res.status(400).json({\n        error: {\n          message: err\n        }\n      });\n    }\n\n    const {\n      uuid,\n      nickname,\n      email\n    } = user;\n    const payload = {\n      uuid,\n      nickname,\n      email\n    };\n\n    const token = _jsonwebtoken.default.sign(payload, process.env.JWT_ENCRYPTION);\n\n    res.status(200).json({\n      data: {\n        user\n      },\n      meta: {\n        token\n      }\n    });\n  })(req, res);\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiYXBpIiwicG9zdCIsInJlcSIsInJlcyIsIm5pY2tuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInBhc3N3b3JkX2NvbmZpcm1hdGlvbiIsImJvZHkiLCJ1c2VyIiwiVXNlciIsInNhdmUiLCJwYXlsb2FkIiwidXVpZCIsInRva2VuIiwiand0Iiwic2lnbiIsInN0YXR1cyIsImpzb24iLCJkYXRhIiwibWV0YSIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzZXNzaW9uIiwiZXJyb3IiLCJwcm9jZXNzIiwiZW52IiwiSldUX0VOQ1JZUFRJT04iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLEdBQUcsR0FBRyxzQkFBWjtBQUVBQSxHQUFHLENBQUNDLElBQUosQ0FBUyxXQUFULEVBQXNCLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUN4QyxRQUFNO0FBQUVDLElBQUFBLFFBQUY7QUFBWUMsSUFBQUEsS0FBWjtBQUFtQkMsSUFBQUEsUUFBbkI7QUFBNkJDLElBQUFBO0FBQTdCLE1BQXVETCxHQUFHLENBQUNNLElBQWpFOztBQUVBLE1BQUk7QUFDRixVQUFNQyxJQUFJLEdBQUcsSUFBSUMsYUFBSixDQUFTO0FBQ3BCTixNQUFBQSxRQURvQjtBQUVwQkMsTUFBQUEsS0FGb0I7QUFHcEJDLE1BQUFBLFFBSG9CO0FBSXBCQyxNQUFBQTtBQUpvQixLQUFULENBQWI7QUFPQSxVQUFNRSxJQUFJLENBQUNFLElBQUwsRUFBTjtBQUVBLFVBQU1DLE9BQU8sR0FBRztBQUFFQyxNQUFBQSxJQUFJLEVBQUVKLElBQUksQ0FBQ0ksSUFBYjtBQUFtQlQsTUFBQUEsUUFBbkI7QUFBNkJDLE1BQUFBO0FBQTdCLEtBQWhCOztBQUNBLFVBQU1TLEtBQUssR0FBR0Msc0JBQUlDLElBQUosQ0FBU0osT0FBVCxFQUFrQixlQUFsQixDQUFkOztBQUVBVCxJQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUU7QUFBRVYsUUFBQUE7QUFBRixPQUFSO0FBQWtCVyxNQUFBQSxJQUFJLEVBQUU7QUFBRU4sUUFBQUE7QUFBRjtBQUF4QixLQUFyQjtBQUNELEdBZEQsQ0FjRSxPQUFPTyxHQUFQLEVBQVk7QUFDWkMsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlGLEdBQUcsQ0FBQ0csT0FBaEI7QUFDQXJCLElBQUFBLEdBQUcsQ0FBQ2UsSUFBSixDQUFTO0FBQUVHLE1BQUFBLEdBQUcsRUFBRUEsR0FBRyxDQUFDRztBQUFYLEtBQVQ7QUFDRDtBQUNGLENBckJEO0FBdUJBeEIsR0FBRyxDQUFDQyxJQUFKLENBQVMsUUFBVCxFQUFtQixPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDckNzQixvQkFBU0MsWUFBVCxDQUFzQixPQUF0QixFQUErQjtBQUFFQyxJQUFBQSxPQUFPLEVBQUU7QUFBWCxHQUEvQixFQUFtRCxDQUFDTixHQUFELEVBQU1aLElBQU4sS0FBZTtBQUNoRSxRQUFJWSxHQUFKLEVBQVM7QUFDUGxCLE1BQUFBLEdBQUcsQ0FBQ2MsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ25CVSxRQUFBQSxLQUFLLEVBQUU7QUFBRUosVUFBQUEsT0FBTyxFQUFFSDtBQUFYO0FBRFksT0FBckI7QUFHRDs7QUFFRCxVQUFNO0FBQUVSLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsUUFBNEJJLElBQWxDO0FBQ0EsVUFBTUcsT0FBTyxHQUFHO0FBQUVDLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsS0FBaEI7O0FBQ0EsVUFBTVMsS0FBSyxHQUFHQyxzQkFBSUMsSUFBSixDQUFTSixPQUFULEVBQWtCaUIsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGNBQTlCLENBQWQ7O0FBRUE1QixJQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUU7QUFBRVYsUUFBQUE7QUFBRixPQUFSO0FBQWtCVyxNQUFBQSxJQUFJLEVBQUU7QUFBRU4sUUFBQUE7QUFBRjtBQUF4QixLQUFyQjtBQUNELEdBWkQsRUFZR1osR0FaSCxFQVlRQyxHQVpSO0FBYUQsQ0FkRDtlQWdCZUgsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlci9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWxzL3VzZXJcIjtcbmltcG9ydCBwYXNzcG9ydCBmcm9tIFwicGFzc3BvcnRcIjtcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cbmFwaS5wb3N0KFwiL3JlZ2lzdGVyXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IG5pY2tuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHBhc3N3b3JkX2NvbmZpcm1hdGlvbiB9ID0gcmVxLmJvZHk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgbmlja25hbWUsXG4gICAgICBlbWFpbCxcbiAgICAgIHBhc3N3b3JkLFxuICAgICAgcGFzc3dvcmRfY29uZmlybWF0aW9uXG4gICAgfSk7XG5cbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcblxuICAgIGNvbnN0IHBheWxvYWQgPSB7IHV1aWQ6IHVzZXIudXVpZCwgbmlja25hbWUsIGVtYWlsIH07XG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihwYXlsb2FkLCBcIm15c3VwZXJzZWNyZXRcIik7XG5cbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IGRhdGE6IHsgdXNlciB9LCBtZXRhOiB7IHRva2VuIH0gfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICByZXMuanNvbih7IGVycjogZXJyLm1lc3NhZ2UgfSk7XG4gIH1cbn0pO1xuXG5hcGkucG9zdChcIi9sb2dpblwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgcGFzc3BvcnQuYXV0aGVudGljYXRlKFwibG9jYWxcIiwgeyBzZXNzaW9uOiBmYWxzZSB9LCAoZXJyLCB1c2VyKSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogeyBtZXNzYWdlOiBlcnIgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyB1dWlkLCBuaWNrbmFtZSwgZW1haWwgfSA9IHVzZXI7XG4gICAgY29uc3QgcGF5bG9hZCA9IHsgdXVpZCwgbmlja25hbWUsIGVtYWlsIH07XG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihwYXlsb2FkLCBwcm9jZXNzLmVudi5KV1RfRU5DUllQVElPTik7XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHsgdXNlciB9LCBtZXRhOiB7IHRva2VuIH0gfSk7XG4gIH0pKHJlcSwgcmVzKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "api",
        "post",
        "req",
        "res",
        "nickname",
        "email",
        "password",
        "password_confirmation",
        "body",
        "user",
        "User",
        "save",
        "payload",
        "uuid",
        "token",
        "jwt",
        "sign",
        "status",
        "json",
        "data",
        "meta",
        "err",
        "console",
        "log",
        "message",
        "passport",
        "authenticate",
        "session",
        "error",
        "process",
        "env",
        "JWT_ENCRYPTION"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,IAAJ,CAAS,WAAT,EAAsB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACxC,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,KAAZ;AAAmBC,IAAAA,QAAnB;AAA6BC,IAAAA;AAA7B,MAAuDL,GAAG,CAACM,IAAjE;;AAEA,MAAI;AACF,UAAMC,IAAI,GAAG,IAAIC,aAAJ,CAAS;AACpBN,MAAAA,QADoB;AAEpBC,MAAAA,KAFoB;AAGpBC,MAAAA,QAHoB;AAIpBC,MAAAA;AAJoB,KAAT,CAAb;AAOA,UAAME,IAAI,CAACE,IAAL,EAAN;AAEA,UAAMC,OAAO,GAAG;AAAEC,MAAAA,IAAI,EAAEJ,IAAI,CAACI,IAAb;AAAmBT,MAAAA,QAAnB;AAA6BC,MAAAA;AAA7B,KAAhB;;AACA,UAAMS,KAAK,GAAGC,sBAAIC,IAAJ,CAASJ,OAAT,EAAkB,eAAlB,CAAd;;AAEAT,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,IAAI,EAAE;AAAEV,QAAAA;AAAF,OAAR;AAAkBW,MAAAA,IAAI,EAAE;AAAEN,QAAAA;AAAF;AAAxB,KAArB;AACD,GAdD,CAcE,OAAOO,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACArB,IAAAA,GAAG,CAACe,IAAJ,CAAS;AAAEG,MAAAA,GAAG,EAAEA,GAAG,CAACG;AAAX,KAAT;AACD;AACF,CArBD;AAuBAxB,GAAG,CAACC,IAAJ,CAAS,QAAT,EAAmB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACrCsB,oBAASC,YAAT,CAAsB,OAAtB,EAA+B;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAA/B,EAAmD,CAACN,GAAD,EAAMZ,IAAN,KAAe;AAChE,QAAIY,GAAJ,EAAS;AACPlB,MAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBU,QAAAA,KAAK,EAAE;AAAEJ,UAAAA,OAAO,EAAEH;AAAX;AADY,OAArB;AAGD;;AAED,UAAM;AAAER,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,QAA4BI,IAAlC;AACA,UAAMG,OAAO,GAAG;AAAEC,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,KAAhB;;AACA,UAAMS,KAAK,GAAGC,sBAAIC,IAAJ,CAASJ,OAAT,EAAkBiB,OAAO,CAACC,GAAR,CAAYC,cAA9B,CAAd;;AAEA5B,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,IAAI,EAAE;AAAEV,QAAAA;AAAF,OAAR;AAAkBW,MAAAA,IAAI,EAAE;AAAEN,QAAAA;AAAF;AAAxB,KAArB;AACD,GAZD,EAYGZ,GAZH,EAYQC,GAZR;AAaD,CAdD;eAgBeH,G",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport jwt from \"jsonwebtoken\";\nimport User from \"../models/user\";\nimport passport from \"passport\";\n\nconst api = Router();\n\napi.post(\"/register\", async (req, res) => {\n  const { nickname, email, password, password_confirmation } = req.body;\n\n  try {\n    const user = new User({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n\n    await user.save();\n\n    const payload = { uuid: user.uuid, nickname, email };\n    const token = jwt.sign(payload, \"mysupersecret\");\n\n    res.status(201).json({ data: { user }, meta: { token } });\n  } catch (err) {\n    console.log(err.message);\n    res.json({ err: err.message });\n  }\n});\n\napi.post(\"/login\", async (req, res) => {\n  passport.authenticate(\"local\", { session: false }, (err, user) => {\n    if (err) {\n      res.status(400).json({\n        error: { message: err }\n      });\n    }\n\n    const { uuid, nickname, email } = user;\n    const payload = { uuid, nickname, email };\n    const token = jwt.sign(payload, process.env.JWT_ENCRYPTION);\n\n    res.status(200).json({ data: { user }, meta: { token } });\n  })(req, res);\n});\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544453218000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/models/user.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/models/user.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/models/user.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/models/user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sequelize = _interopRequireWildcard(require(\"sequelize\"));\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nclass User extends _sequelize.Model {\n  static init(database) {\n    return super.init({\n      uuid: {\n        type: _sequelize.default.UUID,\n        primaryKey: true,\n        defaultValue: _sequelize.default.UUIDV4\n      },\n      nickname: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        unique: {\n          args: true,\n          msg: \"Nickname already in use\"\n        },\n        validate: {\n          isLongEnough(v) {\n            if (v.length < 5) {\n              throw new Error(\"Nickname must have at least 5 characters\");\n            }\n          }\n\n        }\n      },\n      email: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          isEmail: true\n        },\n        unique: {\n          args: true,\n          msg: \"Email already in use\"\n        }\n      },\n      password_digest: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          notEmpty: true\n        }\n      },\n      password: {\n        type: _sequelize.default.VIRTUAL,\n        validate: {\n          isLongEnough(v) {\n            if (v.length < 7) {\n              throw new Error(\"Password must have at least 7 characters\");\n            }\n          }\n\n        }\n      },\n      password_confirmation: {\n        type: _sequelize.default.VIRTUAL,\n        validate: {\n          isEqual(v) {\n            if (v !== this.password) {\n              throw new Error(\"Password confirmation doesn't match password\");\n            }\n          }\n\n        }\n      }\n    }, {\n      tableName: \"users\",\n      sequelize: database,\n      indexes: [{\n        unique: true,\n        fields: [\"uuid\", \"nickname\", \"email\"]\n      }],\n      hooks: {\n        async beforeValidate(userInstance) {\n          userInstance.password_digest = await userInstance.generateHash();\n        },\n\n        async beforeSave(userInstance) {\n          if (!userInstance.isNewRecord && userInstance.changed(\"password\")) {\n            userInstance.password_digest = await userInstance.generateHash();\n          }\n        }\n\n      }\n    });\n  }\n\n  async generateHash() {\n    const SALT_ROUND = 5;\n    const hash = await _bcrypt.default.hash(this.password, SALT_ROUND);\n\n    if (!hash) {\n      throw new Error(\"Can't hash password\");\n    }\n\n    return hash;\n  }\n\n  async checkPassword(password) {\n    return _bcrypt.default.compare(password, this.password_digest);\n  }\n\n  toJSON() {\n    const values = Object.assign({}, this.get());\n    delete values.password_digest;\n    return values;\n  }\n\n}\n\nexports.default = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiVXNlciIsIk1vZGVsIiwiaW5pdCIsImRhdGFiYXNlIiwidXVpZCIsInR5cGUiLCJTZXF1ZWxpemUiLCJVVUlEIiwicHJpbWFyeUtleSIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsIm5pY2tuYW1lIiwiU1RSSU5HIiwiYWxsb3dOdWxsIiwidW5pcXVlIiwiYXJncyIsIm1zZyIsInZhbGlkYXRlIiwiaXNMb25nRW5vdWdoIiwidiIsImxlbmd0aCIsIkVycm9yIiwiZW1haWwiLCJpc0VtYWlsIiwicGFzc3dvcmRfZGlnZXN0Iiwibm90RW1wdHkiLCJwYXNzd29yZCIsIlZJUlRVQUwiLCJwYXNzd29yZF9jb25maXJtYXRpb24iLCJpc0VxdWFsIiwidGFibGVOYW1lIiwic2VxdWVsaXplIiwiaW5kZXhlcyIsImZpZWxkcyIsImhvb2tzIiwiYmVmb3JlVmFsaWRhdGUiLCJ1c2VySW5zdGFuY2UiLCJnZW5lcmF0ZUhhc2giLCJiZWZvcmVTYXZlIiwiaXNOZXdSZWNvcmQiLCJjaGFuZ2VkIiwiU0FMVF9ST1VORCIsImhhc2giLCJiY3J5cHQiLCJjaGVja1Bhc3N3b3JkIiwiY29tcGFyZSIsInRvSlNPTiIsInZhbHVlcyIsIk9iamVjdCIsImFzc2lnbiIsImdldCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7Ozs7QUFFZSxNQUFNQSxJQUFOLFNBQW1CQyxnQkFBbkIsQ0FBeUI7QUFDdEMsU0FBT0MsSUFBUCxDQUFZQyxRQUFaLEVBQXNCO0FBQ3BCLFdBQU8sTUFBTUQsSUFBTixDQUNMO0FBQ0VFLE1BQUFBLElBQUksRUFBRTtBQUNKQyxRQUFBQSxJQUFJLEVBQUVDLG1CQUFVQyxJQURaO0FBRUpDLFFBQUFBLFVBQVUsRUFBRSxJQUZSO0FBR0pDLFFBQUFBLFlBQVksRUFBRUgsbUJBQVVJO0FBSHBCLE9BRFI7QUFNRUMsTUFBQUEsUUFBUSxFQUFFO0FBQ1JOLFFBQUFBLElBQUksRUFBRUMsbUJBQVVNLE1BRFI7QUFF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SXJCLEtBQUosQ0FBVSxxQkFBVixDQUFOO0FBQ0Q7O0FBRUQsV0FBT3FCLElBQVA7QUFDRDs7QUFFRCxRQUFNRSxhQUFOLENBQW9CbEIsUUFBcEIsRUFBOEI7QUFDNUIsV0FBT2lCLGdCQUFPRSxPQUFQLENBQWVuQixRQUFmLEVBQXlCLEtBQUtGLGVBQTlCLENBQVA7QUFDRDs7QUFFRHNCLEVBQUFBLE1BQU0sR0FBRztBQUNQLFVBQU1DLE1BQU0sR0FBR0MsTUFBTSxDQUFDQyxNQUFQLENBQWMsRUFBZCxFQUFrQixLQUFLQyxHQUFMLEVBQWxCLENBQWY7QUFFQSxXQUFPSCxNQUFNLENBQUN2QixlQUFkO0FBRUEsV0FBT3VCLE1BQVA7QUFDRDs7QUE5R3FDIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9iYmVub2l0L0Rldi9iYXNpY3Mvc2VydmVyL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTZXF1ZWxpemUsIHsgTW9kZWwgfSBmcm9tIFwic2VxdWVsaXplXCI7XG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlciBleHRlbmRzIE1vZGVsIHtcbiAgc3RhdGljIGluaXQoZGF0YWJhc2UpIHtcbiAgICByZXR1cm4gc3VwZXIuaW5pdChcbiAgICAgIHtcbiAgICAgICAgdXVpZDoge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5VVUlELFxuICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBTZXF1ZWxpemUuVVVJRFY0XG4gICAgICAgIH0sXG4gICAgICAgIG5pY2tuYW1lOiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgIHVuaXF1ZToge1xuICAgICAgICAgICAgYXJnczogdHJ1ZSxcbiAgICAgICAgICAgIG1zZzogXCJOaWNrbmFtZSBhbHJlYWR5IGluIHVzZVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgaXNMb25nRW5vdWdoKHYpIHtcbiAgICAgICAgICAgICAgaWYgKHYubGVuZ3RoIDwgNSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5pY2tuYW1lIG11c3QgaGF2ZSBhdCBsZWFzdCA1IGNoYXJhY3RlcnNcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBpc0VtYWlsOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB1bmlxdWU6IHtcbiAgICAgICAgICAgIGFyZ3M6IHRydWUsXG4gICAgICAgICAgICBtc2c6IFwiRW1haWwgYWxyZWFkeSBpbiB1c2VcIlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcGFzc3dvcmRfZGlnZXN0OiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORyxcbiAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBub3RFbXB0eTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcGFzc3dvcmQ6IHtcbiAgICAgICAgICB0eXBlOiBTZXF1ZWxpemUuVklSVFVBTCxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgaXNMb25nRW5vdWdoKHYpIHtcbiAgICAgICAgICAgICAgaWYgKHYubGVuZ3RoIDwgNykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhc3N3b3JkIG11c3QgaGF2ZSBhdCBsZWFzdCA3IGNoYXJhY3RlcnNcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvbjoge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5WSVJUVUFMLFxuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBpc0VxdWFsKHYpIHtcbiAgICAgICAgICAgICAgaWYgKHYgIT09IHRoaXMucGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXNzd29yZCBjb25maXJtYXRpb24gZG9lc24ndCBtYXRjaCBwYXNzd29yZFwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcInVzZXJzXCIsXG4gICAgICAgIHNlcXVlbGl6ZTogZGF0YWJhc2UsXG5cbiAgICAgICAgaW5kZXhlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgICAgIGZpZWxkczogW1widXVpZFwiLCBcIm5pY2tuYW1lXCIsIFwiZW1haWxcIl1cbiAgICAgICAgICB9XG4gICAgICAgIF0sXG5cbiAgICAgICAgaG9va3M6IHtcbiAgICAgICAgICBhc3luYyBiZWZvcmVWYWxpZGF0ZSh1c2VySW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHVzZXJJbnN0YW5jZS5wYXNzd29yZF9kaWdlc3QgPSBhd2FpdCB1c2VySW5zdGFuY2UuZ2VuZXJhdGVIYXNoKCk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGFzeW5jIGJlZm9yZVNhdmUodXNlckluc3RhbmNlKSB7XG4gICAgICAgICAgICBpZiAoIXVzZXJJbnN0YW5jZS5pc05ld1JlY29yZCAmJiB1c2VySW5zdGFuY2UuY2hhbmdlZChcInBhc3N3b3JkXCIpKSB7XG4gICAgICAgICAgICAgIHVzZXJJbnN0YW5jZS5wYXNzd29yZF9kaWdlc3QgPSBhd2FpdCB1c2VySW5zdGFuY2UuZ2VuZXJhdGVIYXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlSGFzaCgpIHtcbiAgICBjb25zdCBTQUxUX1JPVU5EID0gNTtcblxuICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBiY3J5cHQuaGFzaCh0aGlzLnBhc3N3b3JkLCBTQUxUX1JPVU5EKTtcbiAgICBpZiAoIWhhc2gpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGhhc2ggcGFzc3dvcmRcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhhc2g7XG4gIH1cblxuICBhc3luYyBjaGVja1Bhc3N3b3JkKHBhc3N3b3JkKSB7XG4gICAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB0aGlzLnBhc3N3b3JkX2RpZ2VzdCk7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgY29uc3QgdmFsdWVzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nZXQoKSk7XG5cbiAgICBkZWxldGUgdmFsdWVzLnBhc3N3b3JkX2RpZ2VzdDtcblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "User",
        "Model",
        "init",
        "database",
        "uuid",
        "type",
        "Sequelize",
        "UUID",
        "primaryKey",
        "defaultValue",
        "UUIDV4",
        "nickname",
        "STRING",
        "allowNull",
        "unique",
        "args",
        "msg",
        "validate",
        "isLongEnough",
        "v",
        "length",
        "Error",
        "email",
        "isEmail",
        "password_digest",
        "notEmpty",
        "password",
        "VIRTUAL",
        "password_confirmation",
        "isEqual",
        "tableName",
        "sequelize",
        "indexes",
        "fields",
        "hooks",
        "beforeValidate",
        "userInstance",
        "generateHash",
        "beforeSave",
        "isNewRecord",
        "changed",
        "SALT_ROUND",
        "hash",
        "bcrypt",
        "checkPassword",
        "compare",
        "toJSON",
        "values",
        "Object",
        "assign",
        "get"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "sourcesContent": [
        "import Sequelize, { Model } from \"sequelize\";\nimport bcrypt from \"bcrypt\";\n\nexport default class User extends Model {\n  static init(database) {\n    return super.init(\n      {\n        uuid: {\n          type: Sequelize.UUID,\n          primaryKey: true,\n          defaultValue: Sequelize.UUIDV4\n        },\n        nickname: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          unique: {\n            args: true,\n            msg: \"Nickname already in use\"\n          },\n          validate: {\n            isLongEnough(v) {\n              if (v.length < 5) {\n                throw new Error(\"Nickname must have at least 5 characters\");\n              }\n            }\n          }\n        },\n        email: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            isEmail: true\n          },\n          unique: {\n            args: true,\n            msg: \"Email already in use\"\n          }\n        },\n        password_digest: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            notEmpty: true\n          }\n        },\n        password: {\n          type: Sequelize.VIRTUAL,\n          validate: {\n            isLongEnough(v) {\n              if (v.length < 7) {\n                throw new Error(\"Password must have at least 7 characters\");\n              }\n            }\n          }\n        },\n        password_confirmation: {\n          type: Sequelize.VIRTUAL,\n          validate: {\n            isEqual(v) {\n              if (v !== this.password) {\n                throw new Error(\"Password confirmation doesn't match password\");\n              }\n            }\n          }\n        }\n      },\n      {\n        tableName: \"users\",\n        sequelize: database,\n\n        indexes: [\n          {\n            unique: true,\n            fields: [\"uuid\", \"nickname\", \"email\"]\n          }\n        ],\n\n        hooks: {\n          async beforeValidate(userInstance) {\n            userInstance.password_digest = await userInstance.generateHash();\n          },\n\n          async beforeSave(userInstance) {\n            if (!userInstance.isNewRecord && userInstance.changed(\"password\")) {\n              userInstance.password_digest = await userInstance.generateHash();\n            }\n          }\n        }\n      }\n    );\n  }\n\n  async generateHash() {\n    const SALT_ROUND = 5;\n\n    const hash = await bcrypt.hash(this.password, SALT_ROUND);\n    if (!hash) {\n      throw new Error(\"Can't hash password\");\n    }\n\n    return hash;\n  }\n\n  async checkPassword(password) {\n    return bcrypt.compare(password, this.password_digest);\n  }\n\n  toJSON() {\n    const values = Object.assign({}, this.get());\n\n    delete values.password_digest;\n\n    return values;\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544454448000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/routes/secured\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/routes/secured/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/routes/secured/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/routes/secured/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/routes/secured/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _users = _interopRequireDefault(require(\"./users\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.use(\"/users\", _users.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwaSIsInVzZSIsInVzZXJzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxHQUFHLEdBQUcsc0JBQVo7QUFFQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsUUFBUixFQUFrQkMsY0FBbEI7ZUFFZUYsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlci9yb3V0ZXMvc2VjdXJlZCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgdXNlcnMgZnJvbSBcIi4vdXNlcnNcIjtcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cbmFwaS51c2UoXCIvdXNlcnNcIiwgdXNlcnMpO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "api",
        "use",
        "users"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,QAAR,EAAkBC,cAAlB;eAEeF,G",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport users from \"./users\";\n\nconst api = Router();\n\napi.use(\"/users\", users);\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544452766000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/routes/secured\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/routes/secured/users.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/routes/secured/users.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/routes/secured/users.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/routes/secured/users.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
        "sourceFileName": "users.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _user = _interopRequireDefault(require(\"../../models/user\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.get(\"/\", async (req, res) => {\n  const users = await _user.default.findAll();\n  res.status(200).json({\n    data: {\n      users\n    }\n  });\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsInVzZXJzIiwiVXNlciIsImZpbmRBbGwiLCJzdGF0dXMiLCJqc29uIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLHNCQUFaO0FBRUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLEdBQVIsRUFBYSxPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDL0IsUUFBTUMsS0FBSyxHQUFHLE1BQU1DLGNBQUtDLE9BQUwsRUFBcEI7QUFDQUgsRUFBQUEsR0FBRyxDQUFDSSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRUMsSUFBQUEsSUFBSSxFQUFFO0FBQUVMLE1BQUFBO0FBQUY7QUFBUixHQUFyQjtBQUNELENBSEQ7ZUFLZUosRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlci9yb3V0ZXMvc2VjdXJlZCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vLi4vbW9kZWxzL3VzZXJcIjtcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cbmFwaS5nZXQoXCIvXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXIuZmluZEFsbCgpO1xuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHsgdXNlcnMgfSB9KTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "users",
        "User",
        "findAll",
        "status",
        "json",
        "data"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,QAAMC,KAAK,GAAG,MAAMC,cAAKC,OAAL,EAApB;AACAH,EAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,IAAI,EAAE;AAAEL,MAAAA;AAAF;AAAR,GAArB;AACD,CAHD;eAKeJ,G",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/routes/secured",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport User from \"../../models/user\";\n\nconst api = Router();\n\napi.get(\"/\", async (req, res) => {\n  const users = await User.findAll();\n  res.status(200).json({ data: { users } });\n});\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544452754000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/models/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/models/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/models/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/models/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.db = void 0;\n\nvar _sequelize = _interopRequireDefault(require(\"sequelize\"));\n\nvar _user = _interopRequireDefault(require(\"./user\"));\n\nvar _project = _interopRequireDefault(require(\"./project\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// postgres://USER:PASS@HOST:PORT/DBNAME\n// createdb sanji.dev\nconst db = new _sequelize.default(process.env.DATABASE_URL);\nexports.db = db;\n\n_user.default.init(db);\n\n_project.default.init(db);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRiIiwiU2VxdWVsaXplIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsIlVzZXIiLCJpbml0IiwiUHJvamVjdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUE7QUFDQTtBQUNPLE1BQU1BLEVBQUUsR0FBRyxJQUFJQyxrQkFBSixDQUFjQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsWUFBMUIsQ0FBWDs7O0FBRVBDLGNBQUtDLElBQUwsQ0FBVU4sRUFBVjs7QUFDQU8saUJBQVFELElBQVIsQ0FBYU4sRUFBYiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYmJlbm9pdC9EZXYvYmFzaWNzL3NlcnZlci9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU2VxdWVsaXplIGZyb20gXCJzZXF1ZWxpemVcIjtcbmltcG9ydCBVc2VyIGZyb20gXCIuL3VzZXJcIjtcbmltcG9ydCBQcm9qZWN0IGZyb20gXCIuL3Byb2plY3RcIjtcblxuLy8gcG9zdGdyZXM6Ly9VU0VSOlBBU1NASE9TVDpQT1JUL0RCTkFNRVxuLy8gY3JlYXRlZGIgc2FuamkuZGV2XG5leHBvcnQgY29uc3QgZGIgPSBuZXcgU2VxdWVsaXplKHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCk7XG5cblVzZXIuaW5pdChkYik7XG5Qcm9qZWN0LmluaXQoZGIpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "db",
        "Sequelize",
        "process",
        "env",
        "DATABASE_URL",
        "User",
        "init",
        "Project"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;;;AAEA;AACA;AACO,MAAMA,EAAE,GAAG,IAAIC,kBAAJ,CAAcC,OAAO,CAACC,GAAR,CAAYC,YAA1B,CAAX;;;AAEPC,cAAKC,IAAL,CAAUN,EAAV;;AACAO,iBAAQD,IAAR,CAAaN,EAAb",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "sourcesContent": [
        "import Sequelize from \"sequelize\";\nimport User from \"./user\";\nimport Project from \"./project\";\n\n// postgres://USER:PASS@HOST:PORT/DBNAME\n// createdb sanji.dev\nexport const db = new Sequelize(process.env.DATABASE_URL);\n\nUser.init(db);\nProject.init(db);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544453197000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/models/project.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/models/project.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/models/project.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/models/project.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
        "sourceFileName": "project.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sequelize = _interopRequireWildcard(require(\"sequelize\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nclass Project extends _sequelize.Model {\n  static init(database) {\n    return super.init({\n      id: {\n        type: _sequelize.default.INTEGER,\n        primaryKey: true,\n        autoIncrement: true\n      },\n      name: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          notEmpty: true\n        }\n      }\n    }, {\n      tableName: \"projects\",\n      sequelize: database,\n      indexes: [{\n        unique: true,\n        fields: [\"id\"]\n      }]\n    });\n  }\n\n}\n\nexports.default = Project;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3QuanMiXSwibmFtZXMiOlsiUHJvamVjdCIsIk1vZGVsIiwiaW5pdCIsImRhdGFiYXNlIiwiaWQiLCJ0eXBlIiwiU2VxdWVsaXplIiwiSU5URUdFUiIsInByaW1hcnlLZXkiLCJhdXRvSW5jcmVtZW50IiwibmFtZSIsIlNUUklORyIsImFsbG93TnVsbCIsInZhbGlkYXRlIiwibm90RW1wdHkiLCJ0YWJsZU5hbWUiLCJzZXF1ZWxpemUiLCJpbmRleGVzIiwidW5pcXVlIiwiZmllbGRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFZSxNQUFNQSxPQUFOLFNBQXNCQyxnQkFBdEIsQ0FBNEI7QUFDekMsU0FBT0MsSUFBUCxDQUFZQyxRQUFaLEVBQXNCO0FBQ3BCLFdBQU8sTUFBTUQsSUFBTixDQUNMO0FBQ0VFLE1BQUFBLEVBQUUsRUFBRTtBQUNGQyxRQUFBQSxJQUFJLEVBQUVDLG1CQUFVQyxPQURkO0FBRUZDLFFBQUFBLFVBQVUsRUFBRSxJQUZWO0FBR0ZDLFFBQUFBLGFBQWEsRUFBRTtBQUhiLE9BRE47QUFNRUMsTUFBQUEsSUFBSSxFQUFFO0FBQ0pMLFFBQUFBLElBQUksRUFBRUMsbUJBQVVLLE1BRFo7QUFFSkMsUUFBQUEsU0FBUyxFQUFFLEtBRlA7QUFHSkMsUUFBQUEsUUFBUSxFQUFFO0FBQ1JDLFVBQUFBLFFBQVEsRUFBRTtBQURGO0FBSE47QUFOUixLQURLLEVBZUw7QUFDRUMsTUFBQUEsU0FBUyxFQUFFLFVBRGI7QUFFRUMsTUFBQUEsU0FBUyxFQUFFYixRQUZiO0FBSUVjLE1BQUFBLE9BQU8sRUFBRSxDQUNQO0FBQ0VDLFFBQUFBLE1BQU0sRUFBRSxJQURWO0FBRUVDLFFBQUFBLE1BQU0sRUFBRSxDQUFDLElBQUQ7QUFGVixPQURPO0FBSlgsS0FmSyxDQUFQO0FBMkJEOztBQTdCd0MiLCJzb3VyY2VSb290IjoiL1VzZXJzL2JiZW5vaXQvRGV2L2Jhc2ljcy9zZXJ2ZXIvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSwgeyBNb2RlbCB9IGZyb20gXCJzZXF1ZWxpemVcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdCBleHRlbmRzIE1vZGVsIHtcbiAgc3RhdGljIGluaXQoZGF0YWJhc2UpIHtcbiAgICByZXR1cm4gc3VwZXIuaW5pdChcbiAgICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICB0eXBlOiBTZXF1ZWxpemUuSU5URUdFUixcbiAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZToge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsXG4gICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbm90RW1wdHk6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogXCJwcm9qZWN0c1wiLFxuICAgICAgICBzZXF1ZWxpemU6IGRhdGFiYXNlLFxuXG4gICAgICAgIGluZGV4ZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgICAgICBmaWVsZHM6IFtcImlkXCJdXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgKTtcbiAgfVxufVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "project.js"
      ],
      "names": [
        "Project",
        "Model",
        "init",
        "database",
        "id",
        "type",
        "Sequelize",
        "INTEGER",
        "primaryKey",
        "autoIncrement",
        "name",
        "STRING",
        "allowNull",
        "validate",
        "notEmpty",
        "tableName",
        "sequelize",
        "indexes",
        "unique",
        "fields"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEe,MAAMA,OAAN,SAAsBC,gBAAtB,CAA4B;AACzC,SAAOC,IAAP,CAAYC,QAAZ,EAAsB;AACpB,WAAO,MAAMD,IAAN,CACL;AACEE,MAAAA,EAAE,EAAE;AACFC,QAAAA,IAAI,EAAEC,mBAAUC,OADd;AAEFC,QAAAA,UAAU,EAAE,IAFV;AAGFC,QAAAA,aAAa,EAAE;AAHb,OADN;AAMEC,MAAAA,IAAI,EAAE;AACJL,QAAAA,IAAI,EAAEC,mBAAUK,MADZ;AAEJC,QAAAA,SAAS,EAAE,KAFP;AAGJC,QAAAA,QAAQ,EAAE;AACRC,UAAAA,QAAQ,EAAE;AADF;AAHN;AANR,KADK,EAeL;AACEC,MAAAA,SAAS,EAAE,UADb;AAEEC,MAAAA,SAAS,EAAEb,QAFb;AAIEc,MAAAA,OAAO,EAAE,CACP;AACEC,QAAAA,MAAM,EAAE,IADV;AAEEC,QAAAA,MAAM,EAAE,CAAC,IAAD;AAFV,OADO;AAJX,KAfK,CAAP;AA2BD;;AA7BwC",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/models",
      "sourcesContent": [
        "import Sequelize, { Model } from \"sequelize\";\n\nexport default class Project extends Model {\n  static init(database) {\n    return super.init(\n      {\n        id: {\n          type: Sequelize.INTEGER,\n          primaryKey: true,\n          autoIncrement: true\n        },\n        name: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            notEmpty: true\n          }\n        }\n      },\n      {\n        tableName: \"projects\",\n        sequelize: database,\n\n        indexes: [\n          {\n            unique: true,\n            fields: [\"id\"]\n          }\n        ]\n      }\n    );\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544433553000
  },
  "{\"sourceRoot\":\"/Users/bbenoit/Dev/basics/server/middlewares\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/bbenoit/Dev/basics/server\",\"filename\":\"/Users/bbenoit/Dev/basics/server/middlewares/passport.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bbenoit/Dev/basics/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/middlewares",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/bbenoit/Dev/basics/server",
      "filename": "/Users/bbenoit/Dev/basics/server/middlewares/passport.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/bbenoit/Dev/basics/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/bbenoit/Dev/basics/server/middlewares/passport.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/bbenoit/Dev/basics/server/middlewares/passport.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/bbenoit/Dev/basics/server/middlewares",
        "sourceFileName": "passport.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _passportLocal = require(\"passport-local\");\n\nvar _passportJwt = require(\"passport-jwt\");\n\nvar _user = _interopRequireDefault(require(\"../models/user\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_passport.default.use(new _passportLocal.Strategy({\n  usernameField: \"nickname\",\n  passwordField: \"password\"\n}, async (nickname, password, next) => {\n  const user = await _user.default.findOne({\n    where: {\n      nickname\n    }\n  });\n\n  if (!user) {\n    return next(\"Nickname doesn't exist\");\n  }\n\n  if (!(await user.checkPassword(password))) {\n    return next(\"Password doesn't match\");\n  }\n\n  return next(false, user);\n}));\n\n_passport.default.use(new _passportJwt.Strategy({\n  jwtFromRequest: _passportJwt.ExtractJwt.fromAuthHeaderAsBearerToken(),\n  secretOrKey: process.env.JWT_ENCRYPTION\n}, async (jwtPayload, next) => {\n  try {\n    const user = await _user.default.findOne({\n      where: {\n        uuid: jwtPayload.uuid\n      }\n    });\n\n    if (!user) {\n      return next(\"User doesn't exist\");\n    }\n\n    return next(false, user);\n  } catch (err) {\n    return next(err.message);\n  }\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3Nwb3J0LmpzIl0sIm5hbWVzIjpbInBhc3Nwb3J0IiwidXNlIiwiTG9jYWxTdHJhdGVneSIsInVzZXJuYW1lRmllbGQiLCJwYXNzd29yZEZpZWxkIiwibmlja25hbWUiLCJwYXNzd29yZCIsIm5leHQiLCJ1c2VyIiwiVXNlciIsImZpbmRPbmUiLCJ3aGVyZSIsImNoZWNrUGFzc3dvcmQiLCJKd3RTdHJhdGVneSIsImp3dEZyb21SZXF1ZXN0IiwiRXh0cmFjdEp3dCIsImZyb21BdXRoSGVhZGVyQXNCZWFyZXJUb2tlbiIsInNlY3JldE9yS2V5IiwicHJvY2VzcyIsImVudiIsIkpXVF9FTkNSWVBUSU9OIiwiand0UGF5bG9hZCIsInV1aWQiLCJlcnIiLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUFBLGtCQUFTQyxHQUFULENBQ0UsSUFBSUMsdUJBQUosQ0FDRTtBQUNFQyxFQUFBQSxhQUFhLEVBQUUsVUFEakI7QUFFRUMsRUFBQUEsYUFBYSxFQUFFO0FBRmpCLENBREYsRUFLRSxPQUFPQyxRQUFQLEVBQWlCQyxRQUFqQixFQUEyQkMsSUFBM0IsS0FBb0M7QUFDbEMsUUFBTUMsSUFBSSxHQUFHLE1BQU1DLGNBQUtDLE9BQUwsQ0FBYTtBQUFFQyxJQUFBQSxLQUFLLEVBQUU7QUFBRU4sTUFBQUE7QUFBRjtBQUFULEdBQWIsQ0FBbkI7O0FBRUEsTUFBSSxDQUFDRyxJQUFMLEVBQVc7QUFDVCxXQUFPRCxJQUFJLENBQUMsd0JBQUQsQ0FBWDtBQUNEOztBQUVELE1BQUksRUFBRSxNQUFNQyxJQUFJLENBQUNJLGFBQUwsQ0FBbUJOLFFBQW5CLENBQVIsQ0FBSixFQUEyQztBQUN6QyxXQUFPQyxJQUFJLENBQUMsd0JBQUQsQ0FBWDtBQUNEOztBQUVELFNBQU9BLElBQUksQ0FBQyxLQUFELEVBQVFDLElBQVIsQ0FBWDtBQUNELENBakJILENBREY7O0FBc0JBUixrQkFBU0MsR0FBVCxDQUNFLElBQUlZLHFCQUFKLENBQ0U7QUFDRUMsRUFBQUEsY0FBYyxFQUFFQyx3QkFBV0MsMkJBQVgsRUFEbEI7QUFFRUMsRUFBQUEsV0FBVyxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUM7QUFGM0IsQ0FERixFQUtFLE9BQU9DLFVBQVAsRUFBbUJkLElBQW5CLEtBQTRCO0FBQzFCLE1BQUk7QUFDRixVQUFNQyxJQUFJLEdBQUcsTUFBTUMsY0FBS0MsT0FBTCxDQUFhO0FBQUVDLE1BQUFBLEtBQUssRUFBRTtBQUFFVyxRQUFBQSxJQUFJLEVBQUVELFVBQVUsQ0FBQ0M7QUFBbkI7QUFBVCxLQUFiLENBQW5COztBQUNBLFFBQUksQ0FBQ2QsSUFBTCxFQUFXO0FBQ1QsYUFBT0QsSUFBSSxDQUFDLG9CQUFELENBQVg7QUFDRDs7QUFDRCxXQUFPQSxJQUFJLENBQUMsS0FBRCxFQUFRQyxJQUFSLENBQVg7QUFDRCxHQU5ELENBTUUsT0FBT2UsR0FBUCxFQUFZO0FBQ1osV0FBT2hCLElBQUksQ0FBQ2dCLEdBQUcsQ0FBQ0MsT0FBTCxDQUFYO0FBQ0Q7QUFDRixDQWZILENBREYiLCJzb3VyY2VSb290IjoiL1VzZXJzL2JiZW5vaXQvRGV2L2Jhc2ljcy9zZXJ2ZXIvbWlkZGxld2FyZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGFzc3BvcnQgZnJvbSBcInBhc3Nwb3J0XCI7XG5pbXBvcnQgeyBTdHJhdGVneSBhcyBMb2NhbFN0cmF0ZWd5IH0gZnJvbSBcInBhc3Nwb3J0LWxvY2FsXCI7XG5pbXBvcnQgeyBTdHJhdGVneSBhcyBKd3RTdHJhdGVneSwgRXh0cmFjdEp3dCB9IGZyb20gXCJwYXNzcG9ydC1qd3RcIjtcbmltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbHMvdXNlclwiO1xuXG5wYXNzcG9ydC51c2UoXG4gIG5ldyBMb2NhbFN0cmF0ZWd5KFxuICAgIHtcbiAgICAgIHVzZXJuYW1lRmllbGQ6IFwibmlja25hbWVcIixcbiAgICAgIHBhc3N3b3JkRmllbGQ6IFwicGFzc3dvcmRcIlxuICAgIH0sXG4gICAgYXN5bmMgKG5pY2tuYW1lLCBwYXNzd29yZCwgbmV4dCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHdoZXJlOiB7IG5pY2tuYW1lIH0gfSk7XG5cbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gbmV4dChcIk5pY2tuYW1lIGRvZXNuJ3QgZXhpc3RcIik7XG4gICAgICB9XG5cbiAgICAgIGlmICghKGF3YWl0IHVzZXIuY2hlY2tQYXNzd29yZChwYXNzd29yZCkpKSB7XG4gICAgICAgIHJldHVybiBuZXh0KFwiUGFzc3dvcmQgZG9lc24ndCBtYXRjaFwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5leHQoZmFsc2UsIHVzZXIpO1xuICAgIH1cbiAgKVxuKTtcblxucGFzc3BvcnQudXNlKFxuICBuZXcgSnd0U3RyYXRlZ3koXG4gICAge1xuICAgICAgand0RnJvbVJlcXVlc3Q6IEV4dHJhY3RKd3QuZnJvbUF1dGhIZWFkZXJBc0JlYXJlclRva2VuKCksXG4gICAgICBzZWNyZXRPcktleTogcHJvY2Vzcy5lbnYuSldUX0VOQ1JZUFRJT05cbiAgICB9LFxuICAgIGFzeW5jIChqd3RQYXlsb2FkLCBuZXh0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgd2hlcmU6IHsgdXVpZDogand0UGF5bG9hZC51dWlkIH0gfSk7XG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgIHJldHVybiBuZXh0KFwiVXNlciBkb2Vzbid0IGV4aXN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0KGZhbHNlLCB1c2VyKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gbmV4dChlcnIubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuICApXG4pO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "passport.js"
      ],
      "names": [
        "passport",
        "use",
        "LocalStrategy",
        "usernameField",
        "passwordField",
        "nickname",
        "password",
        "next",
        "user",
        "User",
        "findOne",
        "where",
        "checkPassword",
        "JwtStrategy",
        "jwtFromRequest",
        "ExtractJwt",
        "fromAuthHeaderAsBearerToken",
        "secretOrKey",
        "process",
        "env",
        "JWT_ENCRYPTION",
        "jwtPayload",
        "uuid",
        "err",
        "message"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;;;AAEAA,kBAASC,GAAT,CACE,IAAIC,uBAAJ,CACE;AACEC,EAAAA,aAAa,EAAE,UADjB;AAEEC,EAAAA,aAAa,EAAE;AAFjB,CADF,EAKE,OAAOC,QAAP,EAAiBC,QAAjB,EAA2BC,IAA3B,KAAoC;AAClC,QAAMC,IAAI,GAAG,MAAMC,cAAKC,OAAL,CAAa;AAAEC,IAAAA,KAAK,EAAE;AAAEN,MAAAA;AAAF;AAAT,GAAb,CAAnB;;AAEA,MAAI,CAACG,IAAL,EAAW;AACT,WAAOD,IAAI,CAAC,wBAAD,CAAX;AACD;;AAED,MAAI,EAAE,MAAMC,IAAI,CAACI,aAAL,CAAmBN,QAAnB,CAAR,CAAJ,EAA2C;AACzC,WAAOC,IAAI,CAAC,wBAAD,CAAX;AACD;;AAED,SAAOA,IAAI,CAAC,KAAD,EAAQC,IAAR,CAAX;AACD,CAjBH,CADF;;AAsBAR,kBAASC,GAAT,CACE,IAAIY,qBAAJ,CACE;AACEC,EAAAA,cAAc,EAAEC,wBAAWC,2BAAX,EADlB;AAEEC,EAAAA,WAAW,EAAEC,OAAO,CAACC,GAAR,CAAYC;AAF3B,CADF,EAKE,OAAOC,UAAP,EAAmBd,IAAnB,KAA4B;AAC1B,MAAI;AACF,UAAMC,IAAI,GAAG,MAAMC,cAAKC,OAAL,CAAa;AAAEC,MAAAA,KAAK,EAAE;AAAEW,QAAAA,IAAI,EAAED,UAAU,CAACC;AAAnB;AAAT,KAAb,CAAnB;;AACA,QAAI,CAACd,IAAL,EAAW;AACT,aAAOD,IAAI,CAAC,oBAAD,CAAX;AACD;;AACD,WAAOA,IAAI,CAAC,KAAD,EAAQC,IAAR,CAAX;AACD,GAND,CAME,OAAOe,GAAP,EAAY;AACZ,WAAOhB,IAAI,CAACgB,GAAG,CAACC,OAAL,CAAX;AACD;AACF,CAfH,CADF",
      "sourceRoot": "/Users/bbenoit/Dev/basics/server/middlewares",
      "sourcesContent": [
        "import passport from \"passport\";\nimport { Strategy as LocalStrategy } from \"passport-local\";\nimport { Strategy as JwtStrategy, ExtractJwt } from \"passport-jwt\";\nimport User from \"../models/user\";\n\npassport.use(\n  new LocalStrategy(\n    {\n      usernameField: \"nickname\",\n      passwordField: \"password\"\n    },\n    async (nickname, password, next) => {\n      const user = await User.findOne({ where: { nickname } });\n\n      if (!user) {\n        return next(\"Nickname doesn't exist\");\n      }\n\n      if (!(await user.checkPassword(password))) {\n        return next(\"Password doesn't match\");\n      }\n\n      return next(false, user);\n    }\n  )\n);\n\npassport.use(\n  new JwtStrategy(\n    {\n      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n      secretOrKey: process.env.JWT_ENCRYPTION\n    },\n    async (jwtPayload, next) => {\n      try {\n        const user = await User.findOne({ where: { uuid: jwtPayload.uuid } });\n        if (!user) {\n          return next(\"User doesn't exist\");\n        }\n        return next(false, user);\n      } catch (err) {\n        return next(err.message);\n      }\n    }\n  )\n);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1544453210000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/server.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/server.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/server.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/server.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server",
        "sourceFileName": "server.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _routes = _interopRequireDefault(require(\"./routes\"));\n\nvar _models = require(\"./models\");\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nrequire(\"./middlewares/passport\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst start = async () => {\n  try {\n    const host = process.env.HOST;\n    const port = parseInt(process.argv[2] || process.env.PORT);\n    const app = (0, _express.default)();\n    await _models.db.authenticate();\n\n    if (process.env.NODE_ENV) {\n      await _models.db.sync({\n        force: false\n      });\n    }\n\n    app.use((0, _cors.default)());\n    app.use(_passport.default.initialize());\n    app.use(_bodyParser.default.urlencoded({\n      extended: true\n    }));\n    app.use(_bodyParser.default.json());\n    app.get(\"/\", (request, response) => {\n      response.send(\"Please feel free to use our api with /api\");\n    });\n    app.use(\"/api\", _routes.default);\n    app.listen(port, () => {\n      console.log(`Server is running in ${host} at ${port}`);\n    });\n  } catch (ex) {\n    console.log(ex.message);\n  }\n}; // Let's Rock! :)\n\n\nstart();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJzdGFydCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiSE9TVCIsInBvcnQiLCJwYXJzZUludCIsImFyZ3YiLCJQT1JUIiwiYXBwIiwiZGF0YWJhc2UiLCJhdXRoZW50aWNhdGUiLCJOT0RFX0VOViIsInN5bmMiLCJmb3JjZSIsInVzZSIsInBhc3Nwb3J0IiwiaW5pdGlhbGl6ZSIsImJvZHlQYXJzZXIiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJqc29uIiwiZ2V0IiwicmVxdWVzdCIsInJlc3BvbnNlIiwic2VuZCIsImFwaSIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciLCJleCIsIm1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7Ozs7QUFFQSxNQUFNQSxLQUFLLEdBQUcsWUFBWTtBQUN4QixNQUFJO0FBQ0YsVUFBTUMsSUFBSSxHQUFHQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsSUFBekI7QUFDQSxVQUFNQyxJQUFJLEdBQUdDLFFBQVEsQ0FBQ0osT0FBTyxDQUFDSyxJQUFSLENBQWEsQ0FBYixLQUFtQkwsT0FBTyxDQUFDQyxHQUFSLENBQVlLLElBQWhDLENBQXJCO0FBQ0EsVUFBTUMsR0FBRyxHQUFHLHVCQUFaO0FBRUEsVUFBTUMsV0FBU0MsWUFBVCxFQUFOOztBQUVBLFFBQUlULE9BQU8sQ0FBQ0MsR0FBUixDQUFZUyxRQUFoQixFQUEwQjtBQUN4QixZQUFNRixXQUFTRyxJQUFULENBQWM7QUFBRUMsUUFBQUEsS0FBSyxFQUFFO0FBQVQsT0FBZCxDQUFOO0FBQ0Q7O0FBRURMLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRLG9CQUFSO0FBQ0FOLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRQyxrQkFBU0MsVUFBVCxFQUFSO0FBRUFSLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRRyxvQkFBV0MsVUFBWCxDQUFzQjtBQUFFQyxNQUFBQSxRQUFRLEVBQUU7QUFBWixLQUF0QixDQUFSO0FBQ0FYLElBQUFBLEdBQUcsQ0FBQ00sR0FBSixDQUFRRyxvQkFBV0csSUFBWCxFQUFSO0FBRUFaLElBQUFBLEdBQUcsQ0FBQ2EsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxPQUFELEVBQVVDLFFBQVYsS0FBdUI7QUFDbENBLE1BQUFBLFFBQVEsQ0FBQ0MsSUFBVCxDQUFjLDJDQUFkO0FBQ0QsS0FGRDtBQUlBaEIsSUFBQUEsR0FBRyxDQUFDTSxHQUFKLENBQVEsTUFBUixFQUFnQlcsZUFBaEI7QUFFQWpCLElBQUFBLEdBQUcsQ0FBQ2tCLE1BQUosQ0FBV3RCLElBQVgsRUFBaUIsTUFBTTtBQUNyQnVCLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLHdCQUF1QjVCLElBQUssT0FBTUksSUFBSyxFQUFwRDtBQUNELEtBRkQ7QUFHRCxHQTFCRCxDQTBCRSxPQUFPeUIsRUFBUCxFQUFXO0FBQ1hGLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxFQUFFLENBQUNDLE9BQWY7QUFDRDtBQUNGLENBOUJELEMsQ0FnQ0E7OztBQUNBL0IsS0FBSyIsInNvdXJjZVJvb3QiOiIvaG9tZS9iZW5qYW1pbi9Eb2N1bWVudHMvcHJvamVjdC9zZXJ2ZXIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSBcImJvZHktcGFyc2VyXCI7XG5pbXBvcnQgYXBpIGZyb20gXCIuL3JvdXRlc1wiO1xuaW1wb3J0IHsgZGIgYXMgZGF0YWJhc2UgfSBmcm9tIFwiLi9tb2RlbHNcIjtcbmltcG9ydCBwYXNzcG9ydCBmcm9tIFwicGFzc3BvcnRcIjtcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCI7XG5cbmltcG9ydCBcIi4vbWlkZGxld2FyZXMvcGFzc3BvcnRcIjtcblxuY29uc3Qgc3RhcnQgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgaG9zdCA9IHByb2Nlc3MuZW52LkhPU1Q7XG4gICAgY29uc3QgcG9ydCA9IHBhcnNlSW50KHByb2Nlc3MuYXJndlsyXSB8fCBwcm9jZXNzLmVudi5QT1JUKTtcbiAgICBjb25zdCBhcHAgPSBleHByZXNzKCk7XG5cbiAgICBhd2FpdCBkYXRhYmFzZS5hdXRoZW50aWNhdGUoKTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOVikge1xuICAgICAgYXdhaXQgZGF0YWJhc2Uuc3luYyh7IGZvcmNlOiBmYWxzZSB9KTtcbiAgICB9XG5cbiAgICBhcHAudXNlKGNvcnMoKSk7XG4gICAgYXBwLnVzZShwYXNzcG9ydC5pbml0aWFsaXplKCkpO1xuXG4gICAgYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG4gICAgYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5cbiAgICBhcHAuZ2V0KFwiL1wiLCAocmVxdWVzdCwgcmVzcG9uc2UpID0+IHtcbiAgICAgIHJlc3BvbnNlLnNlbmQoXCJQbGVhc2UgZmVlbCBmcmVlIHRvIHVzZSBvdXIgYXBpIHdpdGggL2FwaVwiKTtcbiAgICB9KTtcblxuICAgIGFwcC51c2UoXCIvYXBpXCIsIGFwaSk7XG5cbiAgICBhcHAubGlzdGVuKHBvcnQsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBTZXJ2ZXIgaXMgcnVubmluZyBpbiAke2hvc3R9IGF0ICR7cG9ydH1gKTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXgpIHtcbiAgICBjb25zb2xlLmxvZyhleC5tZXNzYWdlKTtcbiAgfVxufTtcblxuLy8gTGV0J3MgUm9jayEgOilcbnN0YXJ0KCk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "start",
        "host",
        "process",
        "env",
        "HOST",
        "port",
        "parseInt",
        "argv",
        "PORT",
        "app",
        "database",
        "authenticate",
        "NODE_ENV",
        "sync",
        "force",
        "use",
        "passport",
        "initialize",
        "bodyParser",
        "urlencoded",
        "extended",
        "json",
        "get",
        "request",
        "response",
        "send",
        "api",
        "listen",
        "console",
        "log",
        "ex",
        "message"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;AAEA,MAAMA,KAAK,GAAG,YAAY;AACxB,MAAI;AACF,UAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAzB;AACA,UAAMC,IAAI,GAAGC,QAAQ,CAACJ,OAAO,CAACK,IAAR,CAAa,CAAb,KAAmBL,OAAO,CAACC,GAAR,CAAYK,IAAhC,CAArB;AACA,UAAMC,GAAG,GAAG,uBAAZ;AAEA,UAAMC,WAASC,YAAT,EAAN;;AAEA,QAAIT,OAAO,CAACC,GAAR,CAAYS,QAAhB,EAA0B;AACxB,YAAMF,WAASG,IAAT,CAAc;AAAEC,QAAAA,KAAK,EAAE;AAAT,OAAd,CAAN;AACD;;AAEDL,IAAAA,GAAG,CAACM,GAAJ,CAAQ,oBAAR;AACAN,IAAAA,GAAG,CAACM,GAAJ,CAAQC,kBAASC,UAAT,EAAR;AAEAR,IAAAA,GAAG,CAACM,GAAJ,CAAQG,oBAAWC,UAAX,CAAsB;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAtB,CAAR;AACAX,IAAAA,GAAG,CAACM,GAAJ,CAAQG,oBAAWG,IAAX,EAAR;AAEAZ,IAAAA,GAAG,CAACa,GAAJ,CAAQ,GAAR,EAAa,CAACC,OAAD,EAAUC,QAAV,KAAuB;AAClCA,MAAAA,QAAQ,CAACC,IAAT,CAAc,2CAAd;AACD,KAFD;AAIAhB,IAAAA,GAAG,CAACM,GAAJ,CAAQ,MAAR,EAAgBW,eAAhB;AAEAjB,IAAAA,GAAG,CAACkB,MAAJ,CAAWtB,IAAX,EAAiB,MAAM;AACrBuB,MAAAA,OAAO,CAACC,GAAR,CAAa,wBAAuB5B,IAAK,OAAMI,IAAK,EAApD;AACD,KAFD;AAGD,GA1BD,CA0BE,OAAOyB,EAAP,EAAW;AACXF,IAAAA,OAAO,CAACC,GAAR,CAAYC,EAAE,CAACC,OAAf;AACD;AACF,CA9BD,C,CAgCA;;;AACA/B,KAAK",
      "sourceRoot": "/home/benjamin/Documents/project/server",
      "sourcesContent": [
        "import express from \"express\";\nimport bodyParser from \"body-parser\";\nimport api from \"./routes\";\nimport { db as database } from \"./models\";\nimport passport from \"passport\";\nimport cors from \"cors\";\n\nimport \"./middlewares/passport\";\n\nconst start = async () => {\n  try {\n    const host = process.env.HOST;\n    const port = parseInt(process.argv[2] || process.env.PORT);\n    const app = express();\n\n    await database.authenticate();\n\n    if (process.env.NODE_ENV) {\n      await database.sync({ force: false });\n    }\n\n    app.use(cors());\n    app.use(passport.initialize());\n\n    app.use(bodyParser.urlencoded({ extended: true }));\n    app.use(bodyParser.json());\n\n    app.get(\"/\", (request, response) => {\n      response.send(\"Please feel free to use our api with /api\");\n    });\n\n    app.use(\"/api\", api);\n\n    app.listen(port, () => {\n      console.log(`Server is running in ${host} at ${port}`);\n    });\n  } catch (ex) {\n    console.log(ex.message);\n  }\n};\n\n// Let's Rock! :)\nstart();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545216996000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/routes/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/routes/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/routes/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/routes",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _auth = _interopRequireDefault(require(\"./auth\"));\n\nvar _secured = _interopRequireDefault(require(\"./secured\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.get(\"/\", (req, res) => {\n  res.json({\n    name: \"sanji.Api\",\n    meta: {\n      version: \"1.0.0\",\n      status: \"running\"\n    }\n  });\n});\napi.use(\"/auth\", _auth.default);\napi.use(\"/\", _passport.default.authenticate(\"jwt\", {\n  session: false\n}), _secured.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsImpzb24iLCJuYW1lIiwibWV0YSIsInZlcnNpb24iLCJzdGF0dXMiLCJ1c2UiLCJhdXRoIiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzZXNzaW9uIiwic2VjdXJlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLHNCQUFaO0FBRUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUN6QkEsRUFBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVM7QUFDUEMsSUFBQUEsSUFBSSxFQUFFLFdBREM7QUFFUEMsSUFBQUEsSUFBSSxFQUFFO0FBQ0pDLE1BQUFBLE9BQU8sRUFBRSxPQURMO0FBRUpDLE1BQUFBLE1BQU0sRUFBRTtBQUZKO0FBRkMsR0FBVDtBQU9ELENBUkQ7QUFVQVIsR0FBRyxDQUFDUyxHQUFKLENBQVEsT0FBUixFQUFpQkMsYUFBakI7QUFDQVYsR0FBRyxDQUFDUyxHQUFKLENBQVEsR0FBUixFQUFhRSxrQkFBU0MsWUFBVCxDQUFzQixLQUF0QixFQUE2QjtBQUFFQyxFQUFBQSxPQUFPLEVBQUU7QUFBWCxDQUE3QixDQUFiLEVBQStEQyxnQkFBL0Q7ZUFFZWQsRyIsInNvdXJjZVJvb3QiOiIvaG9tZS9iZW5qYW1pbi9Eb2N1bWVudHMvcHJvamVjdC9zZXJ2ZXIvcm91dGVzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCBwYXNzcG9ydCBmcm9tIFwicGFzc3BvcnRcIjtcbmltcG9ydCBhdXRoIGZyb20gXCIuL2F1dGhcIjtcbmltcG9ydCBzZWN1cmVkIGZyb20gXCIuL3NlY3VyZWRcIjtcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cbmFwaS5nZXQoXCIvXCIsIChyZXEsIHJlcykgPT4ge1xuICByZXMuanNvbih7XG4gICAgbmFtZTogXCJzYW5qaS5BcGlcIixcbiAgICBtZXRhOiB7XG4gICAgICB2ZXJzaW9uOiBcIjEuMC4wXCIsXG4gICAgICBzdGF0dXM6IFwicnVubmluZ1wiXG4gICAgfVxuICB9KTtcbn0pO1xuXG5hcGkudXNlKFwiL2F1dGhcIiwgYXV0aCk7XG5hcGkudXNlKFwiL1wiLCBwYXNzcG9ydC5hdXRoZW50aWNhdGUoXCJqd3RcIiwgeyBzZXNzaW9uOiBmYWxzZSB9KSwgc2VjdXJlZCk7XG5cbmV4cG9ydCBkZWZhdWx0IGFwaTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "json",
        "name",
        "meta",
        "version",
        "status",
        "use",
        "auth",
        "passport",
        "authenticate",
        "session",
        "secured"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,EAAAA,GAAG,CAACC,IAAJ,CAAS;AACPC,IAAAA,IAAI,EAAE,WADC;AAEPC,IAAAA,IAAI,EAAE;AACJC,MAAAA,OAAO,EAAE,OADL;AAEJC,MAAAA,MAAM,EAAE;AAFJ;AAFC,GAAT;AAOD,CARD;AAUAR,GAAG,CAACS,GAAJ,CAAQ,OAAR,EAAiBC,aAAjB;AACAV,GAAG,CAACS,GAAJ,CAAQ,GAAR,EAAaE,kBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAA7B,CAAb,EAA+DC,gBAA/D;eAEed,G",
      "sourceRoot": "/home/benjamin/Documents/project/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport passport from \"passport\";\nimport auth from \"./auth\";\nimport secured from \"./secured\";\n\nconst api = Router();\n\napi.get(\"/\", (req, res) => {\n  res.json({\n    name: \"sanji.Api\",\n    meta: {\n      version: \"1.0.0\",\n      status: \"running\"\n    }\n  });\n});\n\napi.use(\"/auth\", auth);\napi.use(\"/\", passport.authenticate(\"jwt\", { session: false }), secured);\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545216996000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/routes/auth.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/routes/auth.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/routes/auth.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/routes/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/routes",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _user = _interopRequireDefault(require(\"../models/user\"));\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.post(\"/register\", async (req, res) => {\n  const {\n    nickname,\n    email,\n    password,\n    password_confirmation\n  } = req.body;\n\n  try {\n    const user = new _user.default({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n    await user.save();\n    const payload = {\n      uuid: user.uuid,\n      nickname,\n      email\n    };\n\n    const token = _jsonwebtoken.default.sign(payload, \"mysupersecret\");\n\n    res.status(201).json({\n      data: {\n        user\n      },\n      meta: {\n        token\n      }\n    });\n  } catch (err) {\n    console.log(err.message);\n    res.json({\n      err: err.message\n    });\n  }\n});\napi.post(\"/login\", async (req, res) => {\n  _passport.default.authenticate(\"local\", {\n    session: false\n  }, (err, user) => {\n    if (err) {\n      res.status(400).json({\n        error: {\n          message: err\n        }\n      });\n    }\n\n    const {\n      uuid,\n      nickname,\n      email\n    } = user;\n    const payload = {\n      uuid,\n      nickname,\n      email\n    };\n\n    const token = _jsonwebtoken.default.sign(payload, process.env.JWT_ENCRYPTION);\n\n    res.status(200).json({\n      data: {\n        user\n      },\n      meta: {\n        token\n      }\n    });\n  })(req, res);\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiYXBpIiwicG9zdCIsInJlcSIsInJlcyIsIm5pY2tuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInBhc3N3b3JkX2NvbmZpcm1hdGlvbiIsImJvZHkiLCJ1c2VyIiwiVXNlciIsInNhdmUiLCJwYXlsb2FkIiwidXVpZCIsInRva2VuIiwiand0Iiwic2lnbiIsInN0YXR1cyIsImpzb24iLCJkYXRhIiwibWV0YSIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzZXNzaW9uIiwiZXJyb3IiLCJwcm9jZXNzIiwiZW52IiwiSldUX0VOQ1JZUFRJT04iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLEdBQUcsR0FBRyxzQkFBWjtBQUVBQSxHQUFHLENBQUNDLElBQUosQ0FBUyxXQUFULEVBQXNCLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUN4QyxRQUFNO0FBQUVDLElBQUFBLFFBQUY7QUFBWUMsSUFBQUEsS0FBWjtBQUFtQkMsSUFBQUEsUUFBbkI7QUFBNkJDLElBQUFBO0FBQTdCLE1BQXVETCxHQUFHLENBQUNNLElBQWpFOztBQUVBLE1BQUk7QUFDRixVQUFNQyxJQUFJLEdBQUcsSUFBSUMsYUFBSixDQUFTO0FBQ3BCTixNQUFBQSxRQURvQjtBQUVwQkMsTUFBQUEsS0FGb0I7QUFHcEJDLE1BQUFBLFFBSG9CO0FBSXBCQyxNQUFBQTtBQUpvQixLQUFULENBQWI7QUFPQSxVQUFNRSxJQUFJLENBQUNFLElBQUwsRUFBTjtBQUVBLFVBQU1DLE9BQU8sR0FBRztBQUFFQyxNQUFBQSxJQUFJLEVBQUVKLElBQUksQ0FBQ0ksSUFBYjtBQUFtQlQsTUFBQUEsUUFBbkI7QUFBNkJDLE1BQUFBO0FBQTdCLEtBQWhCOztBQUNBLFVBQU1TLEtBQUssR0FBR0Msc0JBQUlDLElBQUosQ0FBU0osT0FBVCxFQUFrQixlQUFsQixDQUFkOztBQUVBVCxJQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUU7QUFBRVYsUUFBQUE7QUFBRixPQUFSO0FBQWtCVyxNQUFBQSxJQUFJLEVBQUU7QUFBRU4sUUFBQUE7QUFBRjtBQUF4QixLQUFyQjtBQUNELEdBZEQsQ0FjRSxPQUFPTyxHQUFQLEVBQVk7QUFDWkMsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlGLEdBQUcsQ0FBQ0csT0FBaEI7QUFDQXJCLElBQUFBLEdBQUcsQ0FBQ2UsSUFBSixDQUFTO0FBQUVHLE1BQUFBLEdBQUcsRUFBRUEsR0FBRyxDQUFDRztBQUFYLEtBQVQ7QUFDRDtBQUNGLENBckJEO0FBdUJBeEIsR0FBRyxDQUFDQyxJQUFKLENBQVMsUUFBVCxFQUFtQixPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDckNzQixvQkFBU0MsWUFBVCxDQUFzQixPQUF0QixFQUErQjtBQUFFQyxJQUFBQSxPQUFPLEVBQUU7QUFBWCxHQUEvQixFQUFtRCxDQUFDTixHQUFELEVBQU1aLElBQU4sS0FBZTtBQUNoRSxRQUFJWSxHQUFKLEVBQVM7QUFDUGxCLE1BQUFBLEdBQUcsQ0FBQ2MsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ25CVSxRQUFBQSxLQUFLLEVBQUU7QUFBRUosVUFBQUEsT0FBTyxFQUFFSDtBQUFYO0FBRFksT0FBckI7QUFHRDs7QUFFRCxVQUFNO0FBQUVSLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsUUFBNEJJLElBQWxDO0FBQ0EsVUFBTUcsT0FBTyxHQUFHO0FBQUVDLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsS0FBaEI7O0FBQ0EsVUFBTVMsS0FBSyxHQUFHQyxzQkFBSUMsSUFBSixDQUFTSixPQUFULEVBQWtCaUIsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGNBQTlCLENBQWQ7O0FBRUE1QixJQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUU7QUFBRVYsUUFBQUE7QUFBRixPQUFSO0FBQWtCVyxNQUFBQSxJQUFJLEVBQUU7QUFBRU4sUUFBQUE7QUFBRjtBQUF4QixLQUFyQjtBQUNELEdBWkQsRUFZR1osR0FaSCxFQVlRQyxHQVpSO0FBYUQsQ0FkRDtlQWdCZUgsRyIsInNvdXJjZVJvb3QiOiIvaG9tZS9iZW5qYW1pbi9Eb2N1bWVudHMvcHJvamVjdC9zZXJ2ZXIvcm91dGVzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuaW1wb3J0IFVzZXIgZnJvbSBcIi4uL21vZGVscy91c2VyXCI7XG5pbXBvcnQgcGFzc3BvcnQgZnJvbSBcInBhc3Nwb3J0XCI7XG5cbmNvbnN0IGFwaSA9IFJvdXRlcigpO1xuXG5hcGkucG9zdChcIi9yZWdpc3RlclwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBuaWNrbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBwYXNzd29yZF9jb25maXJtYXRpb24gfSA9IHJlcS5ib2R5O1xuXG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHtcbiAgICAgIG5pY2tuYW1lLFxuICAgICAgZW1haWwsXG4gICAgICBwYXNzd29yZCxcbiAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvblxuICAgIH0pO1xuXG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XG5cbiAgICBjb25zdCBwYXlsb2FkID0geyB1dWlkOiB1c2VyLnV1aWQsIG5pY2tuYW1lLCBlbWFpbCB9O1xuICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24ocGF5bG9hZCwgXCJteXN1cGVyc2VjcmV0XCIpO1xuXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBkYXRhOiB7IHVzZXIgfSwgbWV0YTogeyB0b2tlbiB9IH0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgcmVzLmpzb24oeyBlcnI6IGVyci5tZXNzYWdlIH0pO1xuICB9XG59KTtcblxuYXBpLnBvc3QoXCIvbG9naW5cIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZShcImxvY2FsXCIsIHsgc2Vzc2lvbjogZmFsc2UgfSwgKGVyciwgdXNlcikgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogZXJyIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdXVpZCwgbmlja25hbWUsIGVtYWlsIH0gPSB1c2VyO1xuICAgIGNvbnN0IHBheWxvYWQgPSB7IHV1aWQsIG5pY2tuYW1lLCBlbWFpbCB9O1xuICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24ocGF5bG9hZCwgcHJvY2Vzcy5lbnYuSldUX0VOQ1JZUFRJT04pO1xuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBkYXRhOiB7IHVzZXIgfSwgbWV0YTogeyB0b2tlbiB9IH0pO1xuICB9KShyZXEsIHJlcyk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgYXBpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "api",
        "post",
        "req",
        "res",
        "nickname",
        "email",
        "password",
        "password_confirmation",
        "body",
        "user",
        "User",
        "save",
        "payload",
        "uuid",
        "token",
        "jwt",
        "sign",
        "status",
        "json",
        "data",
        "meta",
        "err",
        "console",
        "log",
        "message",
        "passport",
        "authenticate",
        "session",
        "error",
        "process",
        "env",
        "JWT_ENCRYPTION"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,IAAJ,CAAS,WAAT,EAAsB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACxC,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,KAAZ;AAAmBC,IAAAA,QAAnB;AAA6BC,IAAAA;AAA7B,MAAuDL,GAAG,CAACM,IAAjE;;AAEA,MAAI;AACF,UAAMC,IAAI,GAAG,IAAIC,aAAJ,CAAS;AACpBN,MAAAA,QADoB;AAEpBC,MAAAA,KAFoB;AAGpBC,MAAAA,QAHoB;AAIpBC,MAAAA;AAJoB,KAAT,CAAb;AAOA,UAAME,IAAI,CAACE,IAAL,EAAN;AAEA,UAAMC,OAAO,GAAG;AAAEC,MAAAA,IAAI,EAAEJ,IAAI,CAACI,IAAb;AAAmBT,MAAAA,QAAnB;AAA6BC,MAAAA;AAA7B,KAAhB;;AACA,UAAMS,KAAK,GAAGC,sBAAIC,IAAJ,CAASJ,OAAT,EAAkB,eAAlB,CAAd;;AAEAT,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,IAAI,EAAE;AAAEV,QAAAA;AAAF,OAAR;AAAkBW,MAAAA,IAAI,EAAE;AAAEN,QAAAA;AAAF;AAAxB,KAArB;AACD,GAdD,CAcE,OAAOO,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACArB,IAAAA,GAAG,CAACe,IAAJ,CAAS;AAAEG,MAAAA,GAAG,EAAEA,GAAG,CAACG;AAAX,KAAT;AACD;AACF,CArBD;AAuBAxB,GAAG,CAACC,IAAJ,CAAS,QAAT,EAAmB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACrCsB,oBAASC,YAAT,CAAsB,OAAtB,EAA+B;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAA/B,EAAmD,CAACN,GAAD,EAAMZ,IAAN,KAAe;AAChE,QAAIY,GAAJ,EAAS;AACPlB,MAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBU,QAAAA,KAAK,EAAE;AAAEJ,UAAAA,OAAO,EAAEH;AAAX;AADY,OAArB;AAGD;;AAED,UAAM;AAAER,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,QAA4BI,IAAlC;AACA,UAAMG,OAAO,GAAG;AAAEC,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,KAAhB;;AACA,UAAMS,KAAK,GAAGC,sBAAIC,IAAJ,CAASJ,OAAT,EAAkBiB,OAAO,CAACC,GAAR,CAAYC,cAA9B,CAAd;;AAEA5B,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,IAAI,EAAE;AAAEV,QAAAA;AAAF,OAAR;AAAkBW,MAAAA,IAAI,EAAE;AAAEN,QAAAA;AAAF;AAAxB,KAArB;AACD,GAZD,EAYGZ,GAZH,EAYQC,GAZR;AAaD,CAdD;eAgBeH,G",
      "sourceRoot": "/home/benjamin/Documents/project/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport jwt from \"jsonwebtoken\";\nimport User from \"../models/user\";\nimport passport from \"passport\";\n\nconst api = Router();\n\napi.post(\"/register\", async (req, res) => {\n  const { nickname, email, password, password_confirmation } = req.body;\n\n  try {\n    const user = new User({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n\n    await user.save();\n\n    const payload = { uuid: user.uuid, nickname, email };\n    const token = jwt.sign(payload, \"mysupersecret\");\n\n    res.status(201).json({ data: { user }, meta: { token } });\n  } catch (err) {\n    console.log(err.message);\n    res.json({ err: err.message });\n  }\n});\n\napi.post(\"/login\", async (req, res) => {\n  passport.authenticate(\"local\", { session: false }, (err, user) => {\n    if (err) {\n      res.status(400).json({\n        error: { message: err }\n      });\n    }\n\n    const { uuid, nickname, email } = user;\n    const payload = { uuid, nickname, email };\n    const token = jwt.sign(payload, process.env.JWT_ENCRYPTION);\n\n    res.status(200).json({ data: { user }, meta: { token } });\n  })(req, res);\n});\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545216996000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/models/user.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/models/user.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/models/user.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/models/user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/models",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sequelize = _interopRequireWildcard(require(\"sequelize\"));\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nclass User extends _sequelize.Model {\n  static init(database) {\n    return super.init({\n      uuid: {\n        type: _sequelize.default.UUID,\n        primaryKey: true,\n        defaultValue: _sequelize.default.UUIDV4\n      },\n      nickname: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        unique: {\n          args: true,\n          msg: \"Nickname already in use\"\n        },\n        validate: {\n          isLongEnough(v) {\n            if (v.length < 5) {\n              throw new Error(\"Nickname must have at least 5 characters\");\n            }\n          }\n\n        }\n      },\n      email: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          isEmail: true\n        },\n        unique: {\n          args: true,\n          msg: \"Email already in use\"\n        }\n      },\n      password_digest: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          notEmpty: true\n        }\n      },\n      password: {\n        type: _sequelize.default.VIRTUAL,\n        validate: {\n          isLongEnough(v) {\n            if (v.length < 7) {\n              throw new Error(\"Password must have at least 7 characters\");\n            }\n          }\n\n        }\n      },\n      password_confirmation: {\n        type: _sequelize.default.VIRTUAL,\n        validate: {\n          isEqual(v) {\n            if (v !== this.password) {\n              throw new Error(\"Password confirmation doesn't match password\");\n            }\n          }\n\n        }\n      }\n    }, {\n      tableName: \"users\",\n      sequelize: database,\n      indexes: [{\n        unique: true,\n        fields: [\"uuid\", \"nickname\", \"email\"]\n      }],\n      hooks: {\n        async beforeValidate(userInstance) {\n          userInstance.password_digest = await userInstance.generateHash();\n        },\n\n        async beforeSave(userInstance) {\n          if (!userInstance.isNewRecord && userInstance.changed(\"password\")) {\n            userInstance.password_digest = await userInstance.generateHash();\n          }\n        }\n\n      }\n    });\n  }\n\n  async generateHash() {\n    const SALT_ROUND = 5;\n    const hash = await _bcrypt.default.hash(this.password, SALT_ROUND);\n\n    if (!hash) {\n      throw new Error(\"Can't hash password\");\n    }\n\n    return hash;\n  }\n\n  async checkPassword(password) {\n    return _bcrypt.default.compare(password, this.password_digest);\n  }\n\n  toJSON() {\n    const values = Object.assign({}, this.get());\n    delete values.password_digest;\n    return values;\n  }\n\n}\n\nexports.default = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiVXNlciIsIk1vZGVsIiwiaW5pdCIsImRhdGFiYXNlIiwidXVpZCIsInR5cGUiLCJTZXF1ZWxpemUiLCJVVUlEIiwicHJpbWFyeUtleSIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsIm5pY2tuYW1lIiwiU1RSSU5HIiwiYWxsb3dOdWxsIiwidW5pcXVlIiwiYXJncyIsIm1zZyIsInZhbGlkYXRlIiwiaXNMb25nRW5vdWdoIiwidiIsImxlbmd0aCIsIkVycm9yIiwiZW1haWwiLCJpc0VtYWlsIiwicGFzc3dvcmRfZGlnZXN0Iiwibm90RW1wdHkiLCJwYXNzd29yZCIsIlZJUlRVQUwiLCJwYXNzd29yZF9jb25maXJtYXRpb24iLCJpc0VxdWFsIiwidGFibGVOYW1lIiwic2VxdWVsaXplIiwiaW5kZXhlcyIsImZpZWxkcyIsImhvb2tzIiwiYmVmb3JlVmFsaWRhdGUiLCJ1c2VySW5zdGFuY2UiLCJnZW5lcmF0ZUhhc2giLCJiZWZvcmVTYXZlIiwiaXNOZXdSZWNvcmQiLCJjaGFuZ2VkIiwiU0FMVF9ST1VORCIsImhhc2giLCJiY3J5cHQiLCJjaGVja1Bhc3N3b3JkIiwiY29tcGFyZSIsInRvSlNPTiIsInZhbHVlcyIsIk9iamVjdCIsImFzc2lnbiIsImdldCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7Ozs7QUFFZSxNQUFNQSxJQUFOLFNBQW1CQyxnQkFBbkIsQ0FBeUI7QUFDdEMsU0FBT0MsSUFBUCxDQUFZQyxRQUFaLEVBQXNCO0FBQ3BCLFdBQU8sTUFBTUQsSUFBTixDQUNMO0FBQ0VFLE1BQUFBLElBQUksRUFBRTtBQUNKQyxRQUFBQSxJQUFJLEVBQUVDLG1CQUFVQyxJQURaO0FBRUpDLFFBQUFBLFVBQVUsRUFBRSxJQUZSO0FBR0pDLFFBQUFBLFlBQVksRUFBRUgsbUJBQVVJO0FBSHBCLE9BRFI7QUFNRUMsTUFBQUEsUUFBUSxFQUFFO0FBQ1JOLFFBQUFBLElBQUksRUFBRUMsbUJBQVVNLE1BRFI7QUFF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SXJCLEtBQUosQ0FBVSxxQkFBVixDQUFOO0FBQ0Q7O0FBRUQsV0FBT3FCLElBQVA7QUFDRDs7QUFFRCxRQUFNRSxhQUFOLENBQW9CbEIsUUFBcEIsRUFBOEI7QUFDNUIsV0FBT2lCLGdCQUFPRSxPQUFQLENBQWVuQixRQUFmLEVBQXlCLEtBQUtGLGVBQTlCLENBQVA7QUFDRDs7QUFFRHNCLEVBQUFBLE1BQU0sR0FBRztBQUNQLFVBQU1DLE1BQU0sR0FBR0MsTUFBTSxDQUFDQyxNQUFQLENBQWMsRUFBZCxFQUFrQixLQUFLQyxHQUFMLEVBQWxCLENBQWY7QUFFQSxXQUFPSCxNQUFNLENBQUN2QixlQUFkO0FBRUEsV0FBT3VCLE1BQVA7QUFDRDs7QUE5R3FDIiwic291cmNlUm9vdCI6Ii9ob21lL2JlbmphbWluL0RvY3VtZW50cy9wcm9qZWN0L3NlcnZlci9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU2VxdWVsaXplLCB7IE1vZGVsIH0gZnJvbSBcInNlcXVlbGl6ZVwiO1xuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXIgZXh0ZW5kcyBNb2RlbCB7XG4gIHN0YXRpYyBpbml0KGRhdGFiYXNlKSB7XG4gICAgcmV0dXJuIHN1cGVyLmluaXQoXG4gICAgICB7XG4gICAgICAgIHV1aWQ6IHtcbiAgICAgICAgICB0eXBlOiBTZXF1ZWxpemUuVVVJRCxcbiAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogU2VxdWVsaXplLlVVSURWNFxuICAgICAgICB9LFxuICAgICAgICBuaWNrbmFtZToge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsXG4gICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICB1bmlxdWU6IHtcbiAgICAgICAgICAgIGFyZ3M6IHRydWUsXG4gICAgICAgICAgICBtc2c6IFwiTmlja25hbWUgYWxyZWFkeSBpbiB1c2VcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGlzTG9uZ0Vub3VnaCh2KSB7XG4gICAgICAgICAgICAgIGlmICh2Lmxlbmd0aCA8IDUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOaWNrbmFtZSBtdXN0IGhhdmUgYXQgbGVhc3QgNSBjaGFyYWN0ZXJzXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbWFpbDoge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsXG4gICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgaXNFbWFpbDogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdW5pcXVlOiB7XG4gICAgICAgICAgICBhcmdzOiB0cnVlLFxuICAgICAgICAgICAgbXNnOiBcIkVtYWlsIGFscmVhZHkgaW4gdXNlXCJcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBhc3N3b3JkX2RpZ2VzdDoge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsXG4gICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbm90RW1wdHk6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLlZJUlRVQUwsXG4gICAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGlzTG9uZ0Vub3VnaCh2KSB7XG4gICAgICAgICAgICAgIGlmICh2Lmxlbmd0aCA8IDcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXNzd29yZCBtdXN0IGhhdmUgYXQgbGVhc3QgNyBjaGFyYWN0ZXJzXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwYXNzd29yZF9jb25maXJtYXRpb246IHtcbiAgICAgICAgICB0eXBlOiBTZXF1ZWxpemUuVklSVFVBTCxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgaXNFcXVhbCh2KSB7XG4gICAgICAgICAgICAgIGlmICh2ICE9PSB0aGlzLnBhc3N3b3JkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFzc3dvcmQgY29uZmlybWF0aW9uIGRvZXNuJ3QgbWF0Y2ggcGFzc3dvcmRcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogXCJ1c2Vyc1wiLFxuICAgICAgICBzZXF1ZWxpemU6IGRhdGFiYXNlLFxuXG4gICAgICAgIGluZGV4ZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgICAgICBmaWVsZHM6IFtcInV1aWRcIiwgXCJuaWNrbmFtZVwiLCBcImVtYWlsXCJdXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuXG4gICAgICAgIGhvb2tzOiB7XG4gICAgICAgICAgYXN5bmMgYmVmb3JlVmFsaWRhdGUodXNlckluc3RhbmNlKSB7XG4gICAgICAgICAgICB1c2VySW5zdGFuY2UucGFzc3dvcmRfZGlnZXN0ID0gYXdhaXQgdXNlckluc3RhbmNlLmdlbmVyYXRlSGFzaCgpO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICBhc3luYyBiZWZvcmVTYXZlKHVzZXJJbnN0YW5jZSkge1xuICAgICAgICAgICAgaWYgKCF1c2VySW5zdGFuY2UuaXNOZXdSZWNvcmQgJiYgdXNlckluc3RhbmNlLmNoYW5nZWQoXCJwYXNzd29yZFwiKSkge1xuICAgICAgICAgICAgICB1c2VySW5zdGFuY2UucGFzc3dvcmRfZGlnZXN0ID0gYXdhaXQgdXNlckluc3RhbmNlLmdlbmVyYXRlSGFzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBhc3luYyBnZW5lcmF0ZUhhc2goKSB7XG4gICAgY29uc3QgU0FMVF9ST1VORCA9IDU7XG5cbiAgICBjb25zdCBoYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2godGhpcy5wYXNzd29yZCwgU0FMVF9ST1VORCk7XG4gICAgaWYgKCFoYXNoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBoYXNoIHBhc3N3b3JkXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBoYXNoO1xuICB9XG5cbiAgYXN5bmMgY2hlY2tQYXNzd29yZChwYXNzd29yZCkge1xuICAgIHJldHVybiBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdGhpcy5wYXNzd29yZF9kaWdlc3QpO1xuICB9XG5cbiAgdG9KU09OKCkge1xuICAgIGNvbnN0IHZhbHVlcyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZ2V0KCkpO1xuXG4gICAgZGVsZXRlIHZhbHVlcy5wYXNzd29yZF9kaWdlc3Q7XG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9XG59XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "User",
        "Model",
        "init",
        "database",
        "uuid",
        "type",
        "Sequelize",
        "UUID",
        "primaryKey",
        "defaultValue",
        "UUIDV4",
        "nickname",
        "STRING",
        "allowNull",
        "unique",
        "args",
        "msg",
        "validate",
        "isLongEnough",
        "v",
        "length",
        "Error",
        "email",
        "isEmail",
        "password_digest",
        "notEmpty",
        "password",
        "VIRTUAL",
        "password_confirmation",
        "isEqual",
        "tableName",
        "sequelize",
        "indexes",
        "fields",
        "hooks",
        "beforeValidate",
        "userInstance",
        "generateHash",
        "beforeSave",
        "isNewRecord",
        "changed",
        "SALT_ROUND",
        "hash",
        "bcrypt",
        "checkPassword",
        "compare",
        "toJSON",
        "values",
        "Object",
        "assign",
        "get"
      ],
      "mappings": "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",
      "sourceRoot": "/home/benjamin/Documents/project/server/models",
      "sourcesContent": [
        "import Sequelize, { Model } from \"sequelize\";\nimport bcrypt from \"bcrypt\";\n\nexport default class User extends Model {\n  static init(database) {\n    return super.init(\n      {\n        uuid: {\n          type: Sequelize.UUID,\n          primaryKey: true,\n          defaultValue: Sequelize.UUIDV4\n        },\n        nickname: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          unique: {\n            args: true,\n            msg: \"Nickname already in use\"\n          },\n          validate: {\n            isLongEnough(v) {\n              if (v.length < 5) {\n                throw new Error(\"Nickname must have at least 5 characters\");\n              }\n            }\n          }\n        },\n        email: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            isEmail: true\n          },\n          unique: {\n            args: true,\n            msg: \"Email already in use\"\n          }\n        },\n        password_digest: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            notEmpty: true\n          }\n        },\n        password: {\n          type: Sequelize.VIRTUAL,\n          validate: {\n            isLongEnough(v) {\n              if (v.length < 7) {\n                throw new Error(\"Password must have at least 7 characters\");\n              }\n            }\n          }\n        },\n        password_confirmation: {\n          type: Sequelize.VIRTUAL,\n          validate: {\n            isEqual(v) {\n              if (v !== this.password) {\n                throw new Error(\"Password confirmation doesn't match password\");\n              }\n            }\n          }\n        }\n      },\n      {\n        tableName: \"users\",\n        sequelize: database,\n\n        indexes: [\n          {\n            unique: true,\n            fields: [\"uuid\", \"nickname\", \"email\"]\n          }\n        ],\n\n        hooks: {\n          async beforeValidate(userInstance) {\n            userInstance.password_digest = await userInstance.generateHash();\n          },\n\n          async beforeSave(userInstance) {\n            if (!userInstance.isNewRecord && userInstance.changed(\"password\")) {\n              userInstance.password_digest = await userInstance.generateHash();\n            }\n          }\n        }\n      }\n    );\n  }\n\n  async generateHash() {\n    const SALT_ROUND = 5;\n\n    const hash = await bcrypt.hash(this.password, SALT_ROUND);\n    if (!hash) {\n      throw new Error(\"Can't hash password\");\n    }\n\n    return hash;\n  }\n\n  async checkPassword(password) {\n    return bcrypt.compare(password, this.password_digest);\n  }\n\n  toJSON() {\n    const values = Object.assign({}, this.get());\n\n    delete values.password_digest;\n\n    return values;\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545216996000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/routes/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/routes/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/routes/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/routes",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _auth = _interopRequireDefault(require(\"./auth\"));\n\nvar _user = _interopRequireDefault(require(\"./user\"));\n\nvar _secured = _interopRequireDefault(require(\"./secured\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.get(\"/\", (req, res) => {\n  res.json({\n    name: \"sanji.Api\",\n    meta: {\n      version: \"1.0.0\",\n      status: \"running\"\n    }\n  });\n});\napi.use(\"/auth\", _auth.default);\napi.use(\"/user\", _user.default);\napi.use(\"/\", _passport.default.authenticate(\"jwt\", {\n  session: false\n}), _secured.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsImpzb24iLCJuYW1lIiwibWV0YSIsInZlcnNpb24iLCJzdGF0dXMiLCJ1c2UiLCJhdXRoIiwidXNlciIsInBhc3Nwb3J0IiwiYXV0aGVudGljYXRlIiwic2Vzc2lvbiIsInNlY3VyZWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLEdBQUcsR0FBRyxzQkFBWjtBQUVBQSxHQUFHLENBQUNDLEdBQUosQ0FBUSxHQUFSLEVBQWEsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDekJBLEVBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTO0FBQ1BDLElBQUFBLElBQUksRUFBRSxXQURDO0FBRVBDLElBQUFBLElBQUksRUFBRTtBQUNKQyxNQUFBQSxPQUFPLEVBQUUsT0FETDtBQUVKQyxNQUFBQSxNQUFNLEVBQUU7QUFGSjtBQUZDLEdBQVQ7QUFPRCxDQVJEO0FBVUFSLEdBQUcsQ0FBQ1MsR0FBSixDQUFRLE9BQVIsRUFBaUJDLGFBQWpCO0FBQ0FWLEdBQUcsQ0FBQ1MsR0FBSixDQUFRLE9BQVIsRUFBaUJFLGFBQWpCO0FBQ0FYLEdBQUcsQ0FBQ1MsR0FBSixDQUFRLEdBQVIsRUFBYUcsa0JBQVNDLFlBQVQsQ0FBc0IsS0FBdEIsRUFBNkI7QUFBRUMsRUFBQUEsT0FBTyxFQUFFO0FBQVgsQ0FBN0IsQ0FBYixFQUErREMsZ0JBQS9EO2VBRWVmLEciLCJzb3VyY2VSb290IjoiL2hvbWUvYmVuamFtaW4vRG9jdW1lbnRzL3Byb2plY3Qvc2VydmVyL3JvdXRlcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgcGFzc3BvcnQgZnJvbSBcInBhc3Nwb3J0XCI7XG5pbXBvcnQgYXV0aCBmcm9tIFwiLi9hdXRoXCI7XG5pbXBvcnQgdXNlciBmcm9tIFwiLi91c2VyXCI7XG5pbXBvcnQgc2VjdXJlZCBmcm9tIFwiLi9zZWN1cmVkXCI7XG5cbmNvbnN0IGFwaSA9IFJvdXRlcigpO1xuXG5hcGkuZ2V0KFwiL1wiLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLmpzb24oe1xuICAgIG5hbWU6IFwic2FuamkuQXBpXCIsXG4gICAgbWV0YToge1xuICAgICAgdmVyc2lvbjogXCIxLjAuMFwiLFxuICAgICAgc3RhdHVzOiBcInJ1bm5pbmdcIlxuICAgIH1cbiAgfSk7XG59KTtcblxuYXBpLnVzZShcIi9hdXRoXCIsIGF1dGgpO1xuYXBpLnVzZShcIi91c2VyXCIsIHVzZXIpO1xuYXBpLnVzZShcIi9cIiwgcGFzc3BvcnQuYXV0aGVudGljYXRlKFwiand0XCIsIHsgc2Vzc2lvbjogZmFsc2UgfSksIHNlY3VyZWQpO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "json",
        "name",
        "meta",
        "version",
        "status",
        "use",
        "auth",
        "user",
        "passport",
        "authenticate",
        "session",
        "secured"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,EAAAA,GAAG,CAACC,IAAJ,CAAS;AACPC,IAAAA,IAAI,EAAE,WADC;AAEPC,IAAAA,IAAI,EAAE;AACJC,MAAAA,OAAO,EAAE,OADL;AAEJC,MAAAA,MAAM,EAAE;AAFJ;AAFC,GAAT;AAOD,CARD;AAUAR,GAAG,CAACS,GAAJ,CAAQ,OAAR,EAAiBC,aAAjB;AACAV,GAAG,CAACS,GAAJ,CAAQ,OAAR,EAAiBE,aAAjB;AACAX,GAAG,CAACS,GAAJ,CAAQ,GAAR,EAAaG,kBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAA7B,CAAb,EAA+DC,gBAA/D;eAEef,G",
      "sourceRoot": "/home/benjamin/Documents/project/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport passport from \"passport\";\nimport auth from \"./auth\";\nimport user from \"./user\";\nimport secured from \"./secured\";\n\nconst api = Router();\n\napi.get(\"/\", (req, res) => {\n  res.json({\n    name: \"sanji.Api\",\n    meta: {\n      version: \"1.0.0\",\n      status: \"running\"\n    }\n  });\n});\n\napi.use(\"/auth\", auth);\napi.use(\"/user\", user);\napi.use(\"/\", passport.authenticate(\"jwt\", { session: false }), secured);\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545510479251
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/routes/auth.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/routes/auth.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/routes/auth.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/routes/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/routes",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _user = _interopRequireDefault(require(\"../models/user\"));\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.post(\"/register\", async (req, res) => {\n  const {\n    nickname,\n    email,\n    password,\n    password_confirmation\n  } = req.body;\n\n  try {\n    const user = new _user.default({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n    await user.save();\n    const payload = {\n      uuid: user.uuid,\n      nickname,\n      email\n    };\n\n    const token = _jsonwebtoken.default.sign(payload, \"mysupersecret\");\n\n    res.status(201).json({\n      data: {\n        user\n      },\n      meta: {\n        token\n      }\n    });\n  } catch (err) {\n    console.log(err.message);\n    res.json({\n      err: err.message\n    });\n  }\n});\napi.post(\"/login\", async (req, res) => {\n  _passport.default.authenticate(\"local\", {\n    session: false\n  }, (err, user) => {\n    if (err) {\n      res.status(400).json({\n        error: {\n          message: err\n        }\n      });\n    }\n\n    const {\n      uuid,\n      nickname,\n      email\n    } = user;\n    const payload = {\n      uuid,\n      nickname,\n      email\n    };\n\n    const token = _jsonwebtoken.default.sign(payload, process.env.JWT_ENCRYPTION);\n\n    res.status(200).json({\n      data: {\n        user\n      },\n      meta: {\n        token\n      }\n    });\n  })(req, res);\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiYXBpIiwicG9zdCIsInJlcSIsInJlcyIsIm5pY2tuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInBhc3N3b3JkX2NvbmZpcm1hdGlvbiIsImJvZHkiLCJ1c2VyIiwiVXNlciIsInNhdmUiLCJwYXlsb2FkIiwidXVpZCIsInRva2VuIiwiand0Iiwic2lnbiIsInN0YXR1cyIsImpzb24iLCJkYXRhIiwibWV0YSIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzZXNzaW9uIiwiZXJyb3IiLCJwcm9jZXNzIiwiZW52IiwiSldUX0VOQ1JZUFRJT04iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLEdBQUcsR0FBRyxzQkFBWjtBQUVBQSxHQUFHLENBQUNDLElBQUosQ0FBUyxXQUFULEVBQXNCLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUN4QyxRQUFNO0FBQUVDLElBQUFBLFFBQUY7QUFBWUMsSUFBQUEsS0FBWjtBQUFtQkMsSUFBQUEsUUFBbkI7QUFBNkJDLElBQUFBO0FBQTdCLE1BQXVETCxHQUFHLENBQUNNLElBQWpFOztBQUVBLE1BQUk7QUFDRixVQUFNQyxJQUFJLEdBQUcsSUFBSUMsYUFBSixDQUFTO0FBQ3BCTixNQUFBQSxRQURvQjtBQUVwQkMsTUFBQUEsS0FGb0I7QUFHcEJDLE1BQUFBLFFBSG9CO0FBSXBCQyxNQUFBQTtBQUpvQixLQUFULENBQWI7QUFPQSxVQUFNRSxJQUFJLENBQUNFLElBQUwsRUFBTjtBQUVBLFVBQU1DLE9BQU8sR0FBRztBQUFFQyxNQUFBQSxJQUFJLEVBQUVKLElBQUksQ0FBQ0ksSUFBYjtBQUFtQlQsTUFBQUEsUUFBbkI7QUFBNkJDLE1BQUFBO0FBQTdCLEtBQWhCOztBQUNBLFVBQU1TLEtBQUssR0FBR0Msc0JBQUlDLElBQUosQ0FBU0osT0FBVCxFQUFrQixlQUFsQixDQUFkOztBQUVBVCxJQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUU7QUFBRVYsUUFBQUE7QUFBRixPQUFSO0FBQWtCVyxNQUFBQSxJQUFJLEVBQUU7QUFBRU4sUUFBQUE7QUFBRjtBQUF4QixLQUFyQjtBQUNELEdBZEQsQ0FjRSxPQUFPTyxHQUFQLEVBQVk7QUFDWkMsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlGLEdBQUcsQ0FBQ0csT0FBaEI7QUFDQXJCLElBQUFBLEdBQUcsQ0FBQ2UsSUFBSixDQUFTO0FBQUVHLE1BQUFBLEdBQUcsRUFBRUEsR0FBRyxDQUFDRztBQUFYLEtBQVQ7QUFDRDtBQUNGLENBckJEO0FBdUJBeEIsR0FBRyxDQUFDQyxJQUFKLENBQVMsUUFBVCxFQUFtQixPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDckNzQixvQkFBU0MsWUFBVCxDQUFzQixPQUF0QixFQUErQjtBQUFFQyxJQUFBQSxPQUFPLEVBQUU7QUFBWCxHQUEvQixFQUFtRCxDQUFDTixHQUFELEVBQU1aLElBQU4sS0FBZTtBQUNoRSxRQUFJWSxHQUFKLEVBQVM7QUFDUGxCLE1BQUFBLEdBQUcsQ0FBQ2MsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ25CVSxRQUFBQSxLQUFLLEVBQUU7QUFBRUosVUFBQUEsT0FBTyxFQUFFSDtBQUFYO0FBRFksT0FBckI7QUFHRDs7QUFFRCxVQUFNO0FBQUVSLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsUUFBNEJJLElBQWxDO0FBQ0EsVUFBTUcsT0FBTyxHQUFHO0FBQUVDLE1BQUFBLElBQUY7QUFBUVQsTUFBQUEsUUFBUjtBQUFrQkMsTUFBQUE7QUFBbEIsS0FBaEI7O0FBQ0EsVUFBTVMsS0FBSyxHQUFHQyxzQkFBSUMsSUFBSixDQUFTSixPQUFULEVBQWtCaUIsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGNBQTlCLENBQWQ7O0FBRUE1QixJQUFBQSxHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUU7QUFBRVYsUUFBQUE7QUFBRixPQUFSO0FBQWtCVyxNQUFBQSxJQUFJLEVBQUU7QUFBRU4sUUFBQUE7QUFBRjtBQUF4QixLQUFyQjtBQUNELEdBWkQsRUFZR1osR0FaSCxFQVlRQyxHQVpSO0FBYUQsQ0FkRDtlQWdCZUgsRyIsInNvdXJjZVJvb3QiOiIvaG9tZS9iZW5qYW1pbi9Eb2N1bWVudHMvcHJvamVjdC9zZXJ2ZXIvcm91dGVzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuaW1wb3J0IFVzZXIgZnJvbSBcIi4uL21vZGVscy91c2VyXCI7XG5pbXBvcnQgcGFzc3BvcnQgZnJvbSBcInBhc3Nwb3J0XCI7XG5cbmNvbnN0IGFwaSA9IFJvdXRlcigpO1xuXG5hcGkucG9zdChcIi9yZWdpc3RlclwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBuaWNrbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBwYXNzd29yZF9jb25maXJtYXRpb24gfSA9IHJlcS5ib2R5O1xuXG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHtcbiAgICAgIG5pY2tuYW1lLFxuICAgICAgZW1haWwsXG4gICAgICBwYXNzd29yZCxcbiAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvblxuICAgIH0pO1xuXG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XG5cbiAgICBjb25zdCBwYXlsb2FkID0geyB1dWlkOiB1c2VyLnV1aWQsIG5pY2tuYW1lLCBlbWFpbCB9O1xuICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24ocGF5bG9hZCwgXCJteXN1cGVyc2VjcmV0XCIpO1xuXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBkYXRhOiB7IHVzZXIgfSwgbWV0YTogeyB0b2tlbiB9IH0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgcmVzLmpzb24oeyBlcnI6IGVyci5tZXNzYWdlIH0pO1xuICB9XG59KTtcblxuYXBpLnBvc3QoXCIvbG9naW5cIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZShcImxvY2FsXCIsIHsgc2Vzc2lvbjogZmFsc2UgfSwgKGVyciwgdXNlcikgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogZXJyIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdXVpZCwgbmlja25hbWUsIGVtYWlsIH0gPSB1c2VyO1xuICAgIGNvbnN0IHBheWxvYWQgPSB7IHV1aWQsIG5pY2tuYW1lLCBlbWFpbCB9O1xuICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24ocGF5bG9hZCwgcHJvY2Vzcy5lbnYuSldUX0VOQ1JZUFRJT04pO1xuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBkYXRhOiB7IHVzZXIgfSwgbWV0YTogeyB0b2tlbiB9IH0pO1xuICB9KShyZXEsIHJlcyk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgYXBpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "api",
        "post",
        "req",
        "res",
        "nickname",
        "email",
        "password",
        "password_confirmation",
        "body",
        "user",
        "User",
        "save",
        "payload",
        "uuid",
        "token",
        "jwt",
        "sign",
        "status",
        "json",
        "data",
        "meta",
        "err",
        "console",
        "log",
        "message",
        "passport",
        "authenticate",
        "session",
        "error",
        "process",
        "env",
        "JWT_ENCRYPTION"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,IAAJ,CAAS,WAAT,EAAsB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACxC,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,KAAZ;AAAmBC,IAAAA,QAAnB;AAA6BC,IAAAA;AAA7B,MAAuDL,GAAG,CAACM,IAAjE;;AAEA,MAAI;AACF,UAAMC,IAAI,GAAG,IAAIC,aAAJ,CAAS;AACpBN,MAAAA,QADoB;AAEpBC,MAAAA,KAFoB;AAGpBC,MAAAA,QAHoB;AAIpBC,MAAAA;AAJoB,KAAT,CAAb;AAOA,UAAME,IAAI,CAACE,IAAL,EAAN;AAEA,UAAMC,OAAO,GAAG;AAAEC,MAAAA,IAAI,EAAEJ,IAAI,CAACI,IAAb;AAAmBT,MAAAA,QAAnB;AAA6BC,MAAAA;AAA7B,KAAhB;;AACA,UAAMS,KAAK,GAAGC,sBAAIC,IAAJ,CAASJ,OAAT,EAAkB,eAAlB,CAAd;;AAEAT,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,IAAI,EAAE;AAAEV,QAAAA;AAAF,OAAR;AAAkBW,MAAAA,IAAI,EAAE;AAAEN,QAAAA;AAAF;AAAxB,KAArB;AACD,GAdD,CAcE,OAAOO,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACArB,IAAAA,GAAG,CAACe,IAAJ,CAAS;AAAEG,MAAAA,GAAG,EAAEA,GAAG,CAACG;AAAX,KAAT;AACD;AACF,CArBD;AAuBAxB,GAAG,CAACC,IAAJ,CAAS,QAAT,EAAmB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACrCsB,oBAASC,YAAT,CAAsB,OAAtB,EAA+B;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAA/B,EAAmD,CAACN,GAAD,EAAMZ,IAAN,KAAe;AAChE,QAAIY,GAAJ,EAAS;AACPlB,MAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBU,QAAAA,KAAK,EAAE;AAAEJ,UAAAA,OAAO,EAAEH;AAAX;AADY,OAArB;AAGD;;AAED,UAAM;AAAER,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,QAA4BI,IAAlC;AACA,UAAMG,OAAO,GAAG;AAAEC,MAAAA,IAAF;AAAQT,MAAAA,QAAR;AAAkBC,MAAAA;AAAlB,KAAhB;;AACA,UAAMS,KAAK,GAAGC,sBAAIC,IAAJ,CAASJ,OAAT,EAAkBiB,OAAO,CAACC,GAAR,CAAYC,cAA9B,CAAd;;AAEA5B,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,IAAI,EAAE;AAAEV,QAAAA;AAAF,OAAR;AAAkBW,MAAAA,IAAI,EAAE;AAAEN,QAAAA;AAAF;AAAxB,KAArB;AACD,GAZD,EAYGZ,GAZH,EAYQC,GAZR;AAaD,CAdD;eAgBeH,G",
      "sourceRoot": "/home/benjamin/Documents/project/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport jwt from \"jsonwebtoken\";\nimport User from \"../models/user\";\nimport passport from \"passport\";\n\nconst api = Router();\n\napi.post(\"/register\", async (req, res) => {\n  const { nickname, email, password, password_confirmation } = req.body;\n\n  try {\n    const user = new User({\n      nickname,\n      email,\n      password,\n      password_confirmation\n    });\n\n    await user.save();\n\n    const payload = { uuid: user.uuid, nickname, email };\n    const token = jwt.sign(payload, \"mysupersecret\");\n\n    res.status(201).json({ data: { user }, meta: { token } });\n  } catch (err) {\n    console.log(err.message);\n    res.json({ err: err.message });\n  }\n});\n\napi.post(\"/login\", async (req, res) => {\n  passport.authenticate(\"local\", { session: false }, (err, user) => {\n    if (err) {\n      res.status(400).json({\n        error: { message: err }\n      });\n    }\n\n    const { uuid, nickname, email } = user;\n    const payload = { uuid, nickname, email };\n    const token = jwt.sign(payload, process.env.JWT_ENCRYPTION);\n\n    res.status(200).json({ data: { user }, meta: { token } });\n  })(req, res);\n});\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545216996000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/models/user.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/models/user.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/models/user.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/models/user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/models",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sequelize = _interopRequireWildcard(require(\"sequelize\"));\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nclass User extends _sequelize.Model {\n  static init(database) {\n    return super.init({\n      uuid: {\n        type: _sequelize.default.UUID,\n        primaryKey: true,\n        defaultValue: _sequelize.default.UUIDV4\n      },\n      nickname: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        unique: {\n          args: true,\n          msg: \"Nickname already in use\"\n        },\n        validate: {\n          isLongEnough(v) {\n            if (v.length < 5) {\n              throw new Error(\"Nickname must have at least 5 characters\");\n            }\n          }\n\n        }\n      },\n      email: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          isEmail: true\n        },\n        unique: {\n          args: true,\n          msg: \"Email already in use\"\n        }\n      },\n      password_digest: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          notEmpty: true\n        }\n      },\n      password: {\n        type: _sequelize.default.VIRTUAL,\n        validate: {\n          isLongEnough(v) {\n            if (v.length < 7) {\n              throw new Error(\"Password must have at least 7 characters\");\n            }\n          }\n\n        }\n      },\n      password_confirmation: {\n        type: _sequelize.default.VIRTUAL,\n        validate: {\n          isEqual(v) {\n            if (v !== this.password) {\n              throw new Error(\"Password confirmation doesn't match password\");\n            }\n          }\n\n        }\n      }\n    }, {\n      tableName: \"users\",\n      sequelize: database,\n      indexes: [{\n        unique: true,\n        fields: [\"uuid\", \"nickname\", \"email\"]\n      }],\n      hooks: {\n        async beforeValidate(userInstance) {\n          if (userInstance.isNewRecord) {\n            userInstance.password_digest = await userInstance.generateHash();\n          }\n        },\n\n        async beforeSave(userInstance) {\n          if (!userInstance.isNewRecord && userInstance.changed('password')) {\n            if (userInstance.password !== userInstance.password_confirmation) {\n              throw new Error(USER.PASSWORD.CONFIRMATION_MESSAGE);\n            }\n\n            userInstance.password_digest = await userInstance.generateHash();\n          }\n        },\n\n        async beforeSave(userInstance) {\n          if (!userInstance.isNewRecord && userInstance.changed(\"password\")) {\n            userInstance.password_digest = await userInstance.generateHash();\n          }\n        }\n\n      }\n    });\n  }\n\n  async generateHash() {\n    const SALT_ROUND = 5;\n    const hash = await _bcrypt.default.hash(this.password, SALT_ROUND);\n\n    if (!hash) {\n      throw new Error(\"Can't hash password\");\n    }\n\n    return hash;\n  }\n\n  async checkPassword(password) {\n    return _bcrypt.default.compare(password, this.password_digest);\n  }\n\n  toJSON() {\n    const values = Object.assign({}, this.get());\n    delete values.password_digest;\n    delete values.password;\n    delete values.password_confirmation;\n    return values;\n  }\n\n}\n\nexports.default = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiVXNlciIsIk1vZGVsIiwiaW5pdCIsImRhdGFiYXNlIiwidXVpZCIsInR5cGUiLCJTZXF1ZWxpemUiLCJVVUlEIiwicHJpbWFyeUtleSIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsIm5pY2tuYW1lIiwiU1RSSU5HIiwiYWxsb3dOdWxsIiwidW5pcXVlIiwiYXJncyIsIm1zZyIsInZhbGlkYXRlIiwiaXNMb25nRW5vdWdoIiwidiIsImxlbmd0aCIsIkVycm9yIiwiZW1haWwiLCJpc0VtYWlsIiwicGFzc3dvcmRfZGlnZXN0Iiwibm90RW1wdHkiLCJwYXNzd29yZCIsIlZJUlRVQUwiLCJwYXNzd29yZF9jb25maXJtYXRpb24iLCJpc0VxdWFsIiwidGFibGVOYW1lIiwic2VxdWVsaXplIiwiaW5kZXhlcyIsImZpZWxkcyIsImhvb2tzIiwiYmVmb3JlVmFsaWRhdGUiLCJ1c2VySW5zdGFuY2UiLCJpc05ld1JlY29yZCIsImdlbmVyYXRlSGFzaCIsImJlZm9yZVNhdmUiLCJjaGFuZ2VkIiwiVVNFUiIsIlBBU1NXT1JEIiwiQ09ORklSTUFUSU9OX01FU1NBR0UiLCJTQUxUX1JPVU5EIiwiaGFzaCIsImJjcnlwdCIsImNoZWNrUGFzc3dvcmQiLCJjb21wYXJlIiwidG9KU09OIiwidmFsdWVzIiwiT2JqZWN0IiwiYXNzaWduIiwiZ2V0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7OztBQUVlLE1BQU1BLElBQU4sU0FBbUJDLGdCQUFuQixDQUF5QjtBQUN0QyxTQUFPQyxJQUFQLENBQVlDLFFBQVosRUFBc0I7QUFDcEIsV0FBTyxNQUFNRCxJQUFOLENBQ0w7QUFDRUUsTUFBQUEsSUFBSSxFQUFFO0FBQ0pDLFFBQUFBLElBQUksRUFBRUMsbUJBQVVDLElBRFo7QUFFSkMsUUFBQUEsVUFBVSxFQUFFLElBRlI7QUFHSkMsUUFBQUEsWUFBWSxFQUFFSCxtQkFBVUk7QUFIcEIsT0FEUjtBQU1FQyxNQUFBQSxRQUFRLEVB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QUFyQztBQUNEO0FBQ0YsU0FiSTs7QUFlTCxjQUFNQyxVQUFOLENBQWlCSCxZQUFqQixFQUErQjtBQUM3QixjQUFJLENBQUNBLFlBQVksQ0FBQ0MsV0FBZCxJQUE2QkQsWUFBWSxDQUFDSSxPQUFiLENBQXFCLFVBQXJCLENBQWpDLEVBQW1FO0FBQ2pFSixZQUFBQSxZQUFZLENBQUNaLGVBQWIsR0FBK0IsTUFBTVksWUFBWSxDQUFDRSxZQUFiLEVBQXJDO0FBQ0Q7QUFDRjs7QUFuQkk7QUFYVCxLQTdESyxDQUFQO0FBK0ZEOztBQUVELFFBQU1BLFlBQU4sR0FBcUI7QUFDbkIsVUFBTU0sVUFBVSxHQUFHLENBQW5CO0FBRUEsVUFBTUMsSUFBSSxHQUFHLE1BQU1DLGdCQUFPRCxJQUFQLENBQVksS0FBS25CLFFBQWpCLEVBQTJCa0IsVUFBM0IsQ0FBbkI7O0FBQ0EsUUFBSSxDQUFDQyxJQUFMLEVBQVc7QUFDVCxZQUFNLElBQUl4QixLQUFKLENBQVUscUJBQVYsQ0FBTjtBQUNEOztBQUVELFdBQU93QixJQUFQO0FBQ0Q7O0FBRUQsUUFBTUUsYUFBTixDQUFvQnJCLFFBQXBCLEVBQThCO0FBQzVCLFdBQU9vQixnQkFBT0UsT0FBUCxDQUFldEIsUUFBZixFQUF5QixLQUFLRixlQUE5QixDQUFQO0FBQ0Q7O0FBRUR5QixFQUFBQSxNQUFNLEdBQUc7QUFDUCxVQUFNQyxNQUFNLEdBQUdDLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjLEVBQWQsRUFBa0IsS0FBS0MsR0FBTCxFQUFsQixDQUFmO0FBRUEsV0FBT0gsTUFBTSxDQUFDMUIsZUFBZDtBQUNBLFdBQU8wQixNQUFNLENBQUN4QixRQUFkO0FBQ0EsV0FBT3dCLE1BQU0sQ0FBQ3RCLHFCQUFkO0FBRUEsV0FBT3NCLE1BQVA7QUFDRDs7QUExSHFDIiwic291cmNlUm9vdCI6Ii9ob21lL2JlbmphbWluL0RvY3VtZW50cy9wcm9qZWN0L3NlcnZlci9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU2VxdWVsaXplLCB7IE1vZGVsIH0gZnJvbSBcInNlcXVlbGl6ZVwiO1xuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXIgZXh0ZW5kcyBNb2RlbCB7XG4gIHN0YXRpYyBpbml0KGRhdGFiYXNlKSB7XG4gICAgcmV0dXJuIHN1cGVyLmluaXQoXG4gICAgICB7XG4gICAgICAgIHV1aWQ6IHtcbiAgICAgICAgICB0eXBlOiBTZXF1ZWxpemUuVVVJRCxcbiAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogU2VxdWVsaXplLlVVSURWNFxuICAgICAgICB9LFxuICAgICAgICBuaWNrbmFtZToge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsXG4gICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICB1bmlxdWU6IHtcbiAgICAgICAgICAgIGFyZ3M6IHRydWUsXG4gICAgICAgICAgICBtc2c6IFwiTmlja25hbWUgYWxyZWFkeSBpbiB1c2VcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGlzTG9uZ0Vub3VnaCh2KSB7XG4gICAgICAgICAgICAgIGlmICh2Lmxlbmd0aCA8IDUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOaWNrbmFtZSBtdXN0IGhhdmUgYXQgbGVhc3QgNSBjaGFyYWN0ZXJzXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbWFpbDoge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsXG4gICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgaXNFbWFpbDogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdW5pcXVlOiB7XG4gICAgICAgICAgICBhcmdzOiB0cnVlLFxuICAgICAgICAgICAgbXNnOiBcIkVtYWlsIGFscmVhZHkgaW4gdXNlXCJcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBhc3N3b3JkX2RpZ2VzdDoge1xuICAgICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsXG4gICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbm90RW1wdHk6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLlZJUlRVQUwsXG4gICAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGlzTG9uZ0Vub3VnaCh2KSB7XG4gICAgICAgICAgICAgIGlmICh2Lmxlbmd0aCA8IDcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXNzd29yZCBtdXN0IGhhdmUgYXQgbGVhc3QgNyBjaGFyYWN0ZXJzXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwYXNzd29yZF9jb25maXJtYXRpb246IHtcbiAgICAgICAgICB0eXBlOiBTZXF1ZWxpemUuVklSVFVBTCxcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgaXNFcXVhbCh2KSB7XG4gICAgICAgICAgICAgIGlmICh2ICE9PSB0aGlzLnBhc3N3b3JkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFzc3dvcmQgY29uZmlybWF0aW9uIGRvZXNuJ3QgbWF0Y2ggcGFzc3dvcmRcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogXCJ1c2Vyc1wiLFxuICAgICAgICBzZXF1ZWxpemU6IGRhdGFiYXNlLFxuXG4gICAgICAgIGluZGV4ZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgICAgICBmaWVsZHM6IFtcInV1aWRcIiwgXCJuaWNrbmFtZVwiLCBcImVtYWlsXCJdXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuXG4gICAgICAgIGhvb2tzOiB7XG4gICAgICAgICAgYXN5bmMgYmVmb3JlVmFsaWRhdGUodXNlckluc3RhbmNlKSB7XG4gICAgICAgICAgICBpZiAodXNlckluc3RhbmNlLmlzTmV3UmVjb3JkKSB7XG4gICAgICAgICAgICAgIHVzZXJJbnN0YW5jZS5wYXNzd29yZF9kaWdlc3QgPSBhd2FpdCB1c2VySW5zdGFuY2UuZ2VuZXJhdGVIYXNoKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGFzeW5jIGJlZm9yZVNhdmUodXNlckluc3RhbmNlKSB7XG4gICAgICAgICAgICBpZiAoIXVzZXJJbnN0YW5jZS5pc05ld1JlY29yZCAmJiB1c2VySW5zdGFuY2UuY2hhbmdlZCgncGFzc3dvcmQnKSkge1xuICAgICAgICAgICAgICBpZiAodXNlckluc3RhbmNlLnBhc3N3b3JkICE9PSB1c2VySW5zdGFuY2UucGFzc3dvcmRfY29uZmlybWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFVTRVIuUEFTU1dPUkQuQ09ORklSTUFUSU9OX01FU1NBR0UpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdXNlckluc3RhbmNlLnBhc3N3b3JkX2RpZ2VzdCA9IGF3YWl0IHVzZXJJbnN0YW5jZS5nZW5lcmF0ZUhhc2goKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG5cbiAgICAgICAgICBhc3luYyBiZWZvcmVTYXZlKHVzZXJJbnN0YW5jZSkge1xuICAgICAgICAgICAgaWYgKCF1c2VySW5zdGFuY2UuaXNOZXdSZWNvcmQgJiYgdXNlckluc3RhbmNlLmNoYW5nZWQoXCJwYXNzd29yZFwiKSkge1xuICAgICAgICAgICAgICB1c2VySW5zdGFuY2UucGFzc3dvcmRfZGlnZXN0ID0gYXdhaXQgdXNlckluc3RhbmNlLmdlbmVyYXRlSGFzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBhc3luYyBnZW5lcmF0ZUhhc2goKSB7XG4gICAgY29uc3QgU0FMVF9ST1VORCA9IDU7XG5cbiAgICBjb25zdCBoYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2godGhpcy5wYXNzd29yZCwgU0FMVF9ST1VORCk7XG4gICAgaWYgKCFoYXNoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBoYXNoIHBhc3N3b3JkXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBoYXNoO1xuICB9XG5cbiAgYXN5bmMgY2hlY2tQYXNzd29yZChwYXNzd29yZCkge1xuICAgIHJldHVybiBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdGhpcy5wYXNzd29yZF9kaWdlc3QpO1xuICB9XG5cbiAgdG9KU09OKCkge1xuICAgIGNvbnN0IHZhbHVlcyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZ2V0KCkpO1xuXG4gICAgZGVsZXRlIHZhbHVlcy5wYXNzd29yZF9kaWdlc3RcbiAgICBkZWxldGUgdmFsdWVzLnBhc3N3b3JkXG4gICAgZGVsZXRlIHZhbHVlcy5wYXNzd29yZF9jb25maXJtYXRpb25cblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "User",
        "Model",
        "init",
        "database",
        "uuid",
        "type",
        "Sequelize",
        "UUID",
        "primaryKey",
        "defaultValue",
        "UUIDV4",
        "nickname",
        "STRING",
        "allowNull",
        "unique",
        "args",
        "msg",
        "validate",
        "isLongEnough",
        "v",
        "length",
        "Error",
        "email",
        "isEmail",
        "password_digest",
        "notEmpty",
        "password",
        "VIRTUAL",
        "password_confirmation",
        "isEqual",
        "tableName",
        "sequelize",
        "indexes",
        "fields",
        "hooks",
        "beforeValidate",
        "userInstance",
        "isNewRecord",
        "generateHash",
        "beforeSave",
        "changed",
        "USER",
        "PASSWORD",
        "CONFIRMATION_MESSAGE",
        "SALT_ROUND",
        "hash",
        "bcrypt",
        "checkPassword",
        "compare",
        "toJSON",
        "values",
        "Object",
        "assign",
        "get"
      ],
      "mappings": "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",
      "sourceRoot": "/home/benjamin/Documents/project/server/models",
      "sourcesContent": [
        "import Sequelize, { Model } from \"sequelize\";\nimport bcrypt from \"bcrypt\";\n\nexport default class User extends Model {\n  static init(database) {\n    return super.init(\n      {\n        uuid: {\n          type: Sequelize.UUID,\n          primaryKey: true,\n          defaultValue: Sequelize.UUIDV4\n        },\n        nickname: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          unique: {\n            args: true,\n            msg: \"Nickname already in use\"\n          },\n          validate: {\n            isLongEnough(v) {\n              if (v.length < 5) {\n                throw new Error(\"Nickname must have at least 5 characters\");\n              }\n            }\n          }\n        },\n        email: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            isEmail: true\n          },\n          unique: {\n            args: true,\n            msg: \"Email already in use\"\n          }\n        },\n        password_digest: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            notEmpty: true\n          }\n        },\n        password: {\n          type: Sequelize.VIRTUAL,\n          validate: {\n            isLongEnough(v) {\n              if (v.length < 7) {\n                throw new Error(\"Password must have at least 7 characters\");\n              }\n            }\n          }\n        },\n        password_confirmation: {\n          type: Sequelize.VIRTUAL,\n          validate: {\n            isEqual(v) {\n              if (v !== this.password) {\n                throw new Error(\"Password confirmation doesn't match password\");\n              }\n            }\n          }\n        }\n      },\n      {\n        tableName: \"users\",\n        sequelize: database,\n\n        indexes: [\n          {\n            unique: true,\n            fields: [\"uuid\", \"nickname\", \"email\"]\n          }\n        ],\n\n        hooks: {\n          async beforeValidate(userInstance) {\n            if (userInstance.isNewRecord) {\n              userInstance.password_digest = await userInstance.generateHash()\n            }\n          },\n          async beforeSave(userInstance) {\n            if (!userInstance.isNewRecord && userInstance.changed('password')) {\n              if (userInstance.password !== userInstance.password_confirmation) {\n                throw new Error(USER.PASSWORD.CONFIRMATION_MESSAGE)\n              }\n              userInstance.password_digest = await userInstance.generateHash()\n            }\n          },\n\n          async beforeSave(userInstance) {\n            if (!userInstance.isNewRecord && userInstance.changed(\"password\")) {\n              userInstance.password_digest = await userInstance.generateHash();\n            }\n          }\n        }\n      }\n    );\n  }\n\n  async generateHash() {\n    const SALT_ROUND = 5;\n\n    const hash = await bcrypt.hash(this.password, SALT_ROUND);\n    if (!hash) {\n      throw new Error(\"Can't hash password\");\n    }\n\n    return hash;\n  }\n\n  async checkPassword(password) {\n    return bcrypt.compare(password, this.password_digest);\n  }\n\n  toJSON() {\n    const values = Object.assign({}, this.get());\n\n    delete values.password_digest\n    delete values.password\n    delete values.password_confirmation\n\n    return values;\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545522835203
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/routes/secured\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/routes/secured/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/routes/secured",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/routes/secured/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/routes/secured/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/routes/secured/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/routes/secured",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _users = _interopRequireDefault(require(\"./users\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.use(\"/users\", _users.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwaSIsInVzZSIsInVzZXJzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxHQUFHLEdBQUcsc0JBQVo7QUFFQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsUUFBUixFQUFrQkMsY0FBbEI7ZUFFZUYsRyIsInNvdXJjZVJvb3QiOiIvaG9tZS9iZW5qYW1pbi9Eb2N1bWVudHMvcHJvamVjdC9zZXJ2ZXIvcm91dGVzL3NlY3VyZWQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHVzZXJzIGZyb20gXCIuL3VzZXJzXCI7XG5cbmNvbnN0IGFwaSA9IFJvdXRlcigpO1xuXG5hcGkudXNlKFwiL3VzZXJzXCIsIHVzZXJzKTtcblxuZXhwb3J0IGRlZmF1bHQgYXBpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "api",
        "use",
        "users"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,QAAR,EAAkBC,cAAlB;eAEeF,G",
      "sourceRoot": "/home/benjamin/Documents/project/server/routes/secured",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport users from \"./users\";\n\nconst api = Router();\n\napi.use(\"/users\", users);\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545216996000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/routes/secured\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/routes/secured/users.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/routes/secured",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/routes/secured/users.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/routes/secured/users.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/routes/secured/users.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/routes/secured",
        "sourceFileName": "users.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _user = _interopRequireDefault(require(\"../../models/user\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.get(\"/\", async (req, res) => {\n  const users = await _user.default.findAll();\n  res.status(200).json({\n    data: {\n      users\n    }\n  });\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsInVzZXJzIiwiVXNlciIsImZpbmRBbGwiLCJzdGF0dXMiLCJqc29uIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLHNCQUFaO0FBRUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLEdBQVIsRUFBYSxPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDL0IsUUFBTUMsS0FBSyxHQUFHLE1BQU1DLGNBQUtDLE9BQUwsRUFBcEI7QUFDQUgsRUFBQUEsR0FBRyxDQUFDSSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRUMsSUFBQUEsSUFBSSxFQUFFO0FBQUVMLE1BQUFBO0FBQUY7QUFBUixHQUFyQjtBQUNELENBSEQ7ZUFLZUosRyIsInNvdXJjZVJvb3QiOiIvaG9tZS9iZW5qYW1pbi9Eb2N1bWVudHMvcHJvamVjdC9zZXJ2ZXIvcm91dGVzL3NlY3VyZWQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IFVzZXIgZnJvbSBcIi4uLy4uL21vZGVscy91c2VyXCI7XG5cbmNvbnN0IGFwaSA9IFJvdXRlcigpO1xuXG5hcGkuZ2V0KFwiL1wiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmRBbGwoKTtcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBkYXRhOiB7IHVzZXJzIH0gfSk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgYXBpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "users",
        "User",
        "findAll",
        "status",
        "json",
        "data"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,QAAMC,KAAK,GAAG,MAAMC,cAAKC,OAAL,EAApB;AACAH,EAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,IAAI,EAAE;AAAEL,MAAAA;AAAF;AAAR,GAArB;AACD,CAHD;eAKeJ,G",
      "sourceRoot": "/home/benjamin/Documents/project/server/routes/secured",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport User from \"../../models/user\";\n\nconst api = Router();\n\napi.get(\"/\", async (req, res) => {\n  const users = await User.findAll();\n  res.status(200).json({ data: { users } });\n});\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545216996000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/models/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/models/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/models/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/models/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/models",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.db = void 0;\n\nvar _sequelize = _interopRequireDefault(require(\"sequelize\"));\n\nvar _user = _interopRequireDefault(require(\"./user\"));\n\nvar _project = _interopRequireDefault(require(\"./project\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// postgres://USER:PASS@HOST:PORT/DBNAME\n// createdb sanji.dev\nconst db = new _sequelize.default(process.env.DATABASE_URL);\nexports.db = db;\n\n_user.default.init(db);\n\n_project.default.init(db);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRiIiwiU2VxdWVsaXplIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsIlVzZXIiLCJpbml0IiwiUHJvamVjdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUE7QUFDQTtBQUNPLE1BQU1BLEVBQUUsR0FBRyxJQUFJQyxrQkFBSixDQUFjQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsWUFBMUIsQ0FBWDs7O0FBRVBDLGNBQUtDLElBQUwsQ0FBVU4sRUFBVjs7QUFDQU8saUJBQVFELElBQVIsQ0FBYU4sRUFBYiIsInNvdXJjZVJvb3QiOiIvaG9tZS9iZW5qYW1pbi9Eb2N1bWVudHMvcHJvamVjdC9zZXJ2ZXIvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSBmcm9tIFwic2VxdWVsaXplXCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi91c2VyXCI7XG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0XCI7XG5cbi8vIHBvc3RncmVzOi8vVVNFUjpQQVNTQEhPU1Q6UE9SVC9EQk5BTUVcbi8vIGNyZWF0ZWRiIHNhbmppLmRldlxuZXhwb3J0IGNvbnN0IGRiID0gbmV3IFNlcXVlbGl6ZShwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwpO1xuXG5Vc2VyLmluaXQoZGIpO1xuUHJvamVjdC5pbml0KGRiKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "db",
        "Sequelize",
        "process",
        "env",
        "DATABASE_URL",
        "User",
        "init",
        "Project"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;;;AAEA;AACA;AACO,MAAMA,EAAE,GAAG,IAAIC,kBAAJ,CAAcC,OAAO,CAACC,GAAR,CAAYC,YAA1B,CAAX;;;AAEPC,cAAKC,IAAL,CAAUN,EAAV;;AACAO,iBAAQD,IAAR,CAAaN,EAAb",
      "sourceRoot": "/home/benjamin/Documents/project/server/models",
      "sourcesContent": [
        "import Sequelize from \"sequelize\";\nimport User from \"./user\";\nimport Project from \"./project\";\n\n// postgres://USER:PASS@HOST:PORT/DBNAME\n// createdb sanji.dev\nexport const db = new Sequelize(process.env.DATABASE_URL);\n\nUser.init(db);\nProject.init(db);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545216996000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/models/project.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/models/project.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/models/project.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/models/project.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/models",
        "sourceFileName": "project.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sequelize = _interopRequireWildcard(require(\"sequelize\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nclass Project extends _sequelize.Model {\n  static init(database) {\n    return super.init({\n      id: {\n        type: _sequelize.default.INTEGER,\n        primaryKey: true,\n        autoIncrement: true\n      },\n      name: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          notEmpty: true\n        }\n      }\n    }, {\n      tableName: \"projects\",\n      sequelize: database,\n      indexes: [{\n        unique: true,\n        fields: [\"id\"]\n      }]\n    });\n  }\n\n}\n\nexports.default = Project;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3QuanMiXSwibmFtZXMiOlsiUHJvamVjdCIsIk1vZGVsIiwiaW5pdCIsImRhdGFiYXNlIiwiaWQiLCJ0eXBlIiwiU2VxdWVsaXplIiwiSU5URUdFUiIsInByaW1hcnlLZXkiLCJhdXRvSW5jcmVtZW50IiwibmFtZSIsIlNUUklORyIsImFsbG93TnVsbCIsInZhbGlkYXRlIiwibm90RW1wdHkiLCJ0YWJsZU5hbWUiLCJzZXF1ZWxpemUiLCJpbmRleGVzIiwidW5pcXVlIiwiZmllbGRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFZSxNQUFNQSxPQUFOLFNBQXNCQyxnQkFBdEIsQ0FBNEI7QUFDekMsU0FBT0MsSUFBUCxDQUFZQyxRQUFaLEVBQXNCO0FBQ3BCLFdBQU8sTUFBTUQsSUFBTixDQUNMO0FBQ0VFLE1BQUFBLEVBQUUsRUFBRTtBQUNGQyxRQUFBQSxJQUFJLEVBQUVDLG1CQUFVQyxPQURkO0FBRUZDLFFBQUFBLFVBQVUsRUFBRSxJQUZWO0FBR0ZDLFFBQUFBLGFBQWEsRUFBRTtBQUhiLE9BRE47QUFNRUMsTUFBQUEsSUFBSSxFQUFFO0FBQ0pMLFFBQUFBLElBQUksRUFBRUMsbUJBQVVLLE1BRFo7QUFFSkMsUUFBQUEsU0FBUyxFQUFFLEtBRlA7QUFHSkMsUUFBQUEsUUFBUSxFQUFFO0FBQ1JDLFVBQUFBLFFBQVEsRUFBRTtBQURGO0FBSE47QUFOUixLQURLLEVBZUw7QUFDRUMsTUFBQUEsU0FBUyxFQUFFLFVBRGI7QUFFRUMsTUFBQUEsU0FBUyxFQUFFYixRQUZiO0FBSUVjLE1BQUFBLE9BQU8sRUFBRSxDQUNQO0FBQ0VDLFFBQUFBLE1BQU0sRUFBRSxJQURWO0FBRUVDLFFBQUFBLE1BQU0sRUFBRSxDQUFDLElBQUQ7QUFGVixPQURPO0FBSlgsS0FmSyxDQUFQO0FBMkJEOztBQTdCd0MiLCJzb3VyY2VSb290IjoiL2hvbWUvYmVuamFtaW4vRG9jdW1lbnRzL3Byb2plY3Qvc2VydmVyL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTZXF1ZWxpemUsIHsgTW9kZWwgfSBmcm9tIFwic2VxdWVsaXplXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2plY3QgZXh0ZW5kcyBNb2RlbCB7XG4gIHN0YXRpYyBpbml0KGRhdGFiYXNlKSB7XG4gICAgcmV0dXJuIHN1cGVyLmluaXQoXG4gICAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLklOVEVHRVIsXG4gICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIG5hbWU6IHtcbiAgICAgICAgICB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HLFxuICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIG5vdEVtcHR5OiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWJsZU5hbWU6IFwicHJvamVjdHNcIixcbiAgICAgICAgc2VxdWVsaXplOiBkYXRhYmFzZSxcblxuICAgICAgICBpbmRleGVzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgICAgICAgZmllbGRzOiBbXCJpZFwiXVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfVxuICAgICk7XG4gIH1cbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "project.js"
      ],
      "names": [
        "Project",
        "Model",
        "init",
        "database",
        "id",
        "type",
        "Sequelize",
        "INTEGER",
        "primaryKey",
        "autoIncrement",
        "name",
        "STRING",
        "allowNull",
        "validate",
        "notEmpty",
        "tableName",
        "sequelize",
        "indexes",
        "unique",
        "fields"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEe,MAAMA,OAAN,SAAsBC,gBAAtB,CAA4B;AACzC,SAAOC,IAAP,CAAYC,QAAZ,EAAsB;AACpB,WAAO,MAAMD,IAAN,CACL;AACEE,MAAAA,EAAE,EAAE;AACFC,QAAAA,IAAI,EAAEC,mBAAUC,OADd;AAEFC,QAAAA,UAAU,EAAE,IAFV;AAGFC,QAAAA,aAAa,EAAE;AAHb,OADN;AAMEC,MAAAA,IAAI,EAAE;AACJL,QAAAA,IAAI,EAAEC,mBAAUK,MADZ;AAEJC,QAAAA,SAAS,EAAE,KAFP;AAGJC,QAAAA,QAAQ,EAAE;AACRC,UAAAA,QAAQ,EAAE;AADF;AAHN;AANR,KADK,EAeL;AACEC,MAAAA,SAAS,EAAE,UADb;AAEEC,MAAAA,SAAS,EAAEb,QAFb;AAIEc,MAAAA,OAAO,EAAE,CACP;AACEC,QAAAA,MAAM,EAAE,IADV;AAEEC,QAAAA,MAAM,EAAE,CAAC,IAAD;AAFV,OADO;AAJX,KAfK,CAAP;AA2BD;;AA7BwC",
      "sourceRoot": "/home/benjamin/Documents/project/server/models",
      "sourcesContent": [
        "import Sequelize, { Model } from \"sequelize\";\n\nexport default class Project extends Model {\n  static init(database) {\n    return super.init(\n      {\n        id: {\n          type: Sequelize.INTEGER,\n          primaryKey: true,\n          autoIncrement: true\n        },\n        name: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            notEmpty: true\n          }\n        }\n      },\n      {\n        tableName: \"projects\",\n        sequelize: database,\n\n        indexes: [\n          {\n            unique: true,\n            fields: [\"id\"]\n          }\n        ]\n      }\n    );\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545216996000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/middlewares\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/middlewares/passport.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/middlewares",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/middlewares/passport.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/middlewares/passport.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/middlewares/passport.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/middlewares",
        "sourceFileName": "passport.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _passportLocal = require(\"passport-local\");\n\nvar _passportJwt = require(\"passport-jwt\");\n\nvar _user = _interopRequireDefault(require(\"../models/user\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_passport.default.use(new _passportLocal.Strategy({\n  usernameField: \"nickname\",\n  passwordField: \"password\"\n}, async (nickname, password, next) => {\n  const user = await _user.default.findOne({\n    where: {\n      nickname\n    }\n  });\n\n  if (!user) {\n    return next(\"Nickname doesn't exist\");\n  }\n\n  if (!(await user.checkPassword(password))) {\n    return next(\"Password doesn't match\");\n  }\n\n  return next(false, user);\n}));\n\n_passport.default.use(new _passportJwt.Strategy({\n  jwtFromRequest: _passportJwt.ExtractJwt.fromAuthHeaderAsBearerToken(),\n  secretOrKey: process.env.JWT_ENCRYPTION\n}, async (jwtPayload, next) => {\n  try {\n    const user = await _user.default.findOne({\n      where: {\n        uuid: jwtPayload.uuid\n      }\n    });\n\n    if (!user) {\n      return next(\"User doesn't exist\");\n    }\n\n    return next(false, user);\n  } catch (err) {\n    return next(err.message);\n  }\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3Nwb3J0LmpzIl0sIm5hbWVzIjpbInBhc3Nwb3J0IiwidXNlIiwiTG9jYWxTdHJhdGVneSIsInVzZXJuYW1lRmllbGQiLCJwYXNzd29yZEZpZWxkIiwibmlja25hbWUiLCJwYXNzd29yZCIsIm5leHQiLCJ1c2VyIiwiVXNlciIsImZpbmRPbmUiLCJ3aGVyZSIsImNoZWNrUGFzc3dvcmQiLCJKd3RTdHJhdGVneSIsImp3dEZyb21SZXF1ZXN0IiwiRXh0cmFjdEp3dCIsImZyb21BdXRoSGVhZGVyQXNCZWFyZXJUb2tlbiIsInNlY3JldE9yS2V5IiwicHJvY2VzcyIsImVudiIsIkpXVF9FTkNSWVBUSU9OIiwiand0UGF5bG9hZCIsInV1aWQiLCJlcnIiLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUFBLGtCQUFTQyxHQUFULENBQ0UsSUFBSUMsdUJBQUosQ0FDRTtBQUNFQyxFQUFBQSxhQUFhLEVBQUUsVUFEakI7QUFFRUMsRUFBQUEsYUFBYSxFQUFFO0FBRmpCLENBREYsRUFLRSxPQUFPQyxRQUFQLEVBQWlCQyxRQUFqQixFQUEyQkMsSUFBM0IsS0FBb0M7QUFDbEMsUUFBTUMsSUFBSSxHQUFHLE1BQU1DLGNBQUtDLE9BQUwsQ0FBYTtBQUFFQyxJQUFBQSxLQUFLLEVBQUU7QUFBRU4sTUFBQUE7QUFBRjtBQUFULEdBQWIsQ0FBbkI7O0FBRUEsTUFBSSxDQUFDRyxJQUFMLEVBQVc7QUFDVCxXQUFPRCxJQUFJLENBQUMsd0JBQUQsQ0FBWDtBQUNEOztBQUVELE1BQUksRUFBRSxNQUFNQyxJQUFJLENBQUNJLGFBQUwsQ0FBbUJOLFFBQW5CLENBQVIsQ0FBSixFQUEyQztBQUN6QyxXQUFPQyxJQUFJLENBQUMsd0JBQUQsQ0FBWDtBQUNEOztBQUVELFNBQU9BLElBQUksQ0FBQyxLQUFELEVBQVFDLElBQVIsQ0FBWDtBQUNELENBakJILENBREY7O0FBc0JBUixrQkFBU0MsR0FBVCxDQUNFLElBQUlZLHFCQUFKLENBQ0U7QUFDRUMsRUFBQUEsY0FBYyxFQUFFQyx3QkFBV0MsMkJBQVgsRUFEbEI7QUFFRUMsRUFBQUEsV0FBVyxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUM7QUFGM0IsQ0FERixFQUtFLE9BQU9DLFVBQVAsRUFBbUJkLElBQW5CLEtBQTRCO0FBQzFCLE1BQUk7QUFDRixVQUFNQyxJQUFJLEdBQUcsTUFBTUMsY0FBS0MsT0FBTCxDQUFhO0FBQUVDLE1BQUFBLEtBQUssRUFBRTtBQUFFVyxRQUFBQSxJQUFJLEVBQUVELFVBQVUsQ0FBQ0M7QUFBbkI7QUFBVCxLQUFiLENBQW5COztBQUNBLFFBQUksQ0FBQ2QsSUFBTCxFQUFXO0FBQ1QsYUFBT0QsSUFBSSxDQUFDLG9CQUFELENBQVg7QUFDRDs7QUFDRCxXQUFPQSxJQUFJLENBQUMsS0FBRCxFQUFRQyxJQUFSLENBQVg7QUFDRCxHQU5ELENBTUUsT0FBT2UsR0FBUCxFQUFZO0FBQ1osV0FBT2hCLElBQUksQ0FBQ2dCLEdBQUcsQ0FBQ0MsT0FBTCxDQUFYO0FBQ0Q7QUFDRixDQWZILENBREYiLCJzb3VyY2VSb290IjoiL2hvbWUvYmVuamFtaW4vRG9jdW1lbnRzL3Byb2plY3Qvc2VydmVyL21pZGRsZXdhcmVzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xuaW1wb3J0IHsgU3RyYXRlZ3kgYXMgTG9jYWxTdHJhdGVneSB9IGZyb20gXCJwYXNzcG9ydC1sb2NhbFwiO1xuaW1wb3J0IHsgU3RyYXRlZ3kgYXMgSnd0U3RyYXRlZ3ksIEV4dHJhY3RKd3QgfSBmcm9tIFwicGFzc3BvcnQtand0XCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWxzL3VzZXJcIjtcblxucGFzc3BvcnQudXNlKFxuICBuZXcgTG9jYWxTdHJhdGVneShcbiAgICB7XG4gICAgICB1c2VybmFtZUZpZWxkOiBcIm5pY2tuYW1lXCIsXG4gICAgICBwYXNzd29yZEZpZWxkOiBcInBhc3N3b3JkXCJcbiAgICB9LFxuICAgIGFzeW5jIChuaWNrbmFtZSwgcGFzc3dvcmQsIG5leHQpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB3aGVyZTogeyBuaWNrbmFtZSB9IH0pO1xuXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIG5leHQoXCJOaWNrbmFtZSBkb2Vzbid0IGV4aXN0XCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIShhd2FpdCB1c2VyLmNoZWNrUGFzc3dvcmQocGFzc3dvcmQpKSkge1xuICAgICAgICByZXR1cm4gbmV4dChcIlBhc3N3b3JkIGRvZXNuJ3QgbWF0Y2hcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXh0KGZhbHNlLCB1c2VyKTtcbiAgICB9XG4gIClcbik7XG5cbnBhc3Nwb3J0LnVzZShcbiAgbmV3IEp3dFN0cmF0ZWd5KFxuICAgIHtcbiAgICAgIGp3dEZyb21SZXF1ZXN0OiBFeHRyYWN0Snd0LmZyb21BdXRoSGVhZGVyQXNCZWFyZXJUb2tlbigpLFxuICAgICAgc2VjcmV0T3JLZXk6IHByb2Nlc3MuZW52LkpXVF9FTkNSWVBUSU9OXG4gICAgfSxcbiAgICBhc3luYyAoand0UGF5bG9hZCwgbmV4dCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHdoZXJlOiB7IHV1aWQ6IGp3dFBheWxvYWQudXVpZCB9IH0pO1xuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICByZXR1cm4gbmV4dChcIlVzZXIgZG9lc24ndCBleGlzdFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dChmYWxzZSwgdXNlcik7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIG5leHQoZXJyLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cbiAgKVxuKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "passport.js"
      ],
      "names": [
        "passport",
        "use",
        "LocalStrategy",
        "usernameField",
        "passwordField",
        "nickname",
        "password",
        "next",
        "user",
        "User",
        "findOne",
        "where",
        "checkPassword",
        "JwtStrategy",
        "jwtFromRequest",
        "ExtractJwt",
        "fromAuthHeaderAsBearerToken",
        "secretOrKey",
        "process",
        "env",
        "JWT_ENCRYPTION",
        "jwtPayload",
        "uuid",
        "err",
        "message"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;;;AAEAA,kBAASC,GAAT,CACE,IAAIC,uBAAJ,CACE;AACEC,EAAAA,aAAa,EAAE,UADjB;AAEEC,EAAAA,aAAa,EAAE;AAFjB,CADF,EAKE,OAAOC,QAAP,EAAiBC,QAAjB,EAA2BC,IAA3B,KAAoC;AAClC,QAAMC,IAAI,GAAG,MAAMC,cAAKC,OAAL,CAAa;AAAEC,IAAAA,KAAK,EAAE;AAAEN,MAAAA;AAAF;AAAT,GAAb,CAAnB;;AAEA,MAAI,CAACG,IAAL,EAAW;AACT,WAAOD,IAAI,CAAC,wBAAD,CAAX;AACD;;AAED,MAAI,EAAE,MAAMC,IAAI,CAACI,aAAL,CAAmBN,QAAnB,CAAR,CAAJ,EAA2C;AACzC,WAAOC,IAAI,CAAC,wBAAD,CAAX;AACD;;AAED,SAAOA,IAAI,CAAC,KAAD,EAAQC,IAAR,CAAX;AACD,CAjBH,CADF;;AAsBAR,kBAASC,GAAT,CACE,IAAIY,qBAAJ,CACE;AACEC,EAAAA,cAAc,EAAEC,wBAAWC,2BAAX,EADlB;AAEEC,EAAAA,WAAW,EAAEC,OAAO,CAACC,GAAR,CAAYC;AAF3B,CADF,EAKE,OAAOC,UAAP,EAAmBd,IAAnB,KAA4B;AAC1B,MAAI;AACF,UAAMC,IAAI,GAAG,MAAMC,cAAKC,OAAL,CAAa;AAAEC,MAAAA,KAAK,EAAE;AAAEW,QAAAA,IAAI,EAAED,UAAU,CAACC;AAAnB;AAAT,KAAb,CAAnB;;AACA,QAAI,CAACd,IAAL,EAAW;AACT,aAAOD,IAAI,CAAC,oBAAD,CAAX;AACD;;AACD,WAAOA,IAAI,CAAC,KAAD,EAAQC,IAAR,CAAX;AACD,GAND,CAME,OAAOe,GAAP,EAAY;AACZ,WAAOhB,IAAI,CAACgB,GAAG,CAACC,OAAL,CAAX;AACD;AACF,CAfH,CADF",
      "sourceRoot": "/home/benjamin/Documents/project/server/middlewares",
      "sourcesContent": [
        "import passport from \"passport\";\nimport { Strategy as LocalStrategy } from \"passport-local\";\nimport { Strategy as JwtStrategy, ExtractJwt } from \"passport-jwt\";\nimport User from \"../models/user\";\n\npassport.use(\n  new LocalStrategy(\n    {\n      usernameField: \"nickname\",\n      passwordField: \"password\"\n    },\n    async (nickname, password, next) => {\n      const user = await User.findOne({ where: { nickname } });\n\n      if (!user) {\n        return next(\"Nickname doesn't exist\");\n      }\n\n      if (!(await user.checkPassword(password))) {\n        return next(\"Password doesn't match\");\n      }\n\n      return next(false, user);\n    }\n  )\n);\n\npassport.use(\n  new JwtStrategy(\n    {\n      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n      secretOrKey: process.env.JWT_ENCRYPTION\n    },\n    async (jwtPayload, next) => {\n      try {\n        const user = await User.findOne({ where: { uuid: jwtPayload.uuid } });\n        if (!user) {\n          return next(\"User doesn't exist\");\n        }\n        return next(false, user);\n      } catch (err) {\n        return next(err.message);\n      }\n    }\n  )\n);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545216996000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/routes/secured\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/routes/secured/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/routes/secured",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/routes/secured/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/routes/secured/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/routes/secured/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/routes/secured",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _users = _interopRequireDefault(require(\"./users\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.use(\"/users\", _users.default);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwaSIsInVzZSIsInVzZXJzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxHQUFHLEdBQUcsc0JBQVo7QUFFQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsUUFBUixFQUFrQkMsY0FBbEI7ZUFFZUYsRyIsInNvdXJjZVJvb3QiOiIvaG9tZS9iZW5qYW1pbi9Eb2N1bWVudHMvcHJvamVjdC9zZXJ2ZXIvcm91dGVzL3NlY3VyZWQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHVzZXJzIGZyb20gXCIuL3VzZXJzXCI7XG5cbmNvbnN0IGFwaSA9IFJvdXRlcigpO1xuXG5hcGkudXNlKFwiL3VzZXJzXCIsIHVzZXJzKTtcblxuZXhwb3J0IGRlZmF1bHQgYXBpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "api",
        "use",
        "users"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,QAAR,EAAkBC,cAAlB;eAEeF,G",
      "sourceRoot": "/home/benjamin/Documents/project/server/routes/secured",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport users from \"./users\";\n\nconst api = Router();\n\napi.use(\"/users\", users);\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545216996000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/routes/secured\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/routes/secured/users.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/routes/secured",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/routes/secured/users.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/routes/secured/users.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/routes/secured/users.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/routes/secured",
        "sourceFileName": "users.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _user = _interopRequireDefault(require(\"../../models/user\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)();\napi.get(\"/\", async (req, res) => {\n  const users = await _user.default.findAll();\n  res.status(200).json({\n    data: {\n      users\n    }\n  });\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImFwaSIsImdldCIsInJlcSIsInJlcyIsInVzZXJzIiwiVXNlciIsImZpbmRBbGwiLCJzdGF0dXMiLCJqc29uIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLHNCQUFaO0FBRUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLEdBQVIsRUFBYSxPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDL0IsUUFBTUMsS0FBSyxHQUFHLE1BQU1DLGNBQUtDLE9BQUwsRUFBcEI7QUFDQUgsRUFBQUEsR0FBRyxDQUFDSSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRUMsSUFBQUEsSUFBSSxFQUFFO0FBQUVMLE1BQUFBO0FBQUY7QUFBUixHQUFyQjtBQUNELENBSEQ7ZUFLZUosRyIsInNvdXJjZVJvb3QiOiIvaG9tZS9iZW5qYW1pbi9Eb2N1bWVudHMvcHJvamVjdC9zZXJ2ZXIvcm91dGVzL3NlY3VyZWQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IFVzZXIgZnJvbSBcIi4uLy4uL21vZGVscy91c2VyXCI7XG5cbmNvbnN0IGFwaSA9IFJvdXRlcigpO1xuXG5hcGkuZ2V0KFwiL1wiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmRBbGwoKTtcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBkYXRhOiB7IHVzZXJzIH0gfSk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgYXBpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "api",
        "get",
        "req",
        "res",
        "users",
        "User",
        "findAll",
        "status",
        "json",
        "data"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,QAAMC,KAAK,GAAG,MAAMC,cAAKC,OAAL,EAApB;AACAH,EAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,IAAI,EAAE;AAAEL,MAAAA;AAAF;AAAR,GAArB;AACD,CAHD;eAKeJ,G",
      "sourceRoot": "/home/benjamin/Documents/project/server/routes/secured",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport User from \"../../models/user\";\n\nconst api = Router();\n\napi.get(\"/\", async (req, res) => {\n  const users = await User.findAll();\n  res.status(200).json({ data: { users } });\n});\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545216996000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/models/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/models/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/models/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/models/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/models",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.db = void 0;\n\nvar _sequelize = _interopRequireDefault(require(\"sequelize\"));\n\nvar _user = _interopRequireDefault(require(\"./user\"));\n\nvar _project = _interopRequireDefault(require(\"./project\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// postgres://USER:PASS@HOST:PORT/DBNAME\n// createdb sanji.dev\nconst db = new _sequelize.default(process.env.DATABASE_URL);\nexports.db = db;\n\n_user.default.init(db);\n\n_project.default.init(db);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRiIiwiU2VxdWVsaXplIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsIlVzZXIiLCJpbml0IiwiUHJvamVjdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUE7QUFDQTtBQUNPLE1BQU1BLEVBQUUsR0FBRyxJQUFJQyxrQkFBSixDQUFjQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsWUFBMUIsQ0FBWDs7O0FBRVBDLGNBQUtDLElBQUwsQ0FBVU4sRUFBVjs7QUFDQU8saUJBQVFELElBQVIsQ0FBYU4sRUFBYiIsInNvdXJjZVJvb3QiOiIvaG9tZS9iZW5qYW1pbi9Eb2N1bWVudHMvcHJvamVjdC9zZXJ2ZXIvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSBmcm9tIFwic2VxdWVsaXplXCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi91c2VyXCI7XG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0XCI7XG5cbi8vIHBvc3RncmVzOi8vVVNFUjpQQVNTQEhPU1Q6UE9SVC9EQk5BTUVcbi8vIGNyZWF0ZWRiIHNhbmppLmRldlxuZXhwb3J0IGNvbnN0IGRiID0gbmV3IFNlcXVlbGl6ZShwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwpO1xuXG5Vc2VyLmluaXQoZGIpO1xuUHJvamVjdC5pbml0KGRiKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "db",
        "Sequelize",
        "process",
        "env",
        "DATABASE_URL",
        "User",
        "init",
        "Project"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;;;AAEA;AACA;AACO,MAAMA,EAAE,GAAG,IAAIC,kBAAJ,CAAcC,OAAO,CAACC,GAAR,CAAYC,YAA1B,CAAX;;;AAEPC,cAAKC,IAAL,CAAUN,EAAV;;AACAO,iBAAQD,IAAR,CAAaN,EAAb",
      "sourceRoot": "/home/benjamin/Documents/project/server/models",
      "sourcesContent": [
        "import Sequelize from \"sequelize\";\nimport User from \"./user\";\nimport Project from \"./project\";\n\n// postgres://USER:PASS@HOST:PORT/DBNAME\n// createdb sanji.dev\nexport const db = new Sequelize(process.env.DATABASE_URL);\n\nUser.init(db);\nProject.init(db);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545216996000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/models/project.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/models/project.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/models/project.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/models/project.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/models",
        "sourceFileName": "project.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sequelize = _interopRequireWildcard(require(\"sequelize\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nclass Project extends _sequelize.Model {\n  static init(database) {\n    return super.init({\n      id: {\n        type: _sequelize.default.INTEGER,\n        primaryKey: true,\n        autoIncrement: true\n      },\n      name: {\n        type: _sequelize.default.STRING,\n        allowNull: false,\n        validate: {\n          notEmpty: true\n        }\n      }\n    }, {\n      tableName: \"projects\",\n      sequelize: database,\n      indexes: [{\n        unique: true,\n        fields: [\"id\"]\n      }]\n    });\n  }\n\n}\n\nexports.default = Project;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3QuanMiXSwibmFtZXMiOlsiUHJvamVjdCIsIk1vZGVsIiwiaW5pdCIsImRhdGFiYXNlIiwiaWQiLCJ0eXBlIiwiU2VxdWVsaXplIiwiSU5URUdFUiIsInByaW1hcnlLZXkiLCJhdXRvSW5jcmVtZW50IiwibmFtZSIsIlNUUklORyIsImFsbG93TnVsbCIsInZhbGlkYXRlIiwibm90RW1wdHkiLCJ0YWJsZU5hbWUiLCJzZXF1ZWxpemUiLCJpbmRleGVzIiwidW5pcXVlIiwiZmllbGRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFZSxNQUFNQSxPQUFOLFNBQXNCQyxnQkFBdEIsQ0FBNEI7QUFDekMsU0FBT0MsSUFBUCxDQUFZQyxRQUFaLEVBQXNCO0FBQ3BCLFdBQU8sTUFBTUQsSUFBTixDQUNMO0FBQ0VFLE1BQUFBLEVBQUUsRUFBRTtBQUNGQyxRQUFBQSxJQUFJLEVBQUVDLG1CQUFVQyxPQURkO0FBRUZDLFFBQUFBLFVBQVUsRUFBRSxJQUZWO0FBR0ZDLFFBQUFBLGFBQWEsRUFBRTtBQUhiLE9BRE47QUFNRUMsTUFBQUEsSUFBSSxFQUFFO0FBQ0pMLFFBQUFBLElBQUksRUFBRUMsbUJBQVVLLE1BRFo7QUFFSkMsUUFBQUEsU0FBUyxFQUFFLEtBRlA7QUFHSkMsUUFBQUEsUUFBUSxFQUFFO0FBQ1JDLFVBQUFBLFFBQVEsRUFBRTtBQURGO0FBSE47QUFOUixLQURLLEVBZUw7QUFDRUMsTUFBQUEsU0FBUyxFQUFFLFVBRGI7QUFFRUMsTUFBQUEsU0FBUyxFQUFFYixRQUZiO0FBSUVjLE1BQUFBLE9BQU8sRUFBRSxDQUNQO0FBQ0VDLFFBQUFBLE1BQU0sRUFBRSxJQURWO0FBRUVDLFFBQUFBLE1BQU0sRUFBRSxDQUFDLElBQUQ7QUFGVixPQURPO0FBSlgsS0FmSyxDQUFQO0FBMkJEOztBQTdCd0MiLCJzb3VyY2VSb290IjoiL2hvbWUvYmVuamFtaW4vRG9jdW1lbnRzL3Byb2plY3Qvc2VydmVyL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTZXF1ZWxpemUsIHsgTW9kZWwgfSBmcm9tIFwic2VxdWVsaXplXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2plY3QgZXh0ZW5kcyBNb2RlbCB7XG4gIHN0YXRpYyBpbml0KGRhdGFiYXNlKSB7XG4gICAgcmV0dXJuIHN1cGVyLmluaXQoXG4gICAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgdHlwZTogU2VxdWVsaXplLklOVEVHRVIsXG4gICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIG5hbWU6IHtcbiAgICAgICAgICB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HLFxuICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIG5vdEVtcHR5OiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWJsZU5hbWU6IFwicHJvamVjdHNcIixcbiAgICAgICAgc2VxdWVsaXplOiBkYXRhYmFzZSxcblxuICAgICAgICBpbmRleGVzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgICAgICAgZmllbGRzOiBbXCJpZFwiXVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfVxuICAgICk7XG4gIH1cbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "project.js"
      ],
      "names": [
        "Project",
        "Model",
        "init",
        "database",
        "id",
        "type",
        "Sequelize",
        "INTEGER",
        "primaryKey",
        "autoIncrement",
        "name",
        "STRING",
        "allowNull",
        "validate",
        "notEmpty",
        "tableName",
        "sequelize",
        "indexes",
        "unique",
        "fields"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEe,MAAMA,OAAN,SAAsBC,gBAAtB,CAA4B;AACzC,SAAOC,IAAP,CAAYC,QAAZ,EAAsB;AACpB,WAAO,MAAMD,IAAN,CACL;AACEE,MAAAA,EAAE,EAAE;AACFC,QAAAA,IAAI,EAAEC,mBAAUC,OADd;AAEFC,QAAAA,UAAU,EAAE,IAFV;AAGFC,QAAAA,aAAa,EAAE;AAHb,OADN;AAMEC,MAAAA,IAAI,EAAE;AACJL,QAAAA,IAAI,EAAEC,mBAAUK,MADZ;AAEJC,QAAAA,SAAS,EAAE,KAFP;AAGJC,QAAAA,QAAQ,EAAE;AACRC,UAAAA,QAAQ,EAAE;AADF;AAHN;AANR,KADK,EAeL;AACEC,MAAAA,SAAS,EAAE,UADb;AAEEC,MAAAA,SAAS,EAAEb,QAFb;AAIEc,MAAAA,OAAO,EAAE,CACP;AACEC,QAAAA,MAAM,EAAE,IADV;AAEEC,QAAAA,MAAM,EAAE,CAAC,IAAD;AAFV,OADO;AAJX,KAfK,CAAP;AA2BD;;AA7BwC",
      "sourceRoot": "/home/benjamin/Documents/project/server/models",
      "sourcesContent": [
        "import Sequelize, { Model } from \"sequelize\";\n\nexport default class Project extends Model {\n  static init(database) {\n    return super.init(\n      {\n        id: {\n          type: Sequelize.INTEGER,\n          primaryKey: true,\n          autoIncrement: true\n        },\n        name: {\n          type: Sequelize.STRING,\n          allowNull: false,\n          validate: {\n            notEmpty: true\n          }\n        }\n      },\n      {\n        tableName: \"projects\",\n        sequelize: database,\n\n        indexes: [\n          {\n            unique: true,\n            fields: [\"id\"]\n          }\n        ]\n      }\n    );\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545216996000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/middlewares\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/middlewares/passport.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/middlewares",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/middlewares/passport.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/middlewares/passport.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/middlewares/passport.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/middlewares",
        "sourceFileName": "passport.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _passportLocal = require(\"passport-local\");\n\nvar _passportJwt = require(\"passport-jwt\");\n\nvar _user = _interopRequireDefault(require(\"../models/user\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_passport.default.use(new _passportLocal.Strategy({\n  usernameField: \"nickname\",\n  passwordField: \"password\"\n}, async (nickname, password, next) => {\n  const user = await _user.default.findOne({\n    where: {\n      nickname\n    }\n  });\n\n  if (!user) {\n    return next(\"Nickname doesn't exist\");\n  }\n\n  if (!(await user.checkPassword(password))) {\n    return next(\"Password doesn't match\");\n  }\n\n  return next(false, user);\n}));\n\n_passport.default.use(new _passportJwt.Strategy({\n  jwtFromRequest: _passportJwt.ExtractJwt.fromAuthHeaderAsBearerToken(),\n  secretOrKey: process.env.JWT_ENCRYPTION\n}, async (jwtPayload, next) => {\n  try {\n    const user = await _user.default.findOne({\n      where: {\n        uuid: jwtPayload.uuid\n      }\n    });\n\n    if (!user) {\n      return next(\"User doesn't exist\");\n    }\n\n    return next(false, user);\n  } catch (err) {\n    return next(err.message);\n  }\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3Nwb3J0LmpzIl0sIm5hbWVzIjpbInBhc3Nwb3J0IiwidXNlIiwiTG9jYWxTdHJhdGVneSIsInVzZXJuYW1lRmllbGQiLCJwYXNzd29yZEZpZWxkIiwibmlja25hbWUiLCJwYXNzd29yZCIsIm5leHQiLCJ1c2VyIiwiVXNlciIsImZpbmRPbmUiLCJ3aGVyZSIsImNoZWNrUGFzc3dvcmQiLCJKd3RTdHJhdGVneSIsImp3dEZyb21SZXF1ZXN0IiwiRXh0cmFjdEp3dCIsImZyb21BdXRoSGVhZGVyQXNCZWFyZXJUb2tlbiIsInNlY3JldE9yS2V5IiwicHJvY2VzcyIsImVudiIsIkpXVF9FTkNSWVBUSU9OIiwiand0UGF5bG9hZCIsInV1aWQiLCJlcnIiLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUFBLGtCQUFTQyxHQUFULENBQ0UsSUFBSUMsdUJBQUosQ0FDRTtBQUNFQyxFQUFBQSxhQUFhLEVBQUUsVUFEakI7QUFFRUMsRUFBQUEsYUFBYSxFQUFFO0FBRmpCLENBREYsRUFLRSxPQUFPQyxRQUFQLEVBQWlCQyxRQUFqQixFQUEyQkMsSUFBM0IsS0FBb0M7QUFDbEMsUUFBTUMsSUFBSSxHQUFHLE1BQU1DLGNBQUtDLE9BQUwsQ0FBYTtBQUFFQyxJQUFBQSxLQUFLLEVBQUU7QUFBRU4sTUFBQUE7QUFBRjtBQUFULEdBQWIsQ0FBbkI7O0FBRUEsTUFBSSxDQUFDRyxJQUFMLEVBQVc7QUFDVCxXQUFPRCxJQUFJLENBQUMsd0JBQUQsQ0FBWDtBQUNEOztBQUVELE1BQUksRUFBRSxNQUFNQyxJQUFJLENBQUNJLGFBQUwsQ0FBbUJOLFFBQW5CLENBQVIsQ0FBSixFQUEyQztBQUN6QyxXQUFPQyxJQUFJLENBQUMsd0JBQUQsQ0FBWDtBQUNEOztBQUVELFNBQU9BLElBQUksQ0FBQyxLQUFELEVBQVFDLElBQVIsQ0FBWDtBQUNELENBakJILENBREY7O0FBc0JBUixrQkFBU0MsR0FBVCxDQUNFLElBQUlZLHFCQUFKLENBQ0U7QUFDRUMsRUFBQUEsY0FBYyxFQUFFQyx3QkFBV0MsMkJBQVgsRUFEbEI7QUFFRUMsRUFBQUEsV0FBVyxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUM7QUFGM0IsQ0FERixFQUtFLE9BQU9DLFVBQVAsRUFBbUJkLElBQW5CLEtBQTRCO0FBQzFCLE1BQUk7QUFDRixVQUFNQyxJQUFJLEdBQUcsTUFBTUMsY0FBS0MsT0FBTCxDQUFhO0FBQUVDLE1BQUFBLEtBQUssRUFBRTtBQUFFVyxRQUFBQSxJQUFJLEVBQUVELFVBQVUsQ0FBQ0M7QUFBbkI7QUFBVCxLQUFiLENBQW5COztBQUNBLFFBQUksQ0FBQ2QsSUFBTCxFQUFXO0FBQ1QsYUFBT0QsSUFBSSxDQUFDLG9CQUFELENBQVg7QUFDRDs7QUFDRCxXQUFPQSxJQUFJLENBQUMsS0FBRCxFQUFRQyxJQUFSLENBQVg7QUFDRCxHQU5ELENBTUUsT0FBT2UsR0FBUCxFQUFZO0FBQ1osV0FBT2hCLElBQUksQ0FBQ2dCLEdBQUcsQ0FBQ0MsT0FBTCxDQUFYO0FBQ0Q7QUFDRixDQWZILENBREYiLCJzb3VyY2VSb290IjoiL2hvbWUvYmVuamFtaW4vRG9jdW1lbnRzL3Byb2plY3Qvc2VydmVyL21pZGRsZXdhcmVzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xuaW1wb3J0IHsgU3RyYXRlZ3kgYXMgTG9jYWxTdHJhdGVneSB9IGZyb20gXCJwYXNzcG9ydC1sb2NhbFwiO1xuaW1wb3J0IHsgU3RyYXRlZ3kgYXMgSnd0U3RyYXRlZ3ksIEV4dHJhY3RKd3QgfSBmcm9tIFwicGFzc3BvcnQtand0XCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWxzL3VzZXJcIjtcblxucGFzc3BvcnQudXNlKFxuICBuZXcgTG9jYWxTdHJhdGVneShcbiAgICB7XG4gICAgICB1c2VybmFtZUZpZWxkOiBcIm5pY2tuYW1lXCIsXG4gICAgICBwYXNzd29yZEZpZWxkOiBcInBhc3N3b3JkXCJcbiAgICB9LFxuICAgIGFzeW5jIChuaWNrbmFtZSwgcGFzc3dvcmQsIG5leHQpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB3aGVyZTogeyBuaWNrbmFtZSB9IH0pO1xuXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIG5leHQoXCJOaWNrbmFtZSBkb2Vzbid0IGV4aXN0XCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIShhd2FpdCB1c2VyLmNoZWNrUGFzc3dvcmQocGFzc3dvcmQpKSkge1xuICAgICAgICByZXR1cm4gbmV4dChcIlBhc3N3b3JkIGRvZXNuJ3QgbWF0Y2hcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXh0KGZhbHNlLCB1c2VyKTtcbiAgICB9XG4gIClcbik7XG5cbnBhc3Nwb3J0LnVzZShcbiAgbmV3IEp3dFN0cmF0ZWd5KFxuICAgIHtcbiAgICAgIGp3dEZyb21SZXF1ZXN0OiBFeHRyYWN0Snd0LmZyb21BdXRoSGVhZGVyQXNCZWFyZXJUb2tlbigpLFxuICAgICAgc2VjcmV0T3JLZXk6IHByb2Nlc3MuZW52LkpXVF9FTkNSWVBUSU9OXG4gICAgfSxcbiAgICBhc3luYyAoand0UGF5bG9hZCwgbmV4dCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHdoZXJlOiB7IHV1aWQ6IGp3dFBheWxvYWQudXVpZCB9IH0pO1xuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICByZXR1cm4gbmV4dChcIlVzZXIgZG9lc24ndCBleGlzdFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dChmYWxzZSwgdXNlcik7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIG5leHQoZXJyLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cbiAgKVxuKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "passport.js"
      ],
      "names": [
        "passport",
        "use",
        "LocalStrategy",
        "usernameField",
        "passwordField",
        "nickname",
        "password",
        "next",
        "user",
        "User",
        "findOne",
        "where",
        "checkPassword",
        "JwtStrategy",
        "jwtFromRequest",
        "ExtractJwt",
        "fromAuthHeaderAsBearerToken",
        "secretOrKey",
        "process",
        "env",
        "JWT_ENCRYPTION",
        "jwtPayload",
        "uuid",
        "err",
        "message"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;;;AAEAA,kBAASC,GAAT,CACE,IAAIC,uBAAJ,CACE;AACEC,EAAAA,aAAa,EAAE,UADjB;AAEEC,EAAAA,aAAa,EAAE;AAFjB,CADF,EAKE,OAAOC,QAAP,EAAiBC,QAAjB,EAA2BC,IAA3B,KAAoC;AAClC,QAAMC,IAAI,GAAG,MAAMC,cAAKC,OAAL,CAAa;AAAEC,IAAAA,KAAK,EAAE;AAAEN,MAAAA;AAAF;AAAT,GAAb,CAAnB;;AAEA,MAAI,CAACG,IAAL,EAAW;AACT,WAAOD,IAAI,CAAC,wBAAD,CAAX;AACD;;AAED,MAAI,EAAE,MAAMC,IAAI,CAACI,aAAL,CAAmBN,QAAnB,CAAR,CAAJ,EAA2C;AACzC,WAAOC,IAAI,CAAC,wBAAD,CAAX;AACD;;AAED,SAAOA,IAAI,CAAC,KAAD,EAAQC,IAAR,CAAX;AACD,CAjBH,CADF;;AAsBAR,kBAASC,GAAT,CACE,IAAIY,qBAAJ,CACE;AACEC,EAAAA,cAAc,EAAEC,wBAAWC,2BAAX,EADlB;AAEEC,EAAAA,WAAW,EAAEC,OAAO,CAACC,GAAR,CAAYC;AAF3B,CADF,EAKE,OAAOC,UAAP,EAAmBd,IAAnB,KAA4B;AAC1B,MAAI;AACF,UAAMC,IAAI,GAAG,MAAMC,cAAKC,OAAL,CAAa;AAAEC,MAAAA,KAAK,EAAE;AAAEW,QAAAA,IAAI,EAAED,UAAU,CAACC;AAAnB;AAAT,KAAb,CAAnB;;AACA,QAAI,CAACd,IAAL,EAAW;AACT,aAAOD,IAAI,CAAC,oBAAD,CAAX;AACD;;AACD,WAAOA,IAAI,CAAC,KAAD,EAAQC,IAAR,CAAX;AACD,GAND,CAME,OAAOe,GAAP,EAAY;AACZ,WAAOhB,IAAI,CAACgB,GAAG,CAACC,OAAL,CAAX;AACD;AACF,CAfH,CADF",
      "sourceRoot": "/home/benjamin/Documents/project/server/middlewares",
      "sourcesContent": [
        "import passport from \"passport\";\nimport { Strategy as LocalStrategy } from \"passport-local\";\nimport { Strategy as JwtStrategy, ExtractJwt } from \"passport-jwt\";\nimport User from \"../models/user\";\n\npassport.use(\n  new LocalStrategy(\n    {\n      usernameField: \"nickname\",\n      passwordField: \"password\"\n    },\n    async (nickname, password, next) => {\n      const user = await User.findOne({ where: { nickname } });\n\n      if (!user) {\n        return next(\"Nickname doesn't exist\");\n      }\n\n      if (!(await user.checkPassword(password))) {\n        return next(\"Password doesn't match\");\n      }\n\n      return next(false, user);\n    }\n  )\n);\n\npassport.use(\n  new JwtStrategy(\n    {\n      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n      secretOrKey: process.env.JWT_ENCRYPTION\n    },\n    async (jwtPayload, next) => {\n      try {\n        const user = await User.findOne({ where: { uuid: jwtPayload.uuid } });\n        if (!user) {\n          return next(\"User doesn't exist\");\n        }\n        return next(false, user);\n      } catch (err) {\n        return next(err.message);\n      }\n    }\n  )\n);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545216996000
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/routes/user.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/routes/user.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/routes/user.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/routes/user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/routes",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _user = _interopRequireDefault(require(\"../models/user\"));\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _lodash = require(\"lodash\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)(); // api.delete('/:id', async (req, res) => {\n//   try {\n//     const { uuid } = req.user\n//     const { id } = req.params\n//\n//     const bucket = await Bucket.findByPk(id)\n//     await bucket.destroy()\n//\n//     await destroyBucket(uuid, bucket.name)\n//\n//     res.status(204).end()\n//   } catch (err) {\n//     res.status(400).json({ err: err.message })\n//   }\n// })\n\napi.delete('/:uuid', async (req, res) => {\n  try {\n    const {\n      user\n    } = req;\n    const {\n      uuid\n    } = req.params;\n    await user.destroy({\n      where: {\n        uuid: uuid\n      }\n    });\n    res.status(200).json({\n      message: \"User successfully deleted\"\n    });\n  } catch (err) {\n    res.status(400).json({\n      err\n    });\n  }\n});\napi.put('/:uuid', _passport.default.authenticate(\"jwt\", {\n  session: false\n}), async (req, res) => {\n  try {\n    const {\n      user\n    } = req;\n    const {\n      uuid\n    } = req.params;\n\n    if (user.uuid !== uuid) {\n      res.status(403).json({\n        err: 'Permission denied'\n      });\n    }\n\n    const fields = (0, _lodash.pick)(req.body, ['nickname', 'email', 'password', 'password_confirmation']);\n    await user.update({\n      nickname: req.body.nickname,\n      email: req.body.email,\n      password: \"fake_password\",\n      password_confirmation: \"fake_password\"\n    }, {\n      where: {\n        uuid: req.params.uuid\n      },\n      returning: true,\n      plain: true\n    }).then(response => {\n      res.status(200).json({\n        msg: 'User information updated successfully.'\n      });\n    }).catch(err => {\n      res.status(400).json({\n        error: err.original.detail\n      });\n    }); // res.status(200).json\n    // console.log(req.body);\n    // await user.update(fields)\n\n    res.status(200).json;\n  } catch (err) {\n    res.status(400).json({\n      err: err.message\n    });\n  }\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiYXBpIiwiZGVsZXRlIiwicmVxIiwicmVzIiwidXNlciIsInV1aWQiLCJwYXJhbXMiLCJkZXN0cm95Iiwid2hlcmUiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImVyciIsInB1dCIsInBhc3Nwb3J0IiwiYXV0aGVudGljYXRlIiwic2Vzc2lvbiIsImZpZWxkcyIsImJvZHkiLCJ1cGRhdGUiLCJuaWNrbmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJwYXNzd29yZF9jb25maXJtYXRpb24iLCJyZXR1cm5pbmciLCJwbGFpbiIsInRoZW4iLCJyZXNwb25zZSIsIm1zZyIsImNhdGNoIiwiZXJyb3IiLCJvcmlnaW5hbCIsImRldGFpbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLHNCQUFaLEMsQ0FFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUFBLEdBQUcsQ0FBQ0MsTUFBSixDQUFXLFFBQVgsRUFBcUIsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQ3ZDLE1BQUk7QUFDRixVQUFNO0FBQUVDLE1BQUFBO0FBQUYsUUFBV0YsR0FBakI7QUFDQSxVQUFNO0FBQUVHLE1BQUFBO0FBQUYsUUFBV0gsR0FBRyxDQUFDSSxNQUFyQjtBQUVBLFVBQU1GLElBQUksQ0FBQ0csT0FBTCxDQUFhO0FBQ2pCQyxNQUFBQSxLQUFLLEVBQUU7QUFBRUgsUUFBQUEsSUFBSSxFQUFFQTtBQUFSO0FBRFUsS0FBYixDQUFOO0FBSUFGLElBQUFBLEdBQUcsQ0FBQ00sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ25CQyxNQUFBQSxPQUFPLEVBQUU7QUFEVSxLQUFyQjtBQUdELEdBWEQsQ0FXRSxPQUFPQyxHQUFQLEVBQVk7QUFDWlQsSUFBQUEsR0FBRyxDQUFDTSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRUUsTUFBQUE7QUFBRixLQUFyQjtBQUNEO0FBQ0YsQ0FmRDtBQWlCQVosR0FBRyxDQUFDYSxHQUFKLENBQVEsUUFBUixFQUFrQkMsa0JBQVNDLFlBQVQsQ0FBc0IsS0FBdEIsRUFBNkI7QUFBRUMsRUFBQUEsT0FBTyxFQUFFO0FBQVgsQ0FBN0IsQ0FBbEIsRUFBb0UsT0FBT2QsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQ3RGLE1BQUk7QUFDRixVQUFNO0FBQUVDLE1BQUFBO0FBQUYsUUFBV0YsR0FBakI7QUFDQSxVQUFNO0FBQUVHLE1BQUFBO0FBQUYsUUFBV0gsR0FBRyxDQUFDSSxNQUFyQjs7QUFFQSxRQUFJRixJQUFJLENBQUNDLElBQUwsS0FBY0EsSUFBbEIsRUFBd0I7QUFDdEJGLE1BQUFBLEdBQUcsQ0FBQ00sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVFLFFBQUFBLEdBQUcsRUFBRTtBQUFQLE9BQXJCO0FBQ0Q7O0FBR0QsVUFBTUssTUFBTSxHQUFHLGtCQUFLZixHQUFHLENBQUNnQixJQUFULEVBQWUsQ0FBQyxVQUFELEVBQWEsT0FBYixFQUFzQixVQUF0QixFQUFrQyx1QkFBbEMsQ0FBZixDQUFmO0FBSUEsVUFBTWQsSUFBSSxDQUFDZSxNQUFMLENBQVk7QUFBRUMsTUFBQUEsUUFBUSxFQUFFbEIsR0FBRyxDQUFDZ0IsSUFBSixDQUFTRSxRQUFyQjtBQUNWQyxNQUFBQSxLQUFLLEVBQUVuQixHQUFHLENBQUNnQixJQUFKLENBQVNHLEtBRE47QUFFVkMsTUFBQUEsUUFBUSxFQUFFLGVBRkE7QUFHVkMsTUFBQUEscUJBQXFCLEVBQUU7QUFIYixLQUFaLEVBSUc7QUFBRWYsTUFBQUEsS0FBSyxFQUFHO0FBQUNILFFBQUFBLElBQUksRUFBQ0gsR0FBRyxDQUFDSSxNQUFKLENBQVdEO0FBQWpCLE9BQVY7QUFDSG1CLE1BQUFBLFNBQVMsRUFBRSxJQURSO0FBQ2NDLE1BQUFBLEtBQUssRUFBRTtBQURyQixLQUpILEVBTUNDLElBTkQsQ0FNT0MsUUFBUSxJQUFJO0FBQ2pCeEIsTUFBQUEsR0FBRyxDQUFDTSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBQ2tCLFFBQUFBLEdBQUcsRUFBQztBQUFMLE9BQXJCO0FBQXNFLEtBUHhFLEVBUUNDLEtBUkQsQ0FRUWpCLEdBQUcsSUFBSTtBQUNiVCxNQUFBQSxHQUFHLENBQUNNLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFb0IsUUFBQUEsS0FBSyxFQUFFbEIsR0FBRyxDQUFDbUIsUUFBSixDQUFhQztBQUF0QixPQUFyQjtBQUNELEtBVkQsQ0FBTixDQWJFLENBeUJGO0FBRUE7QUFDQTs7QUFFQTdCLElBQUFBLEdBQUcsQ0FBQ00sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCO0FBQ0QsR0EvQkQsQ0ErQkUsT0FBT0UsR0FBUCxFQUFZO0FBQ1pULElBQUFBLEdBQUcsQ0FBQ00sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVFLE1BQUFBLEdBQUcsRUFBRUEsR0FBRyxDQUFDRDtBQUFYLEtBQXJCO0FBQ0Q7QUFDRixDQW5DRDtlQXFDZVgsRyIsInNvdXJjZVJvb3QiOiIvaG9tZS9iZW5qYW1pbi9Eb2N1bWVudHMvcHJvamVjdC9zZXJ2ZXIvcm91dGVzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuaW1wb3J0IFVzZXIgZnJvbSBcIi4uL21vZGVscy91c2VyXCI7XG5pbXBvcnQgcGFzc3BvcnQgZnJvbSBcInBhc3Nwb3J0XCI7XG5pbXBvcnQgeyBwaWNrIH0gZnJvbSAnbG9kYXNoJ1xuXG5jb25zdCBhcGkgPSBSb3V0ZXIoKTtcblxuLy8gYXBpLmRlbGV0ZSgnLzppZCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuLy8gICB0cnkge1xuLy8gICAgIGNvbnN0IHsgdXVpZCB9ID0gcmVxLnVzZXJcbi8vICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zXG4vL1xuLy8gICAgIGNvbnN0IGJ1Y2tldCA9IGF3YWl0IEJ1Y2tldC5maW5kQnlQayhpZClcbi8vICAgICBhd2FpdCBidWNrZXQuZGVzdHJveSgpXG4vL1xuLy8gICAgIGF3YWl0IGRlc3Ryb3lCdWNrZXQodXVpZCwgYnVja2V0Lm5hbWUpXG4vL1xuLy8gICAgIHJlcy5zdGF0dXMoMjA0KS5lbmQoKVxuLy8gICB9IGNhdGNoIChlcnIpIHtcbi8vICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycjogZXJyLm1lc3NhZ2UgfSlcbi8vICAgfVxuLy8gfSlcblxuYXBpLmRlbGV0ZSgnLzp1dWlkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VyIH0gPSByZXFcbiAgICBjb25zdCB7IHV1aWQgfSA9IHJlcS5wYXJhbXNcblxuICAgIGF3YWl0IHVzZXIuZGVzdHJveSh7XG4gICAgICB3aGVyZTogeyB1dWlkOiB1dWlkIH1cbiAgICB9KVxuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgbWVzc2FnZTogXCJVc2VyIHN1Y2Nlc3NmdWxseSBkZWxldGVkXCJcbiAgICB9KVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVyciB9KVxuICB9XG59KVxuXG5hcGkucHV0KCcvOnV1aWQnLCBwYXNzcG9ydC5hdXRoZW50aWNhdGUoXCJqd3RcIiwgeyBzZXNzaW9uOiBmYWxzZSB9KSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VyIH0gPSByZXFcbiAgICBjb25zdCB7IHV1aWQgfSA9IHJlcS5wYXJhbXNcblxuICAgIGlmICh1c2VyLnV1aWQgIT09IHV1aWQpIHtcbiAgICAgIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyOiAnUGVybWlzc2lvbiBkZW5pZWQnIH0pXG4gICAgfVxuXG5cbiAgICBjb25zdCBmaWVsZHMgPSBwaWNrKHJlcS5ib2R5LCBbJ25pY2tuYW1lJywgJ2VtYWlsJywgJ3Bhc3N3b3JkJywgJ3Bhc3N3b3JkX2NvbmZpcm1hdGlvbiddKVxuXG5cblxuICAgIGF3YWl0IHVzZXIudXBkYXRlKHsgbmlja25hbWU6IHJlcS5ib2R5Lm5pY2tuYW1lLFxuICAgICAgICAgICAgZW1haWw6IHJlcS5ib2R5LmVtYWlsLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IFwiZmFrZV9wYXNzd29yZFwiLFxuICAgICAgICAgICAgcGFzc3dvcmRfY29uZmlybWF0aW9uOiBcImZha2VfcGFzc3dvcmRcIlxuICAgICAgICAgIH0sIHsgd2hlcmUgOiB7dXVpZDpyZXEucGFyYW1zLnV1aWR9LFxuICAgICAgICAgIHJldHVybmluZzogdHJ1ZSwgcGxhaW46IHRydWUgfSlcbiAgICAgICAgICAudGhlbiggcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe21zZzonVXNlciBpbmZvcm1hdGlvbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseS4nfSkgfSlcbiAgICAgICAgICAuY2F0Y2goIGVyciA9PiB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBlcnIub3JpZ2luYWwuZGV0YWlsIH0pXG4gICAgICAgICAgfSk7XG5cbiAgICAvLyByZXMuc3RhdHVzKDIwMCkuanNvblxuXG4gICAgLy8gY29uc29sZS5sb2cocmVxLmJvZHkpO1xuICAgIC8vIGF3YWl0IHVzZXIudXBkYXRlKGZpZWxkcylcblxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyOiBlcnIubWVzc2FnZSB9KVxuICB9XG59KVxuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "api",
        "delete",
        "req",
        "res",
        "user",
        "uuid",
        "params",
        "destroy",
        "where",
        "status",
        "json",
        "message",
        "err",
        "put",
        "passport",
        "authenticate",
        "session",
        "fields",
        "body",
        "update",
        "nickname",
        "email",
        "password",
        "password_confirmation",
        "returning",
        "plain",
        "then",
        "response",
        "msg",
        "catch",
        "error",
        "original",
        "detail"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAG,CAACC,MAAJ,CAAW,QAAX,EAAqB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACvC,MAAI;AACF,UAAM;AAAEC,MAAAA;AAAF,QAAWF,GAAjB;AACA,UAAM;AAAEG,MAAAA;AAAF,QAAWH,GAAG,CAACI,MAArB;AAEA,UAAMF,IAAI,CAACG,OAAL,CAAa;AACjBC,MAAAA,KAAK,EAAE;AAAEH,QAAAA,IAAI,EAAEA;AAAR;AADU,KAAb,CAAN;AAIAF,IAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBC,MAAAA,OAAO,EAAE;AADU,KAArB;AAGD,GAXD,CAWE,OAAOC,GAAP,EAAY;AACZT,IAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEE,MAAAA;AAAF,KAArB;AACD;AACF,CAfD;AAiBAZ,GAAG,CAACa,GAAJ,CAAQ,QAAR,EAAkBC,kBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAA7B,CAAlB,EAAoE,OAAOd,GAAP,EAAYC,GAAZ,KAAoB;AACtF,MAAI;AACF,UAAM;AAAEC,MAAAA;AAAF,QAAWF,GAAjB;AACA,UAAM;AAAEG,MAAAA;AAAF,QAAWH,GAAG,CAACI,MAArB;;AAEA,QAAIF,IAAI,CAACC,IAAL,KAAcA,IAAlB,EAAwB;AACtBF,MAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEE,QAAAA,GAAG,EAAE;AAAP,OAArB;AACD;;AAGD,UAAMK,MAAM,GAAG,kBAAKf,GAAG,CAACgB,IAAT,EAAe,CAAC,UAAD,EAAa,OAAb,EAAsB,UAAtB,EAAkC,uBAAlC,CAAf,CAAf;AAIA,UAAMd,IAAI,CAACe,MAAL,CAAY;AAAEC,MAAAA,QAAQ,EAAElB,GAAG,CAACgB,IAAJ,CAASE,QAArB;AACVC,MAAAA,KAAK,EAAEnB,GAAG,CAACgB,IAAJ,CAASG,KADN;AAEVC,MAAAA,QAAQ,EAAE,eAFA;AAGVC,MAAAA,qBAAqB,EAAE;AAHb,KAAZ,EAIG;AAAEf,MAAAA,KAAK,EAAG;AAACH,QAAAA,IAAI,EAACH,GAAG,CAACI,MAAJ,CAAWD;AAAjB,OAAV;AACHmB,MAAAA,SAAS,EAAE,IADR;AACcC,MAAAA,KAAK,EAAE;AADrB,KAJH,EAMCC,IAND,CAMOC,QAAQ,IAAI;AACjBxB,MAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACkB,QAAAA,GAAG,EAAC;AAAL,OAArB;AAAsE,KAPxE,EAQCC,KARD,CAQQjB,GAAG,IAAI;AACbT,MAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEoB,QAAAA,KAAK,EAAElB,GAAG,CAACmB,QAAJ,CAAaC;AAAtB,OAArB;AACD,KAVD,CAAN,CAbE,CAyBF;AAEA;AACA;;AAEA7B,IAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB;AACD,GA/BD,CA+BE,OAAOE,GAAP,EAAY;AACZT,IAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEE,MAAAA,GAAG,EAAEA,GAAG,CAACD;AAAX,KAArB;AACD;AACF,CAnCD;eAqCeX,G",
      "sourceRoot": "/home/benjamin/Documents/project/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport jwt from \"jsonwebtoken\";\nimport User from \"../models/user\";\nimport passport from \"passport\";\nimport { pick } from 'lodash'\n\nconst api = Router();\n\n// api.delete('/:id', async (req, res) => {\n//   try {\n//     const { uuid } = req.user\n//     const { id } = req.params\n//\n//     const bucket = await Bucket.findByPk(id)\n//     await bucket.destroy()\n//\n//     await destroyBucket(uuid, bucket.name)\n//\n//     res.status(204).end()\n//   } catch (err) {\n//     res.status(400).json({ err: err.message })\n//   }\n// })\n\napi.delete('/:uuid', async (req, res) => {\n  try {\n    const { user } = req\n    const { uuid } = req.params\n\n    await user.destroy({\n      where: { uuid: uuid }\n    })\n\n    res.status(200).json({\n      message: \"User successfully deleted\"\n    })\n  } catch (err) {\n    res.status(400).json({ err })\n  }\n})\n\napi.put('/:uuid', passport.authenticate(\"jwt\", { session: false }), async (req, res) => {\n  try {\n    const { user } = req\n    const { uuid } = req.params\n\n    if (user.uuid !== uuid) {\n      res.status(403).json({ err: 'Permission denied' })\n    }\n\n\n    const fields = pick(req.body, ['nickname', 'email', 'password', 'password_confirmation'])\n\n\n\n    await user.update({ nickname: req.body.nickname,\n            email: req.body.email,\n            password: \"fake_password\",\n            password_confirmation: \"fake_password\"\n          }, { where : {uuid:req.params.uuid},\n          returning: true, plain: true })\n          .then( response => {\n            res.status(200).json({msg:'User information updated successfully.'}) })\n          .catch( err => {\n            res.status(400).json({ error: err.original.detail })\n          });\n\n    // res.status(200).json\n\n    // console.log(req.body);\n    // await user.update(fields)\n\n    res.status(200).json\n  } catch (err) {\n    res.status(400).json({ err: err.message })\n  }\n})\n\nexport default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545522712239
  },
  "{\"sourceRoot\":\"/home/benjamin/Documents/project/server/routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/benjamin/Documents/project/server\",\"filename\":\"/home/benjamin/Documents/project/server/routes/user.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/benjamin/Documents/project/server\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.2.0:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/benjamin/Documents/project/server/routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/home/benjamin/Documents/project/server",
      "filename": "/home/benjamin/Documents/project/server/routes/user.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/benjamin/Documents/project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/benjamin/Documents/project/server/routes/user.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/benjamin/Documents/project/server/routes/user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/benjamin/Documents/project/server/routes",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _user = _interopRequireDefault(require(\"../models/user\"));\n\nvar _passport = _interopRequireDefault(require(\"passport\"));\n\nvar _lodash = require(\"lodash\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst api = (0, _express.Router)(); // api.delete('/:id', async (req, res) => {\n//   try {\n//     const { uuid } = req.user\n//     const { id } = req.params\n//\n//     const bucket = await Bucket.findByPk(id)\n//     await bucket.destroy()\n//\n//     await destroyBucket(uuid, bucket.name)\n//\n//     res.status(204).end()\n//   } catch (err) {\n//     res.status(400).json({ err: err.message })\n//   }\n// })\n\napi.delete('/:uuid', _passport.default.authenticate(\"jwt\", {\n  session: false\n}), async (req, res) => {\n  console.log(\"delete route\");\n\n  try {\n    const {\n      user\n    } = req;\n    const {\n      uuid\n    } = req.params;\n    console.log(user);\n    await _user.default.destroy({\n      where: {\n        uuid: req.params.uuid\n      }\n    }).then(response => {\n      res.status(200).json({\n        msg: \"User deleted successfully.\"\n      });\n    }).catch(err => {\n      res.status(400).json({\n        error: err.original.detail\n      });\n    });\n    res.status(200).json({\n      message: \"User successfully deleted\"\n    });\n  } catch (err) {\n    res.status(400).json({\n      err\n    });\n  }\n});\napi.put('/:uuid', _passport.default.authenticate(\"jwt\", {\n  session: false\n}), async (req, res) => {\n  try {\n    const {\n      user\n    } = req;\n    const {\n      uuid\n    } = req.params;\n\n    if (user.uuid !== uuid) {\n      res.status(403).json({\n        err: 'Permission denied'\n      });\n    } // const fields = pick(req.body, ['nickname', 'email', 'password', 'password_confirmation'])\n    //\n    // await user.update(JSON.parse(JSON.stringify(user)))\n    //\n    // res.status(200).json\n\n\n    console.log(req.body);\n    console.log(user); // await user.update(req.body)\n\n    _user.default.update({\n      nickname: req.body.nickname,\n      email: req.body.email,\n      password: \"password\",\n      password_confirmation: \"password\"\n    }, {\n      where: {\n        uuid: req.params.uuid\n      },\n      returning: true,\n      plain: true\n    });\n\n    res.status(200).json;\n  } catch (err) {\n    res.status(400).json({\n      err: err.message\n    });\n  }\n});\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiYXBpIiwiZGVsZXRlIiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzZXNzaW9uIiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsInVzZXIiLCJ1dWlkIiwicGFyYW1zIiwiVXNlciIsImRlc3Ryb3kiLCJ3aGVyZSIsInRoZW4iLCJyZXNwb25zZSIsInN0YXR1cyIsImpzb24iLCJtc2ciLCJjYXRjaCIsImVyciIsImVycm9yIiwib3JpZ2luYWwiLCJkZXRhaWwiLCJtZXNzYWdlIiwicHV0IiwiYm9keSIsInVwZGF0ZSIsIm5pY2tuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInBhc3N3b3JkX2NvbmZpcm1hdGlvbiIsInJldHVybmluZyIsInBsYWluIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxHQUFHLEdBQUcsc0JBQVosQyxDQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQUEsR0FBRyxDQUFDQyxNQUFKLENBQVcsUUFBWCxFQUFxQkMsa0JBQVNDLFlBQVQsQ0FBc0IsS0FBdEIsRUFBNkI7QUFBRUMsRUFBQUEsT0FBTyxFQUFFO0FBQVgsQ0FBN0IsQ0FBckIsRUFBdUUsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQ3pGQyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxjQUFaOztBQUNBLE1BQUk7QUFDRixVQUFNO0FBQUVDLE1BQUFBO0FBQUYsUUFBV0osR0FBakI7QUFDQSxVQUFNO0FBQUVLLE1BQUFBO0FBQUYsUUFBV0wsR0FBRyxDQUFDTSxNQUFyQjtBQUVBSixJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsSUFBWjtBQUVBLFVBQU1HLGNBQUtDLE9BQUwsQ0FBYTtBQUFDQyxNQUFBQSxLQUFLLEVBQUM7QUFBQ0osUUFBQUEsSUFBSSxFQUFFTCxHQUFHLENBQUNNLE1BQUosQ0FBV0Q7QUFBbEI7QUFBUCxLQUFiLEVBQ0dLLElBREgsQ0FDU0MsUUFBUSxJQUFJO0FBQ2pCVixNQUFBQSxHQUFHLENBQUNXLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFDQyxRQUFBQSxHQUFHLEVBQUU7QUFBTixPQUFyQjtBQUE0RCxLQUZoRSxFQUdHQyxLQUhILENBR1VDLEdBQUcsSUFBSTtBQUNiZixNQUFBQSxHQUFHLENBQUNXLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFSSxRQUFBQSxLQUFLLEVBQUVELEdBQUcsQ0FBQ0UsUUFBSixDQUFhQztBQUF0QixPQUFyQjtBQUNULEtBTEssQ0FBTjtBQU9BbEIsSUFBQUEsR0FBRyxDQUFDVyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFDbkJPLE1BQUFBLE9BQU8sRUFBRTtBQURVLEtBQXJCO0FBR0QsR0FoQkQsQ0FnQkUsT0FBT0osR0FBUCxFQUFZO0FBQ1pmLElBQUFBLEdBQUcsQ0FBQ1csTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVHLE1BQUFBO0FBQUYsS0FBckI7QUFDRDtBQUNGLENBckJEO0FBdUJBckIsR0FBRyxDQUFDMEIsR0FBSixDQUFRLFFBQVIsRUFBa0J4QixrQkFBU0MsWUFBVCxDQUFzQixLQUF0QixFQUE2QjtBQUFFQyxFQUFBQSxPQUFPLEVBQUU7QUFBWCxDQUE3QixDQUFsQixFQUFvRSxPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDdEYsTUFBSTtBQUNGLFVBQU07QUFBRUcsTUFBQUE7QUFBRixRQUFXSixHQUFqQjtBQUNBLFVBQU07QUFBRUssTUFBQUE7QUFBRixRQUFXTCxHQUFHLENBQUNNLE1BQXJCOztBQUVBLFFBQUlGLElBQUksQ0FBQ0MsSUFBTCxLQUFjQSxJQUFsQixFQUF3QjtBQUN0QkosTUFBQUEsR0FBRyxDQUFDVyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRUcsUUFBQUEsR0FBRyxFQUFFO0FBQVAsT0FBckI7QUFDRCxLQU5DLENBU0Y7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUFkLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSCxHQUFHLENBQUNzQixJQUFoQjtBQUNBcEIsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlDLElBQVosRUFsQkUsQ0FtQkY7O0FBQ0FHLGtCQUFLZ0IsTUFBTCxDQUNFO0FBQUVDLE1BQUFBLFFBQVEsRUFBRXhCLEdBQUcsQ0FBQ3NCLElBQUosQ0FBU0UsUUFBckI7QUFDRUMsTUFBQUEsS0FBSyxFQUFFekIsR0FBRyxDQUFDc0IsSUFBSixDQUFTRyxLQURsQjtBQUVFQyxNQUFBQSxRQUFRLEVBQUUsVUFGWjtBQUdFQyxNQUFBQSxxQkFBcUIsRUFBRTtBQUh6QixLQURGLEVBS0s7QUFBRWxCLE1BQUFBLEtBQUssRUFBRztBQUFDSixRQUFBQSxJQUFJLEVBQUNMLEdBQUcsQ0FBQ00sTUFBSixDQUFXRDtBQUFqQixPQUFWO0FBQ0h1QixNQUFBQSxTQUFTLEVBQUUsSUFEUjtBQUNjQyxNQUFBQSxLQUFLLEVBQUU7QUFEckIsS0FMTDs7QUFRRTVCLElBQUFBLEdBQUcsQ0FBQ1csTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCO0FBQ0QsR0E3QkgsQ0E2QkksT0FBT0csR0FBUCxFQUFZO0FBQ1pmLElBQUFBLEdBQUcsQ0FBQ1csTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVHLE1BQUFBLEdBQUcsRUFBRUEsR0FBRyxDQUFDSTtBQUFYLEtBQXJCO0FBQ0Q7QUFDRixDQWpDSDtlQW1DaUJ6QixHIiwic291cmNlUm9vdCI6Ii9ob21lL2JlbmphbWluL0RvY3VtZW50cy9wcm9qZWN0L3NlcnZlci9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWxzL3VzZXJcIjtcbmltcG9ydCBwYXNzcG9ydCBmcm9tIFwicGFzc3BvcnRcIjtcbmltcG9ydCB7IHBpY2sgfSBmcm9tICdsb2Rhc2gnXG5cbmNvbnN0IGFwaSA9IFJvdXRlcigpO1xuXG4vLyBhcGkuZGVsZXRlKCcvOmlkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4vLyAgIHRyeSB7XG4vLyAgICAgY29uc3QgeyB1dWlkIH0gPSByZXEudXNlclxuLy8gICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXNcbi8vXG4vLyAgICAgY29uc3QgYnVja2V0ID0gYXdhaXQgQnVja2V0LmZpbmRCeVBrKGlkKVxuLy8gICAgIGF3YWl0IGJ1Y2tldC5kZXN0cm95KClcbi8vXG4vLyAgICAgYXdhaXQgZGVzdHJveUJ1Y2tldCh1dWlkLCBidWNrZXQubmFtZSlcbi8vXG4vLyAgICAgcmVzLnN0YXR1cygyMDQpLmVuZCgpXG4vLyAgIH0gY2F0Y2ggKGVycikge1xuLy8gICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyOiBlcnIubWVzc2FnZSB9KVxuLy8gICB9XG4vLyB9KVxuXG5hcGkuZGVsZXRlKCcvOnV1aWQnLCBwYXNzcG9ydC5hdXRoZW50aWNhdGUoXCJqd3RcIiwgeyBzZXNzaW9uOiBmYWxzZSB9KSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwiZGVsZXRlIHJvdXRlXCIpO1xuICB0cnkge1xuICAgIGNvbnN0IHsgdXNlciB9ID0gcmVxXG4gICAgY29uc3QgeyB1dWlkIH0gPSByZXEucGFyYW1zXG5cbiAgICBjb25zb2xlLmxvZyh1c2VyKTtcblxuICAgIGF3YWl0IFVzZXIuZGVzdHJveSh7d2hlcmU6e3V1aWQ6IHJlcS5wYXJhbXMudXVpZH19KVxuICAgICAgICAgICAgLnRoZW4oIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe21zZzogXCJVc2VyIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5LlwiIH0pIH0pXG4gICAgICAgICAgICAuY2F0Y2goIGVyciA9PiB7XG4gICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IGVyci5vcmlnaW5hbC5kZXRhaWwgfSlcbiAgICB9KTtcblxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IFwiVXNlciBzdWNjZXNzZnVsbHkgZGVsZXRlZFwiXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnIgfSlcbiAgfVxufSlcblxuYXBpLnB1dCgnLzp1dWlkJywgcGFzc3BvcnQuYXV0aGVudGljYXRlKFwiand0XCIsIHsgc2Vzc2lvbjogZmFsc2UgfSksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgdXNlciB9ID0gcmVxXG4gICAgY29uc3QgeyB1dWlkIH0gPSByZXEucGFyYW1zXG5cbiAgICBpZiAodXNlci51dWlkICE9PSB1dWlkKSB7XG4gICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycjogJ1Blcm1pc3Npb24gZGVuaWVkJyB9KVxuICAgIH1cblxuXG4gICAgLy8gY29uc3QgZmllbGRzID0gcGljayhyZXEuYm9keSwgWyduaWNrbmFtZScsICdlbWFpbCcsICdwYXNzd29yZCcsICdwYXNzd29yZF9jb25maXJtYXRpb24nXSlcblxuXG4gICAgLy9cbiAgICAvLyBhd2FpdCB1c2VyLnVwZGF0ZShKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHVzZXIpKSlcbiAgICAvL1xuICAgIC8vIHJlcy5zdGF0dXMoMjAwKS5qc29uXG5cbiAgICBjb25zb2xlLmxvZyhyZXEuYm9keSk7XG4gICAgY29uc29sZS5sb2codXNlcik7XG4gICAgLy8gYXdhaXQgdXNlci51cGRhdGUocmVxLmJvZHkpXG4gICAgVXNlci51cGRhdGUoXG4gICAgICB7IG5pY2tuYW1lOiByZXEuYm9keS5uaWNrbmFtZSxcbiAgICAgICAgZW1haWw6IHJlcS5ib2R5LmVtYWlsLFxuICAgICAgICBwYXNzd29yZDogXCJwYXNzd29yZFwiLFxuICAgICAgICBwYXNzd29yZF9jb25maXJtYXRpb246IFwicGFzc3dvcmRcIlxuICAgICAgfSwgeyB3aGVyZSA6IHt1dWlkOnJlcS5wYXJhbXMudXVpZH0sXG4gICAgICByZXR1cm5pbmc6IHRydWUsIHBsYWluOiB0cnVlIH0pXG5cbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycjogZXJyLm1lc3NhZ2UgfSlcbiAgICB9XG4gIH0pXG5cbiAgZXhwb3J0IGRlZmF1bHQgYXBpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "api",
        "delete",
        "passport",
        "authenticate",
        "session",
        "req",
        "res",
        "console",
        "log",
        "user",
        "uuid",
        "params",
        "User",
        "destroy",
        "where",
        "then",
        "response",
        "status",
        "json",
        "msg",
        "catch",
        "err",
        "error",
        "original",
        "detail",
        "message",
        "put",
        "body",
        "update",
        "nickname",
        "email",
        "password",
        "password_confirmation",
        "returning",
        "plain"
      ],
      "mappings": "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",
      "sourceRoot": "/home/benjamin/Documents/project/server/routes",
      "sourcesContent": [
        "import { Router } from \"express\";\nimport jwt from \"jsonwebtoken\";\nimport User from \"../models/user\";\nimport passport from \"passport\";\nimport { pick } from 'lodash'\n\nconst api = Router();\n\n// api.delete('/:id', async (req, res) => {\n//   try {\n//     const { uuid } = req.user\n//     const { id } = req.params\n//\n//     const bucket = await Bucket.findByPk(id)\n//     await bucket.destroy()\n//\n//     await destroyBucket(uuid, bucket.name)\n//\n//     res.status(204).end()\n//   } catch (err) {\n//     res.status(400).json({ err: err.message })\n//   }\n// })\n\napi.delete('/:uuid', passport.authenticate(\"jwt\", { session: false }), async (req, res) => {\n  console.log(\"delete route\");\n  try {\n    const { user } = req\n    const { uuid } = req.params\n\n    console.log(user);\n\n    await User.destroy({where:{uuid: req.params.uuid}})\n            .then( response => {\n              res.status(200).json({msg: \"User deleted successfully.\" }) })\n            .catch( err => {\n              res.status(400).json({ error: err.original.detail })\n    });\n\n    res.status(200).json({\n      message: \"User successfully deleted\"\n    })\n  } catch (err) {\n    res.status(400).json({ err })\n  }\n})\n\napi.put('/:uuid', passport.authenticate(\"jwt\", { session: false }), async (req, res) => {\n  try {\n    const { user } = req\n    const { uuid } = req.params\n\n    if (user.uuid !== uuid) {\n      res.status(403).json({ err: 'Permission denied' })\n    }\n\n\n    // const fields = pick(req.body, ['nickname', 'email', 'password', 'password_confirmation'])\n\n\n    //\n    // await user.update(JSON.parse(JSON.stringify(user)))\n    //\n    // res.status(200).json\n\n    console.log(req.body);\n    console.log(user);\n    // await user.update(req.body)\n    User.update(\n      { nickname: req.body.nickname,\n        email: req.body.email,\n        password: \"password\",\n        password_confirmation: \"password\"\n      }, { where : {uuid:req.params.uuid},\n      returning: true, plain: true })\n\n      res.status(200).json\n    } catch (err) {\n      res.status(400).json({ err: err.message })\n    }\n  })\n\n  export default api;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1545527370607
  }
}